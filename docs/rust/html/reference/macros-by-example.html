<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Macros by example - The Rust Reference</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/reference-ce12791d.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-fb3845b4.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-edc1c836.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust Reference</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/reference/" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/reference/edit/master/src/macros-by-example.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <span class=fa-svg id="git-edit-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M421.7 220.3l-11.3 11.3-22.6 22.6-205 205c-6.6 6.6-14.8 11.5-23.8 14.1L30.8 511c-8.4 2.5-17.5 .2-23.7-6.1S-1.5 489.7 1 481.2L38.7 353.1c2.6-9 7.5-17.2 14.1-23.8l205-205 22.6-22.6 11.3-11.3 33.9 33.9 62.1 62.1 33.9 33.9zM96 353.9l-9.3 9.3c-.9 .9-1.6 2.1-2 3.4l-25.3 86 86-25.3c1.3-.4 2.5-1.1 3.4-2l9.3-9.3H112c-8.8 0-16-7.2-16-16V353.9zM453.3 19.3l39.4 39.4c25 25 25 65.5 0 90.5l-14.5 14.5-22.6 22.6-11.3 11.3-33.9-33.9-62.1-62.1L314.3 67.7l11.3-11.3 22.6-22.6 14.5-14.5c25-25 65.5-25 90.5 0z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <div class="rule" id="r-macro.decl"><a class="rule-link" href="#r-macro.decl" title="macro.decl"><span>[macro<wbr>.decl]</span></a>
</div>

<h1 id="macros-by-example"><a class="header" href="#macros-by-example">Macros by example</a></h1>
<div class="rule" id="r-macro.decl.syntax"><a class="rule-link" href="#r-macro.decl.syntax" title="macro.decl.syntax"><span>[macro<wbr>.decl<wbr>.syntax]</span></a>
</div>

<div class="grammar-container">
<p><strong><sup>Syntax</sup></strong>
<br>
<span class="grammar-text grammar-production" id="grammar-MacroRulesDefinition" onclick="show_railroad()"><a href="macros-by-example.html#railroad-MacroRulesDefinition">MacroRulesDefinition</a></span> → <br>    <span class="grammar-literal">macro_rules</span> <span class="grammar-literal">!</span> <span class="grammar-text"><a href="identifiers.html#grammar-IDENTIFIER">IDENTIFIER</a></span> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroRulesDef">MacroRulesDef</a></span></p>
<p><span class="grammar-text grammar-production" id="grammar-MacroRulesDef" onclick="show_railroad()"><a href="macros-by-example.html#railroad-MacroRulesDef">MacroRulesDef</a></span> → <br>      <span class="grammar-literal">(</span> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroRules">MacroRules</a></span> <span class="grammar-literal">)</span> <span class="grammar-literal">;</span> <br>    | <span class="grammar-literal">[</span> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroRules">MacroRules</a></span> <span class="grammar-literal">]</span> <span class="grammar-literal">;</span> <br>    | <span class="grammar-literal">{</span> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroRules">MacroRules</a></span> <span class="grammar-literal">}</span></p>
<p><span class="grammar-text grammar-production" id="grammar-MacroRules" onclick="show_railroad()"><a href="macros-by-example.html#railroad-MacroRules">MacroRules</a></span> → <br>    <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroRule">MacroRule</a></span> ( <span class="grammar-literal">;</span> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroRule">MacroRule</a></span> )<sup>*</sup> <span class="grammar-literal">;</span><sup>?</sup></p>
<p><span class="grammar-text grammar-production" id="grammar-MacroRule" onclick="show_railroad()"><a href="macros-by-example.html#railroad-MacroRule">MacroRule</a></span> → <br>    <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroMatcher">MacroMatcher</a></span> <span class="grammar-literal">=&gt;</span> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroTranscriber">MacroTranscriber</a></span></p>
<p><span class="grammar-text grammar-production" id="grammar-MacroMatcher" onclick="show_railroad()"><a href="macros-by-example.html#railroad-MacroMatcher">MacroMatcher</a></span> → <br>      <span class="grammar-literal">(</span> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroMatch">MacroMatch</a></span><sup>*</sup> <span class="grammar-literal">)</span> <br>    | <span class="grammar-literal">[</span> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroMatch">MacroMatch</a></span><sup>*</sup> <span class="grammar-literal">]</span> <br>    | <span class="grammar-literal">{</span> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroMatch">MacroMatch</a></span><sup>*</sup> <span class="grammar-literal">}</span></p>
<p><span class="grammar-text grammar-production" id="grammar-MacroMatch" onclick="show_railroad()"><a href="macros-by-example.html#railroad-MacroMatch">MacroMatch</a></span> → <br>      <span class="grammar-text"><a href="tokens.html#grammar-Token">Token</a></span><sub class="grammar-text">except <code>$</code> and <a href="tokens.html#r-lex.token.delim">delimiters</a></sub> <br>    | <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroMatcher">MacroMatcher</a></span> <br>    | <span class="grammar-literal">$</span> ( <span class="grammar-text"><a href="identifiers.html#grammar-IDENTIFIER_OR_KEYWORD">IDENTIFIER_OR_KEYWORD</a></span><sub class="grammar-text">except <code>crate</code></sub> | <span class="grammar-text"><a href="identifiers.html#grammar-RAW_IDENTIFIER">RAW_IDENTIFIER</a></span> ) <span class="grammar-literal">:</span> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroFragSpec">MacroFragSpec</a></span> <br>    | <span class="grammar-literal">$</span> <span class="grammar-literal">(</span> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroMatch">MacroMatch</a></span><sup>+</sup> <span class="grammar-literal">)</span> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroRepSep">MacroRepSep</a></span><sup>?</sup> <span class="grammar-text"><a href="macros-by-example.html#grammar-MacroRepOp">MacroRepOp</a></span></p>
<p><span class="grammar-text grammar-production" id="grammar-MacroFragSpec" onclick="show_railroad()"><a href="macros-by-example.html#railroad-MacroFragSpec">MacroFragSpec</a></span> → <br>      <span class="grammar-literal">block</span> | <span class="grammar-literal">expr</span> | <span class="grammar-literal">expr_2021</span> | <span class="grammar-literal">ident</span> | <span class="grammar-literal">item</span> | <span class="grammar-literal">lifetime</span> | <span class="grammar-literal">literal</span> <br>    | <span class="grammar-literal">meta</span> | <span class="grammar-literal">pat</span> | <span class="grammar-literal">pat_param</span> | <span class="grammar-literal">path</span> | <span class="grammar-literal">stmt</span> | <span class="grammar-literal">tt</span> | <span class="grammar-literal">ty</span> | <span class="grammar-literal">vis</span></p>
<p><span class="grammar-text grammar-production" id="grammar-MacroRepSep" onclick="show_railroad()"><a href="macros-by-example.html#railroad-MacroRepSep">MacroRepSep</a></span> → <span class="grammar-text"><a href="tokens.html#grammar-Token">Token</a></span><sub class="grammar-text">except <a href="tokens.html#r-lex.token.delim">delimiters</a> and <a href="macros-by-example.html#grammar-MacroRepOp">MacroRepOp</a></sub></p>
<p><span class="grammar-text grammar-production" id="grammar-MacroRepOp" onclick="show_railroad()"><a href="macros-by-example.html#railroad-MacroRepOp">MacroRepOp</a></span> → <span class="grammar-literal">*</span> | <span class="grammar-literal">+</span> | <span class="grammar-literal">?</span></p>
<p><span class="grammar-text grammar-production" id="grammar-MacroTranscriber" onclick="show_railroad()"><a href="macros-by-example.html#railroad-MacroTranscriber">MacroTranscriber</a></span> → <span class="grammar-text"><a href="macros.html#grammar-DelimTokenTree">DelimTokenTree</a></span></p>
<p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p>
</div>

<div class="grammar-railroad grammar-hidden">
<div style="width: 460px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-MacroRulesDefinition"><svg class="railroad" viewbox="0 0 460 74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%" />
<g class="verticalgrid">
<a class="link" xlink:href="macros-by-example.html#grammar-MacroRulesDefinition">
<text class="comment" x="88" y="25">
MacroRulesDefinition</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5" />
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="108" x="35" y="42" />
<text x="89" y="58">
macro_rules</text>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="153" y="42" />
<text x="167" y="58">
!</text>
</g>
<a class="link" xlink:href="identifiers.html#railroad-IDENTIFIER">
<g class="nonterminal">
<rect height="22" width="100" x="191" y="42" />
<text x="241" y="58">
IDENTIFIER</text>
</g>
</a>
<a class="link" xlink:href="macros-by-example.html#railroad-MacroRulesDef">
<g class="nonterminal">
<rect height="22" width="124" x="301" y="42" />
<text x="363" y="58">
MacroRulesDef</text>
</g>
</a>
<path d=" M 143 53 h 10" />
<path d=" M 181 53 h 10" />
<path d=" M 291 53 h 10" />
</g>
<path d=" M 435 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5" />
<path d=" M 25 53 h 10" />
<path d=" M 425 53 h 10" />
</g>
</g>
</svg>
</div>

<div style="width: 332px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-MacroRulesDef"><svg class="railroad" viewbox="0 0 332 140" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%" />
<g class="verticalgrid">
<a class="link" xlink:href="macros-by-example.html#grammar-MacroRulesDef">
<text class="comment" x="60" y="25">
MacroRulesDef</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5" />
<g class="choice">
<path d=" M 35 53 h 24 m 214 0 h 24" />
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="42" />
<text x="73" y="58">
(</text>
</g>
<a class="link" xlink:href="macros-by-example.html#railroad-MacroRules">
<g class="nonterminal">
<rect height="22" width="100" x="97" y="42" />
<text x="147" y="58">
MacroRules</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="207" y="42" />
<text x="221" y="58">
)</text>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="245" y="42" />
<text x="259" y="58">
;</text>
</g>
<path d=" M 87 53 h 10" />
<path d=" M 197 53 h 10" />
<path d=" M 235 53 h 10" />
</g>
<path d=" M 35 53 a 12 12 0 0 1 12 12 v 9 m 238 0 v -9 a 12 12 0 0 1 12 -12" />
<path d=" M 47 74 v 33 m 238 0 v -33" />
<path d=" M 47 74 v 0 a 12 12 0 0 0 12 12 m 214 0 h 0 a 12 12 0 0 0 12 -12 v 0" />
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="75" />
<text x="73" y="91">
[</text>
</g>
<a class="link" xlink:href="macros-by-example.html#railroad-MacroRules">
<g class="nonterminal">
<rect height="22" width="100" x="97" y="75" />
<text x="147" y="91">
MacroRules</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="207" y="75" />
<text x="221" y="91">
]</text>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="245" y="75" />
<text x="259" y="91">
;</text>
</g>
<path d=" M 87 86 h 10" />
<path d=" M 197 86 h 10" />
<path d=" M 235 86 h 10" />
</g>
<path d=" M 47 107 v 0 a 12 12 0 0 0 12 12 m 176 0 h 38 a 12 12 0 0 0 12 -12 v 0" />
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="108" />
<text x="73" y="124">
{</text>
</g>
<a class="link" xlink:href="macros-by-example.html#railroad-MacroRules">
<g class="nonterminal">
<rect height="22" width="100" x="97" y="108" />
<text x="147" y="124">
MacroRules</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="207" y="108" />
<text x="221" y="124">
}</text>
</g>
<path d=" M 87 119 h 10" />
<path d=" M 197 119 h 10" />
</g>
</g>
<path d=" M 307 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5" />
<path d=" M 25 53 h 10" />
<path d=" M 297 53 h 10" />
</g>
</g>
</svg>
</div>

<div style="width: 460px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-MacroRules"><svg class="railroad" viewbox="0 0 460 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%" />
<g class="verticalgrid">
<a class="link" xlink:href="macros-by-example.html#grammar-MacroRules">
<text class="comment" x="50" y="25">
MacroRules</text>
</a>
<g class="sequence">
<path d=" M 10 66 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5" />
<g class="sequence">
<a class="link" xlink:href="macros-by-example.html#railroad-MacroRule">
<g class="nonterminal">
<rect height="22" width="92" x="35" y="55" />
<text x="81" y="71">
MacroRule</text>
</g>
</a>
<g class="optional">
<path d=" M 137 66 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 154 m -74 0 l -5 -5 m 0 10 l 5 -5 m 74 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24" />
<g class="repeat">
<path d=" M 161 66 h 12 m 130 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 1 -12 12 m 0 0 h -130 m 68 0 l 5 -5 m 0 10 l -5 -5 m -68 0 a 12 12 0 0 1 -12 -12 v 0 a 12 12 0 0 1 12 -12" />
<g />
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="173" y="55" />
<text x="187" y="71">
;</text>
</g>
<a class="link" xlink:href="macros-by-example.html#railroad-MacroRule">
<g class="nonterminal">
<rect height="22" width="92" x="211" y="55" />
<text x="257" y="71">
MacroRule</text>
</g>
</a>
<path d=" M 201 66 h 10" />
</g>
</g>
</g>
<g class="optional">
<path d=" M 349 66 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 28 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="373" y="55" />
<text x="387" y="71">
;</text>
</g>
</g>
<path d=" M 127 66 h 10" />
<path d=" M 339 66 h 10" />
</g>
<path d=" M 435 66 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5" />
<path d=" M 25 66 h 10" />
<path d=" M 425 66 h 10" />
</g>
</g>
</svg>
</div>

<div style="width: 390px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-MacroRule"><svg class="railroad" viewbox="0 0 390 74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%" />
<g class="verticalgrid">
<a class="link" xlink:href="macros-by-example.html#grammar-MacroRule">
<text class="comment" x="46" y="25">
MacroRule</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5" />
<g class="sequence">
<a class="link" xlink:href="macros-by-example.html#railroad-MacroMatcher">
<g class="nonterminal">
<rect height="22" width="116" x="35" y="42" />
<text x="93" y="58">
MacroMatcher</text>
</g>
</a>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="161" y="42" />
<text x="179" y="58">
=&gt;</text>
</g>
<a class="link" xlink:href="macros-by-example.html#railroad-MacroTranscriber">
<g class="nonterminal">
<rect height="22" width="148" x="207" y="42" />
<text x="281" y="58">
MacroTranscriber</text>
</g>
</a>
<path d=" M 151 53 h 10" />
<path d=" M 197 53 h 10" />
</g>
<path d=" M 365 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5" />
<path d=" M 25 53 h 10" />
<path d=" M 355 53 h 10" />
</g>
</g>
</svg>
</div>

<div style="width: 366px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-MacroMatcher"><svg class="railroad" viewbox="0 0 366 216" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%" />
<g class="verticalgrid">
<a class="link" xlink:href="macros-by-example.html#grammar-MacroMatcher">
<text class="comment" x="57" y="25">
MacroMatcher</text>
</a>
<g class="sequence">
<path d=" M 10 66 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5" />
<g class="choice">
<path d=" M 35 66 h 24 m 248 0 h 24" />
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="55" />
<text x="73" y="71">
(</text>
</g>
<g class="optional">
<path d=" M 97 66 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 124 m -59 0 l -5 -5 m 0 10 l 5 -5 m 59 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24" />
<g class="repeat">
<path d=" M 121 66 h 12 m 100 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 1 -12 12 m 0 0 h -100 m 53 0 l 5 -5 m 0 10 l -5 -5 m -53 0 a 12 12 0 0 1 -12 -12 v 0 a 12 12 0 0 1 12 -12" />
<g />
<a class="link" xlink:href="macros-by-example.html#railroad-MacroMatch">
<g class="nonterminal">
<rect height="22" width="100" x="133" y="55" />
<text x="183" y="71">
MacroMatch</text>
</g>
</a>
</g>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="279" y="55" />
<text x="293" y="71">
)</text>
</g>
<path d=" M 87 66 h 10" />
<path d=" M 269 66 h 10" />
</g>
<path d=" M 35 66 a 12 12 0 0 1 12 12 v 22 m 272 0 v -22 a 12 12 0 0 1 12 -12" />
<path d=" M 47 112 v 46 m 272 0 v -46" />
<path d=" M 47 100 v 12 a 12 12 0 0 0 12 12 m 248 0 h 0 a 12 12 0 0 0 12 -12 v -12" />
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="113" />
<text x="73" y="129">
[</text>
</g>
<g class="optional">
<path d=" M 97 124 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 124 m -59 0 l -5 -5 m 0 10 l 5 -5 m 59 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24" />
<g class="repeat">
<path d=" M 121 124 h 12 m 100 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 1 -12 12 m 0 0 h -100 m 53 0 l 5 -5 m 0 10 l -5 -5 m -53 0 a 12 12 0 0 1 -12 -12 v 0 a 12 12 0 0 1 12 -12" />
<g />
<a class="link" xlink:href="macros-by-example.html#railroad-MacroMatch">
<g class="nonterminal">
<rect height="22" width="100" x="133" y="113" />
<text x="183" y="129">
MacroMatch</text>
</g>
</a>
</g>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="279" y="113" />
<text x="293" y="129">
]</text>
</g>
<path d=" M 87 124 h 10" />
<path d=" M 269 124 h 10" />
</g>
<path d=" M 47 158 v 12 a 12 12 0 0 0 12 12 m 248 0 h 0 a 12 12 0 0 0 12 -12 v -12" />
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="171" />
<text x="73" y="187">
{</text>
</g>
<g class="optional">
<path d=" M 97 182 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 124 m -59 0 l -5 -5 m 0 10 l 5 -5 m 59 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24" />
<g class="repeat">
<path d=" M 121 182 h 12 m 100 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 1 -12 12 m 0 0 h -100 m 53 0 l 5 -5 m 0 10 l -5 -5 m -53 0 a 12 12 0 0 1 -12 -12 v 0 a 12 12 0 0 1 12 -12" />
<g />
<a class="link" xlink:href="macros-by-example.html#railroad-MacroMatch">
<g class="nonterminal">
<rect height="22" width="100" x="133" y="171" />
<text x="183" y="187">
MacroMatch</text>
</g>
</a>
</g>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="279" y="171" />
<text x="293" y="187">
}</text>
</g>
<path d=" M 87 182 h 10" />
<path d=" M 269 182 h 10" />
</g>
</g>
<path d=" M 341 66 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5" />
<path d=" M 25 66 h 10" />
<path d=" M 331 66 h 10" />
</g>
</g>
</svg>
</div>

<div style="width: 632px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-MacroMatch"><svg class="railroad" viewbox="0 0 632 318" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%" />
<g class="verticalgrid">
<a class="link" xlink:href="macros-by-example.html#grammar-MacroMatch">
<text class="comment" x="50" y="25">
MacroMatch</text>
</a>
<g class="sequence">
<path d=" M 10 89 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5" />
<g class="choice">
<path d=" M 35 89 h 24 m 208 0 h 330 m -162 0 l -5 -5 m 0 10 l 5 -5 m 162 0" />
<g class="sequence">
<g class="labeledbox">
<rect height="66" width="208" x="59" y="42" />
<path d=" M 59 89 h 8 m 60 0 h 140 m -67 0 l -5 -5 m 0 10 l 5 -5 m 67 0" />
<text class="comment" x="163" y="65">
except `$` and delimiters</text>
<a class="link" xlink:href="tokens.html#railroad-Token">
<g class="nonterminal">
<rect height="22" width="60" x="67" y="78" />
<text x="97" y="94">
Token</text>
</g>
</a>
</g>
</g>
<path d=" M 35 89 a 12 12 0 0 1 12 12 v 17 m 538 0 v -17 a 12 12 0 0 1 12 -12" />
<path d=" M 47 118 v 33 m 538 0 v -33" />
<path d=" M 47 186 v 74 m 0 -34 l -5 -5 m 10 0 l -5 5 m 0 34 m 538 0 v -74 m 0 40 l -5 5 m 10 0 l -5 -5 m 0 -40" />
<path d=" M 47 118 v 0 a 12 12 0 0 0 12 12 m 116 0 h 398 m -196 0 l -5 -5 m 0 10 l 5 -5 m 196 0 a 12 12 0 0 0 12 -12 v 0" />
<g class="sequence">
<a class="link" xlink:href="macros-by-example.html#railroad-MacroMatcher">
<g class="nonterminal">
<rect height="22" width="116" x="59" y="119" />
<text x="117" y="135">
MacroMatcher</text>
</g>
</a>
</g>
<path d=" M 47 151 v 35 a 12 12 0 0 0 12 12 m 470 0 h 44 a 12 12 0 0 0 12 -12 v -35" />
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="187" />
<text x="73" y="203">
$</text>
</g>
<g class="choice">
<path d=" M 97 198 h 24 m 212 0 h 24" />
<g class="labeledbox">
<rect height="66" width="212" x="121" y="151" />
<path d=" M 121 198 h 8 m 196 0 h 8" />
<text class="comment" x="183" y="174">
except `crate`</text>
<a class="link" xlink:href="identifiers.html#railroad-IDENTIFIER_OR_KEYWORD">
<g class="nonterminal">
<rect height="22" width="196" x="129" y="187" />
<text x="227" y="203">
IDENTIFIER_OR_KEYWORD</text>
</g>
</a>
</g>
<path d=" M 97 198 a 12 12 0 0 1 12 12 v 17 m 236 0 v -17 a 12 12 0 0 1 12 -12" />
<path d=" M 109 227 v 0 a 12 12 0 0 0 12 12 m 132 0 h 80 m -37 0 l -5 -5 m 0 10 l 5 -5 m 37 0 a 12 12 0 0 0 12 -12 v 0" />
<a class="link" xlink:href="identifiers.html#railroad-RAW_IDENTIFIER">
<g class="nonterminal">
<rect height="22" width="132" x="121" y="228" />
<text x="187" y="244">
RAW_IDENTIFIER</text>
</g>
</a>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="367" y="187" />
<text x="381" y="203">
:</text>
</g>
<a class="link" xlink:href="macros-by-example.html#railroad-MacroFragSpec">
<g class="nonterminal">
<rect height="22" width="124" x="405" y="187" />
<text x="467" y="203">
MacroFragSpec</text>
</g>
</a>
<path d=" M 87 198 h 10" />
<path d=" M 357 198 h 10" />
<path d=" M 395 198 h 10" />
</g>
<path d=" M 47 260 v 12 a 12 12 0 0 0 12 12 m 514 0 h 0 a 12 12 0 0 0 12 -12 v -12" />
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="273" />
<text x="73" y="289">
$</text>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="97" y="273" />
<text x="111" y="289">
(</text>
</g>
<g class="repeat">
<path d=" M 135 284 h 12 m 100 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 1 -12 12 m 0 0 h -100 m 53 0 l 5 -5 m 0 10 l -5 -5 m -53 0 a 12 12 0 0 1 -12 -12 v 0 a 12 12 0 0 1 12 -12" />
<g />
<a class="link" xlink:href="macros-by-example.html#railroad-MacroMatch">
<g class="nonterminal">
<rect height="22" width="100" x="147" y="273" />
<text x="197" y="289">
MacroMatch</text>
</g>
</a>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="269" y="273" />
<text x="283" y="289">
)</text>
</g>
<g class="optional">
<path d=" M 307 284 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 108 m -51 0 l -5 -5 m 0 10 l 5 -5 m 51 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24" />
<a class="link" xlink:href="macros-by-example.html#railroad-MacroRepSep">
<g class="nonterminal">
<rect height="22" width="108" x="331" y="273" />
<text x="385" y="289">
MacroRepSep</text>
</g>
</a>
</g>
<a class="link" xlink:href="macros-by-example.html#railroad-MacroRepOp">
<g class="nonterminal">
<rect height="22" width="100" x="473" y="273" />
<text x="523" y="289">
MacroRepOp</text>
</g>
</a>
<path d=" M 87 284 h 10" />
<path d=" M 125 284 h 10" />
<path d=" M 259 284 h 10" />
<path d=" M 297 284 h 10" />
<path d=" M 463 284 h 10" />
</g>
</g>
<path d=" M 607 89 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5" />
<path d=" M 25 89 h 10" />
<path d=" M 597 89 h 10" />
</g>
</g>
</svg>
</div>

<div style="width: 210px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-MacroFragSpec"><svg class="railroad" viewbox="0 0 210 536" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%" />
<g class="verticalgrid">
<a class="link" xlink:href="macros-by-example.html#grammar-MacroFragSpec">
<text class="comment" x="60" y="25">
MacroFragSpec</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5" />
<g class="choice">
<path d=" M 35 53 h 24 m 60 0 h 56 m -25 0 l -5 -5 m 0 10 l 5 -5 m 25 0" />
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="60" x="59" y="42" />
<text x="89" y="58">
block</text>
</g>
</g>
<path d=" M 35 53 a 12 12 0 0 1 12 12 v 9 m 116 0 v -9 a 12 12 0 0 1 12 -12" />
<path d=" M 47 74 v 33 m 116 0 v -33" />
<path d=" M 47 107 v 33 m 116 0 v -33" />
<path d=" M 47 140 v 33 m 116 0 v -33" />
<path d=" M 47 173 v 33 m 116 0 v -33" />
<path d=" M 47 206 v 33 m 116 0 v -33" />
<path d=" M 47 239 v 33 m 116 0 v -33" />
<path d=" M 47 272 v 33 m 116 0 v -33" />
<path d=" M 47 305 v 33 m 116 0 v -33" />
<path d=" M 47 338 v 33 m 116 0 v -33" />
<path d=" M 47 371 v 33 m 116 0 v -33" />
<path d=" M 47 404 v 33 m 116 0 v -33" />
<path d=" M 47 437 v 33 m 116 0 v -33" />
<path d=" M 47 470 v 33 m 116 0 v -33" />
<path d=" M 47 74 v 0 a 12 12 0 0 0 12 12 m 52 0 h 40 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="52" x="59" y="75" />
<text x="85" y="91">
expr</text>
</g>
<path d=" M 47 107 v 0 a 12 12 0 0 0 12 12 m 92 0 h 0 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="92" x="59" y="108" />
<text x="105" y="124">
expr_2021</text>
</g>
<path d=" M 47 140 v 0 a 12 12 0 0 0 12 12 m 60 0 h 32 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="60" x="59" y="141" />
<text x="89" y="157">
ident</text>
</g>
<path d=" M 47 173 v 0 a 12 12 0 0 0 12 12 m 52 0 h 40 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="52" x="59" y="174" />
<text x="85" y="190">
item</text>
</g>
<path d=" M 47 206 v 0 a 12 12 0 0 0 12 12 m 84 0 h 8 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="84" x="59" y="207" />
<text x="101" y="223">
lifetime</text>
</g>
<path d=" M 47 239 v 0 a 12 12 0 0 0 12 12 m 76 0 h 16 a 12 12 0 0 0 12 -12 v 0" />
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="76" x="59" y="240" />
<text x="97" y="256">
literal</text>
</g>
</g>
<path d=" M 47 272 v 0 a 12 12 0 0 0 12 12 m 52 0 h 40 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="52" x="59" y="273" />
<text x="85" y="289">
meta</text>
</g>
<path d=" M 47 305 v 0 a 12 12 0 0 0 12 12 m 44 0 h 48 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="44" x="59" y="306" />
<text x="81" y="322">
pat</text>
</g>
<path d=" M 47 338 v 0 a 12 12 0 0 0 12 12 m 92 0 h 0 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="92" x="59" y="339" />
<text x="105" y="355">
pat_param</text>
</g>
<path d=" M 47 371 v 0 a 12 12 0 0 0 12 12 m 52 0 h 40 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="52" x="59" y="372" />
<text x="85" y="388">
path</text>
</g>
<path d=" M 47 404 v 0 a 12 12 0 0 0 12 12 m 52 0 h 40 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="52" x="59" y="405" />
<text x="85" y="421">
stmt</text>
</g>
<path d=" M 47 437 v 0 a 12 12 0 0 0 12 12 m 36 0 h 56 m -25 0 l -5 -5 m 0 10 l 5 -5 m 25 0 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="59" y="438" />
<text x="77" y="454">
tt</text>
</g>
<path d=" M 47 470 v 0 a 12 12 0 0 0 12 12 m 36 0 h 56 m -25 0 l -5 -5 m 0 10 l 5 -5 m 25 0 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="59" y="471" />
<text x="77" y="487">
ty</text>
</g>
<path d=" M 47 503 v 0 a 12 12 0 0 0 12 12 m 44 0 h 48 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="44" x="59" y="504" />
<text x="81" y="520">
vis</text>
</g>
</g>
<path d=" M 185 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5" />
<path d=" M 25 53 h 10" />
<path d=" M 175 53 h 10" />
</g>
</g>
</svg>
</div>

<div style="width: 327px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-MacroRepSep"><svg class="railroad" viewbox="0 0 327 118" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%" />
<g class="verticalgrid">
<a class="link" xlink:href="macros-by-example.html#grammar-MacroRepSep">
<text class="comment" x="53" y="25">
MacroRepSep</text>
</a>
<g class="sequence">
<path d=" M 10 89 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5" />
<g class="labeledbox">
<rect height="66" width="257" x="35" y="42" />
<path d=" M 35 89 h 8 m 60 0 h 189 m -91 0 l -5 -5 m 0 10 l 5 -5 m 91 0" />
<text class="comment" x="163" y="65">
except delimiters and MacroRepOp</text>
<a class="link" xlink:href="tokens.html#railroad-Token">
<g class="nonterminal">
<rect height="22" width="60" x="43" y="78" />
<text x="73" y="94">
Token</text>
</g>
</a>
</g>
<path d=" M 302 89 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5" />
<path d=" M 25 89 h 10" />
<path d=" M 292 89 h 10" />
</g>
</g>
</svg>
</div>

<div style="width: 146px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-MacroRepOp"><svg class="railroad" viewbox="0 0 146 140" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%" />
<g class="verticalgrid">
<a class="link" xlink:href="macros-by-example.html#grammar-MacroRepOp">
<text class="comment" x="50" y="25">
MacroRepOp</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5" />
<g class="choice">
<path d=" M 35 53 h 24 m 28 0 h 24" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="42" />
<text x="73" y="58">
*</text>
</g>
<path d=" M 35 53 a 12 12 0 0 1 12 12 v 9 m 52 0 v -9 a 12 12 0 0 1 12 -12" />
<path d=" M 47 74 v 33 m 52 0 v -33" />
<path d=" M 47 74 v 0 a 12 12 0 0 0 12 12 m 28 0 h 0 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="75" />
<text x="73" y="91">
+</text>
</g>
<path d=" M 47 107 v 0 a 12 12 0 0 0 12 12 m 28 0 h 0 a 12 12 0 0 0 12 -12 v 0" />
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="59" y="108" />
<text x="73" y="124">
?</text>
</g>
</g>
<path d=" M 121 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5" />
<path d=" M 25 53 h 10" />
<path d=" M 111 53 h 10" />
</g>
</g>
</svg>
</div>

<div style="width: 202px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-MacroTranscriber"><svg class="railroad" viewbox="0 0 202 74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect class="railroad_canvas" height="100%" width="100%" />
<g class="verticalgrid">
<a class="link" xlink:href="macros-by-example.html#grammar-MacroTranscriber">
<text class="comment" x="71" y="25">
MacroTranscriber</text>
</a>
<g class="sequence">
<path d=" M 10 53 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5 m 10 0 h 5" />
<a class="link" xlink:href="macros.html#railroad-DelimTokenTree">
<g class="nonterminal">
<rect height="22" width="132" x="35" y="42" />
<text x="101" y="58">
DelimTokenTree</text>
</g>
</a>
<path d=" M 177 53 h 5 a 5 5 0 0 1 5 -5 a 5 5 0 0 1 5 5 a 5 5 0 0 1 -5 5 a 5 5 0 0 1 -5 -5" />
<path d=" M 25 53 h 10" />
<path d=" M 167 53 h 10" />
</g>
</g>
</svg>
</div>

</div>

<div class="rule" id="r-macro.decl.intro"><a class="rule-link" href="#r-macro.decl.intro" title="macro.decl.intro"><span>[macro<wbr>.decl<wbr>.intro]</span></a>
</div>

<p><code>macro_rules</code> allows users to define syntax extension in a declarative way.  We
call such extensions “macros by example” or simply “macros”.</p>
<p>Each macro by example has a name, and one or more <em>rules</em>. Each rule has two
parts: a <em>matcher</em>, describing the syntax that it matches, and a <em>transcriber</em>,
describing the syntax that will replace a successfully matched invocation. Both
the matcher and the transcriber must be surrounded by delimiters. Macros can
expand to expressions, statements, items (including traits, impls, and foreign
items), types, or patterns.</p>
<div class="rule" id="r-macro.decl.transcription"><a class="rule-link" href="#r-macro.decl.transcription" title="macro.decl.transcription"><span>[macro<wbr>.decl<wbr>.transcription]</span></a>
</div>

<h2 id="transcribing"><a class="header" href="#transcribing">Transcribing</a></h2>
<div class="rule" id="r-macro.decl.transcription.intro"><a class="rule-link" href="#r-macro.decl.transcription.intro" title="macro.decl.transcription.intro"><span>[macro<wbr>.decl<wbr>.transcription<wbr>.intro]</span></a>
</div>

<p>When a macro is invoked, the macro expander looks up macro invocations by name,
and tries each macro rule in turn. It transcribes the first successful match; if
this results in an error, then future matches are not tried.</p>
<div class="rule" id="r-macro.decl.transcription.lookahead"><a class="rule-link" href="#r-macro.decl.transcription.lookahead" title="macro.decl.transcription.lookahead"><span>[macro<wbr>.decl<wbr>.transcription<wbr>.lookahead]</span></a>
</div>

<p>When matching, no lookahead is performed; if the compiler cannot unambiguously determine how to
parse the macro invocation one token at a time, then it is an error. In the
following example, the compiler does not look ahead past the identifier to see
if the following token is a <code>)</code>, even though that would allow it to parse the
invocation unambiguously:</p>
<pre class="playground"><code class="language-rust compile_fail edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>macro_rules! ambiguity {
    ($($i:ident)* $j:ident) =&gt; { };
}

ambiguity!(error); // Error: local ambiguity
<span class="boring">}</span></code></pre>
<div class="rule" id="r-macro.decl.transcription.syntax"><a class="rule-link" href="#r-macro.decl.transcription.syntax" title="macro.decl.transcription.syntax"><span>[macro<wbr>.decl<wbr>.transcription<wbr>.syntax]</span></a>
</div>

<p>In both the matcher and the transcriber, the <code>$</code> token is used to invoke special
behaviours from the macro engine (described below in <a href="#metavariables">Metavariables</a> and
<a href="#repetitions">Repetitions</a>). Tokens that aren’t part of such an invocation are matched and
transcribed literally, with one exception. The exception is that the outer
delimiters for the matcher will match any pair of delimiters. Thus, for
instance, the matcher <code>(())</code> will match <code>{()}</code> but not <code>{{}}</code>. The character
<code>$</code> cannot be matched or transcribed literally.</p>
<div class="rule" id="r-macro.decl.transcription.fragment"><a class="rule-link" href="#r-macro.decl.transcription.fragment" title="macro.decl.transcription.fragment"><span>[macro<wbr>.decl<wbr>.transcription<wbr>.fragment]</span></a>
</div>

<h3 id="forwarding-a-matched-fragment"><a class="header" href="#forwarding-a-matched-fragment">Forwarding a matched fragment</a></h3>
<p>When forwarding a matched fragment to another macro-by-example, matchers in
the second macro will see an opaque AST of the fragment type. The second macro
can’t use literal tokens to match the fragments in the matcher, only a
fragment specifier of the same type. The <code>ident</code>, <code>lifetime</code>, and <code>tt</code>
fragment types are an exception, and <em>can</em> be matched by literal tokens. The
following illustrates this restriction:</p>
<pre class="playground"><code class="language-rust compile_fail edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>macro_rules! foo {
    ($l:expr) =&gt; { bar!($l); }
// ERROR:               ^^ no rules expected this token in macro call
}

macro_rules! bar {
    (3) =&gt; {}
}

foo!(3);
<span class="boring">}</span></code></pre>
<p>The following illustrates how tokens can be directly matched after matching a
<code>tt</code> fragment:</p>
<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// compiles OK
macro_rules! foo {
    ($l:tt) =&gt; { bar!($l); }
}

macro_rules! bar {
    (3) =&gt; {}
}

foo!(3);
<span class="boring">}</span></code></pre>
<div class="rule" id="r-macro.decl.meta"><a class="rule-link" href="#r-macro.decl.meta" title="macro.decl.meta"><span>[macro<wbr>.decl<wbr>.meta]</span></a>
</div>

<h2 id="metavariables"><a class="header" href="#metavariables">Metavariables</a></h2>
<div class="rule" id="r-macro.decl.meta.intro"><a class="rule-link" href="#r-macro.decl.meta.intro" title="macro.decl.meta.intro"><span>[macro<wbr>.decl<wbr>.meta<wbr>.intro]</span></a>
</div>

<p>In the matcher, <code>$</code> <em>name</em> <code>:</code> <em>fragment-specifier</em> matches a Rust syntax
fragment of the kind specified and binds it to the metavariable <code>$</code><em>name</em>.</p>
<div class="rule" id="r-macro.decl.meta.specifier"><a class="rule-link" href="#r-macro.decl.meta.specifier" title="macro.decl.meta.specifier"><span>[macro<wbr>.decl<wbr>.meta<wbr>.specifier]</span></a>
</div>

<p>Valid fragment specifiers are:</p>
<ul>
<li><code>block</code>: a <a href="expressions/block-expr.html#grammar-BlockExpression">BlockExpression</a></li>
<li><code>expr</code>: an <a href="expressions.html#grammar-Expression">Expression</a></li>
<li><code>expr_2021</code>: an <a href="expressions.html#grammar-Expression">Expression</a> except <a href="expressions/underscore-expr.html#grammar-UnderscoreExpression">UnderscoreExpression</a> and <a href="expressions/block-expr.html#grammar-ConstBlockExpression">ConstBlockExpression</a> (see <a href="macros-by-example.html#r-macro.decl.meta.edition2024">macro.decl.meta.edition2024</a>)</li>
<li><code>ident</code>: an <a href="identifiers.html#grammar-IDENTIFIER_OR_KEYWORD">IDENTIFIER_OR_KEYWORD</a> except <code>_</code>, <a href="identifiers.html#grammar-RAW_IDENTIFIER">RAW_IDENTIFIER</a>, or <a href="macros-by-example.html#r-macro.decl.hygiene.crate"><code>$crate</code></a></li>
<li><code>item</code>: an <a href="items.html#grammar-Item">Item</a></li>
<li><code>lifetime</code>: a <a href="tokens.html#grammar-LIFETIME_TOKEN">LIFETIME_TOKEN</a></li>
<li><code>literal</code>: matches <code>-</code><sup>?</sup><a href="expressions/literal-expr.html#grammar-LiteralExpression">LiteralExpression</a></li>
<li><code>meta</code>: an <a href="attributes.html#grammar-Attr">Attr</a>, the contents of an attribute</li>
<li><code>pat</code>: a <a href="patterns.html#grammar-Pattern">Pattern</a> (see <a href="macros-by-example.html#r-macro.decl.meta.edition2021">macro.decl.meta.edition2021</a>)</li>
<li><code>pat_param</code>: a <a href="patterns.html#grammar-PatternNoTopAlt">PatternNoTopAlt</a></li>
<li><code>path</code>: a <a href="paths.html#grammar-TypePath">TypePath</a> style path</li>
<li><code>stmt</code>: a <a href="statements.html#grammar-Statement">Statement</a> without the trailing semicolon (except for item statements that require semicolons)</li>
<li><code>tt</code>: a <a href="macros.html#grammar-TokenTree">TokenTree</a> (a single <a href="tokens.html">token</a> or tokens in matching delimiters <code>()</code>, <code>[]</code>, or <code>{}</code>)</li>
<li><code>ty</code>: a <a href="types.html#grammar-Type">Type</a></li>
<li><code>vis</code>: a possibly empty <a href="visibility-and-privacy.html#grammar-Visibility">Visibility</a> qualifier</li>
</ul>
<div class="rule" id="r-macro.decl.meta.transcription"><a class="rule-link" href="#r-macro.decl.meta.transcription" title="macro.decl.meta.transcription"><span>[macro<wbr>.decl<wbr>.meta<wbr>.transcription]</span></a>
</div>

<p>In the transcriber, metavariables are referred to simply by <code>$</code><em>name</em>, since
the fragment kind is specified in the matcher. Metavariables are replaced with
the syntax element that matched them.
Metavariables can be transcribed more than once or not at all.</p>
<div class="rule" id="r-macro.decl.meta.dollar-crate"><a class="rule-link" href="#r-macro.decl.meta.dollar-crate" title="macro.decl.meta.dollar-crate"><span>[macro<wbr>.decl<wbr>.meta<wbr>.dollar-crate]</span></a>
</div>

<p>The keyword metavariable <a href="macros-by-example.html#r-macro.decl.hygiene.crate"><code>$crate</code></a> can be used to refer to the current crate.</p>
<div class="rule" id="r-macro.decl.meta.edition2021"><a class="rule-link" href="#r-macro.decl.meta.edition2021" title="macro.decl.meta.edition2021"><span>[macro<wbr>.decl<wbr>.meta<wbr>.edition2021]</span></a>
</div>

<div class="alert alert-edition">
<blockquote>
<p class="alert-title"><span class="alert-title-edition">2021</span> Edition differences</p>

<p>Starting with the 2021 edition, <code>pat</code> fragment-specifiers match top-level or-patterns (that is, they accept <a href="patterns.html#grammar-Pattern">Pattern</a>).</p>
<p>Before the 2021 edition, they match exactly the same fragments as <code>pat_param</code> (that is, they accept <a href="patterns.html#grammar-PatternNoTopAlt">PatternNoTopAlt</a>).</p>
<p>The relevant edition is the one in effect for the <code>macro_rules!</code> definition.</p>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.meta.edition2024"><a class="rule-link" href="#r-macro.decl.meta.edition2024" title="macro.decl.meta.edition2024"><span>[macro<wbr>.decl<wbr>.meta<wbr>.edition2024]</span></a>
</div>

<div class="alert alert-edition">
<blockquote>
<p class="alert-title"><span class="alert-title-edition">2024</span> Edition differences</p>

<p>Before the 2024 edition, <code>expr</code> fragment specifiers do not match <a href="expressions/underscore-expr.html#grammar-UnderscoreExpression">UnderscoreExpression</a> or <a href="expressions/block-expr.html#grammar-ConstBlockExpression">ConstBlockExpression</a> at the top level. They are allowed within subexpressions.</p>
<p>The <code>expr_2021</code> fragment specifier exists to maintain backwards compatibility with editions before 2024.</p>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.repetition"><a class="rule-link" href="#r-macro.decl.repetition" title="macro.decl.repetition"><span>[macro<wbr>.decl<wbr>.repetition]</span></a>
</div>

<h2 id="repetitions"><a class="header" href="#repetitions">Repetitions</a></h2>
<div class="rule" id="r-macro.decl.repetition.intro"><a class="rule-link" href="#r-macro.decl.repetition.intro" title="macro.decl.repetition.intro"><span>[macro<wbr>.decl<wbr>.repetition<wbr>.intro]</span></a>
</div>

<p>In both the matcher and transcriber, repetitions are indicated by placing the
tokens to be repeated inside <code>$(</code>…<code>)</code>, followed by a repetition operator,
optionally with a separator token between.</p>
<div class="rule" id="r-macro.decl.repetition.separator"><a class="rule-link" href="#r-macro.decl.repetition.separator" title="macro.decl.repetition.separator"><span>[macro<wbr>.decl<wbr>.repetition<wbr>.separator]</span></a>
</div>

<p>The separator token can be any token
other than a delimiter or one of the repetition operators, but <code>;</code> and <code>,</code> are
the most common. For instance, <code>$( $i:ident ),*</code> represents any number of
identifiers separated by commas. Nested repetitions are permitted.</p>
<div class="rule" id="r-macro.decl.repetition.operators"><a class="rule-link" href="#r-macro.decl.repetition.operators" title="macro.decl.repetition.operators"><span>[macro<wbr>.decl<wbr>.repetition<wbr>.operators]</span></a>
</div>

<p>The repetition operators are:</p>
<ul>
<li><code>*</code> — indicates any number of repetitions.</li>
<li><code>+</code> — indicates any number but at least one.</li>
<li><code>?</code> — indicates an optional fragment with zero or one occurrence.</li>
</ul>
<div class="rule" id="r-macro.decl.repetition.optional-restriction"><a class="rule-link" href="#r-macro.decl.repetition.optional-restriction" title="macro.decl.repetition.optional-restriction"><span>[macro<wbr>.decl<wbr>.repetition<wbr>.optional-restriction]</span></a>
</div>

<p>Since <code>?</code> represents at most one occurrence, it cannot be used with a
separator.</p>
<div class="rule" id="r-macro.decl.repetition.fragment"><a class="rule-link" href="#r-macro.decl.repetition.fragment" title="macro.decl.repetition.fragment"><span>[macro<wbr>.decl<wbr>.repetition<wbr>.fragment]</span></a>
</div>

<p>The repeated fragment both matches and transcribes to the specified number of
the fragment, separated by the separator token. Metavariables are matched to
every repetition of their corresponding fragment. For instance, the <code>$( $i:ident ),*</code> example above matches <code>$i</code> to all of the identifiers in the list.</p>
<p>During transcription, additional restrictions apply to repetitions so that the
compiler knows how to expand them properly:</p>
<ol>
<li>A metavariable must appear in exactly the same number, kind, and nesting
order of repetitions in the transcriber as it did in the matcher. So for the
matcher <code>$( $i:ident ),*</code>, the transcribers <code>=&gt; { $i }</code>,
<code>=&gt; { $( $( $i )* )* }</code>, and <code>=&gt; { $( $i )+ }</code> are all illegal, but
<code>=&gt; { $( $i );* }</code> is correct and replaces a comma-separated list of
identifiers with a semicolon-separated list.</li>
<li>Each repetition in the transcriber must contain at least one metavariable to
decide how many times to expand it. If multiple metavariables appear in the
same repetition, they must be bound to the same number of fragments. For
instance, <code>( $( $i:ident ),* ; $( $j:ident ),* ) =&gt; (( $( ($i,$j) ),* ))</code> must
bind the same number of <code>$i</code> fragments as <code>$j</code> fragments. This means that
invoking the macro with <code>(a, b, c; d, e, f)</code> is legal and expands to
<code>((a,d), (b,e), (c,f))</code>, but <code>(a, b, c; d, e)</code> is illegal because it does
not have the same number. This requirement applies to every layer of nested
repetitions.</li>
</ol>
<div class="rule" id="r-macro.decl.scope"><a class="rule-link" href="#r-macro.decl.scope" title="macro.decl.scope"><span>[macro<wbr>.decl<wbr>.scope]</span></a>
</div>

<h2 id="scoping-exporting-and-importing"><a class="header" href="#scoping-exporting-and-importing">Scoping, exporting, and importing</a></h2>
<div class="rule" id="r-macro.decl.scope.intro"><a class="rule-link" href="#r-macro.decl.scope.intro" title="macro.decl.scope.intro"><span>[macro<wbr>.decl<wbr>.scope<wbr>.intro]</span></a>
</div>

<p>For historical reasons, the scoping of macros by example does not work entirely
like items. Macros have two forms of scope: textual scope, and path-based scope.
Textual scope is based on the order that things appear in source files, or even
across multiple files, and is the default scoping. It is explained further below.
Path-based scope works exactly the same way that item scoping does. The scoping,
exporting, and importing of macros is controlled largely by attributes.</p>
<div class="rule" id="r-macro.decl.scope.unqualified"><a class="rule-link" href="#r-macro.decl.scope.unqualified" title="macro.decl.scope.unqualified"><span>[macro<wbr>.decl<wbr>.scope<wbr>.unqualified]</span></a>
</div>

<p>When a macro is invoked by an unqualified identifier (not part of a multi-part
path), it is first looked up in textual scoping. If this does not yield any
results, then it is looked up in path-based scoping. If the macro’s name is
qualified with a path, then it is only looked up in path-based scoping.</p>
<!-- ignore: requires external crates -->
<pre><code class="language-rust ignore">use lazy_static::lazy_static; // Path-based import.

macro_rules! lazy_static { // Textual definition.
    (lazy) =&gt; {};
}

lazy_static!{lazy} // Textual lookup finds our macro first.
self::lazy_static!{} // Path-based lookup ignores our macro, finds imported one.</code></pre>
<div class="rule" id="r-macro.decl.scope.textual"><a class="rule-link" href="#r-macro.decl.scope.textual" title="macro.decl.scope.textual"><span>[macro<wbr>.decl<wbr>.scope<wbr>.textual]</span></a>
</div>

<h3 id="textual-scope"><a class="header" href="#textual-scope">Textual scope</a></h3>
<div class="rule" id="r-macro.decl.scope.textual.intro"><a class="rule-link" href="#r-macro.decl.scope.textual.intro" title="macro.decl.scope.textual.intro"><span>[macro<wbr>.decl<wbr>.scope<wbr>.textual<wbr>.intro]</span></a>
</div>

<p>Textual scope is based largely on the order that things appear in source files,
and works similarly to the scope of local variables declared with <code>let</code> except
it also applies at the module level. When <code>macro_rules!</code> is used to define a
macro, the macro enters the scope after the definition (note that it can still
be used recursively, since names are looked up from the invocation site), up
until its surrounding scope, typically a module, is closed. This can enter child
modules and even span across multiple files:</p>
<!-- ignore: requires external modules -->
<pre><code class="language-rust ignore">//// src/lib.rs
mod has_macro {
    // m!{} // Error: m is not in scope.

    macro_rules! m {
        () =&gt; {};
    }
    m!{} // OK: appears after declaration of m.

    mod uses_macro;
}

// m!{} // Error: m is not in scope.

//// src/has_macro/uses_macro.rs

m!{} // OK: appears after declaration of m in src/lib.rs</code></pre>
<div class="rule" id="r-macro.decl.scope.textual.shadow"><a class="rule-link" href="#r-macro.decl.scope.textual.shadow" title="macro.decl.scope.textual.shadow"><span>[macro<wbr>.decl<wbr>.scope<wbr>.textual<wbr>.shadow]</span></a>
</div>

<p>It is not an error to define a macro multiple times; the most recent declaration
will shadow the previous one unless it has gone out of scope.</p>
<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>macro_rules! m {
    (1) =&gt; {};
}

m!(1);

mod inner {
    m!(1);

    macro_rules! m {
        (2) =&gt; {};
    }
    // m!(1); // Error: no rule matches '1'
    m!(2);

    macro_rules! m {
        (3) =&gt; {};
    }
    m!(3);
}

m!(1);
<span class="boring">}</span></code></pre>
<p>Macros can be declared and used locally inside functions as well, and work
similarly:</p>
<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn foo() {
    // m!(); // Error: m is not in scope.
    macro_rules! m {
        () =&gt; {};
    }
    m!();
}

// m!(); // Error: m is not in scope.
<span class="boring">}</span></code></pre>
<div class="rule" id="r-macro.decl.scope.textual.shadow.path-based"><a class="rule-link" href="#r-macro.decl.scope.textual.shadow.path-based" title="macro.decl.scope.textual.shadow.path-based"><span>[macro<wbr>.decl<wbr>.scope<wbr>.textual<wbr>.shadow<wbr>.path-based]</span></a>
</div>

<p>Textual scope name bindings for macros shadow path-based scope bindings to macros.</p>
<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>macro_rules! m2 {
    () =&gt; {
        println!("m2");
    };
}

// Resolves to path-based candidate from use declaration below.
m!(); // prints "m2\n"

// Introduce second candidate for `m` with textual scope.
//
// This shadows path-based candidate from below for the rest of this
// example.
macro_rules! m {
    () =&gt; {
        println!("m");
    };
}

// Introduce `m2` macro as path-based candidate.
//
// This item is in scope for this entire example, not just below the
// use declaration.
use m2 as m;

// Resolves to the textual macro candidate from above the use
// declaration.
m!(); // prints "m\n"
<span class="boring">}</span></code></pre>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>

<p>For areas where shadowing is not allowed, see <a href="names/name-resolution.html#r-names.resolution.expansion.imports.ambiguity">name resolution ambiguities</a>.</p>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.scope.path-based"><a class="rule-link" href="#r-macro.decl.scope.path-based" title="macro.decl.scope.path-based"><span>[macro<wbr>.decl<wbr>.scope<wbr>.path-based]</span></a>
</div>

<h3 id="path-based-scope"><a class="header" href="#path-based-scope">Path-based scope</a></h3>
<div class="rule" id="r-macro.decl.scope.path-based.intro"><a class="rule-link" href="#r-macro.decl.scope.path-based.intro" title="macro.decl.scope.path-based.intro"><span>[macro<wbr>.decl<wbr>.scope<wbr>.path-based<wbr>.intro]</span></a>
</div>

<p>By default, a macro has no path-based scope. Macros can gain path-based scope in two ways:</p>
<ul>
<li><a href="items/use-declarations.html#use-visibility">Use declaration re-export</a></li>
<li><a href="#the-macro_export-attribute"><code>macro_export</code></a></li>
</ul>
<div class="rule" id="r-macro.decl.scope.path.reexport"><a class="rule-link" href="#r-macro.decl.scope.path.reexport" title="macro.decl.scope.path.reexport"><span>[macro<wbr>.decl<wbr>.scope<wbr>.path<wbr>.reexport]</span></a>
</div>

<p>Macros can be re-exported to give them path-based scope from a module other than the crate root.</p>
<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>mac::m!(); // OK: Path-based lookup finds `m` in the mac module.

mod mac {
    // Introduce macro `m` with textual scope.
    macro_rules! m {
        () =&gt; {};
    }

    // Reexport with path-based scope from within `m`'s textual scope.
    pub(crate) use m;
}
<span class="boring">}</span></code></pre>
<div class="rule" id="r-macro.decl.scope.path-based.visibility"><a class="rule-link" href="#r-macro.decl.scope.path-based.visibility" title="macro.decl.scope.path-based.visibility"><span>[macro<wbr>.decl<wbr>.scope<wbr>.path-based<wbr>.visibility]</span></a>
</div>

<p>Macros have an implicit visibility of <code>pub(crate)</code>. <code>#[macro_export]</code> changes the implicit visibility to <code>pub</code>.</p>
<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Implicit visibility is `pub(crate)`.
macro_rules! private_m {
    () =&gt; {};
}

// Implicit visibility is `pub`.
#[macro_export]
macro_rules! pub_m {
    () =&gt; {};
}

pub(crate) use private_m as private_macro; // OK.
pub use pub_m as pub_macro; // OK.
<span class="boring">}</span></code></pre>
<pre class="playground"><code class="language-rust compile_fail E0364 edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">// Implicit visibility is `pub(crate)`.
</span><span class="boring">macro_rules! private_m {
</span><span class="boring">    () =&gt; {};
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">// Implicit visibility is `pub`.
</span><span class="boring">#[macro_export]
</span><span class="boring">macro_rules! pub_m {
</span><span class="boring">    () =&gt; {};
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">pub(crate) use private_m as private_macro; // OK.
</span><span class="boring">pub use pub_m as pub_macro; // OK.
</span><span class="boring">
</span>pub use private_m; // ERROR: `private_m` is only public within
                   // the crate and cannot be re-exported outside.
<span class="boring">}</span></code></pre>
<!-- template:attributes -->
<div class="rule" id="r-macro.decl.scope.macro_use"><a class="rule-link" href="#r-macro.decl.scope.macro_use" title="macro.decl.scope.macro_use"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_use]</span></a>
</div>

<h3 id="the-macro_use-attribute"><a class="header" href="#the-macro_use-attribute">The <code>macro_use</code> attribute</a></h3>
<div class="rule" id="r-macro.decl.scope.macro_use.intro"><a class="rule-link" href="#r-macro.decl.scope.macro_use.intro" title="macro.decl.scope.macro_use.intro"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_use<wbr>.intro]</span></a>
</div>

<p>The <em><code>macro_use</code> <a href="attributes.html#r-attributes">attribute</a></em> has two purposes: it may be used on modules to extend the scope of macros defined within them, and it may be used on <a href="items/extern-crates.html#r-items.extern-crate"><code>extern crate</code></a> to import macros from another crate into the <a href="names/preludes.html#macro_use-prelude"><code>macro_use</code> prelude</a>.</p>
<div class="alert alert-example">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p>

<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[macro_use]
mod inner {
    macro_rules! m {
        () =&gt; {};
    }
}
m!();
<span class="boring">}</span></code></pre>
<pre><code class="language-rust ignore">#[macro_use]
extern crate log;</code></pre>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.scope.macro_use.syntax"><a class="rule-link" href="#r-macro.decl.scope.macro_use.syntax" title="macro.decl.scope.macro_use.syntax"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_use<wbr>.syntax]</span></a>
</div>

<p>When used on modules, the <code>macro_use</code> attribute uses the <a href="attributes.html#grammar-MetaWord">MetaWord</a> syntax.</p>
<p>When used on <code>extern crate</code>, it uses the <a href="attributes.html#grammar-MetaWord">MetaWord</a> and <a href="attributes.html#grammar-MetaListIdents">MetaListIdents</a> syntaxes. For more on how these syntaxes may be used, see <a href="macros-by-example.html#r-macro.decl.scope.macro_use.prelude">macro.decl.scope.macro_use.prelude</a>.</p>
<div class="rule" id="r-macro.decl.scope.macro_use.allowed-positions"><a class="rule-link" href="#r-macro.decl.scope.macro_use.allowed-positions" title="macro.decl.scope.macro_use.allowed-positions"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_use<wbr>.allowed-positions]</span></a>
</div>

<p>The <code>macro_use</code> attribute may be applied to modules or <code>extern crate</code>.</p>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>

<p><code>rustc</code> ignores use in other positions but lints against it. This may become an error in the future.</p>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.scope.macro_use.extern-crate-self"><a class="rule-link" href="#r-macro.decl.scope.macro_use.extern-crate-self" title="macro.decl.scope.macro_use.extern-crate-self"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_use<wbr>.extern-crate-self]</span></a>
</div>

<p>The <code>macro_use</code> attribute may not be used on <a href="items/extern-crates.html#r-items.extern-crate.self"><code>extern crate self</code></a>.</p>
<div class="rule" id="r-macro.decl.scope.macro_use.duplicates"><a class="rule-link" href="#r-macro.decl.scope.macro_use.duplicates" title="macro.decl.scope.macro_use.duplicates"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_use<wbr>.duplicates]</span></a>
</div>

<p>The <code>macro_use</code> attribute may be used any number of times on a form.</p>
<p>Multiple instances of <code>macro_use</code> in the <a href="attributes.html#grammar-MetaListIdents">MetaListIdents</a> syntax may be specified. The union of all specified macros will be imported.</p>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>

<p>On modules, <code>rustc</code> lints against any <a href="attributes.html#grammar-MetaWord">MetaWord</a> <code>macro_use</code> attributes following the first.</p>
<p>On <code>extern crate</code>, <code>rustc</code> lints against any <code>macro_use</code> attributes that have no effect due to not importing any macros not already imported by another <code>macro_use</code> attribute. If two or more <a href="attributes.html#grammar-MetaListIdents">MetaListIdents</a> <code>macro_use</code> attributes import the same macro, the first is linted against. If any <a href="attributes.html#grammar-MetaWord">MetaWord</a> <code>macro_use</code> attributes are present, all <a href="attributes.html#grammar-MetaListIdents">MetaListIdents</a> <code>macro_use</code> attributes are linted against. If two or more <a href="attributes.html#grammar-MetaWord">MetaWord</a> <code>macro_use</code> attributes are present, the ones following the first are linted against.</p>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.scope.macro_use.mod-decl"><a class="rule-link" href="#r-macro.decl.scope.macro_use.mod-decl" title="macro.decl.scope.macro_use.mod-decl"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_use<wbr>.mod-decl]</span></a>
</div>

<p>When <code>macro_use</code> is used on a module, the module’s macro scope extends beyond the module’s lexical scope.</p>
<div class="alert alert-example">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p>

<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[macro_use]
mod inner {
    macro_rules! m {
        () =&gt; {};
    }
}
m!(); // OK
<span class="boring">}</span></code></pre>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.scope.macro_use.prelude"><a class="rule-link" href="#r-macro.decl.scope.macro_use.prelude" title="macro.decl.scope.macro_use.prelude"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_use<wbr>.prelude]</span></a>
</div>

<p>Specifying <code>macro_use</code> on an <code>extern crate</code> declaration in the crate root imports exported macros from that crate.</p>
<p>Macros imported this way are imported into the <a href="names/preludes.html#macro_use-prelude"><code>macro_use</code> prelude</a>, not textually, which means that they can be shadowed by any other name. Macros imported by <code>macro_use</code> can be used before the import statement.</p>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>

<p><code>rustc</code> currently prefers the last macro imported in case of conflict. Don’t rely on this. This behavior is unusual, as imports in Rust are generally order-independent. This behavior of <code>macro_use</code> may change in the future.</p>
<p>For details, see <a href="https://github.com/rust-lang/rust/issues/148025">Rust issue #148025</a>.</p>
</blockquote>
</div>

<p>When using the <a href="attributes.html#grammar-MetaWord">MetaWord</a> syntax, all exported macros are imported. When using the <a href="attributes.html#grammar-MetaListIdents">MetaListIdents</a> syntax, only the specified macros are imported.</p>
<div class="alert alert-example">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p>

<!-- ignore: requires external crates -->
<pre><code class="language-rust ignore">#[macro_use(lazy_static)] // Or `#[macro_use]` to import all macros.
extern crate lazy_static;

lazy_static!{}
// self::lazy_static!{} // ERROR: lazy_static is not defined in `self`.</code></pre>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.scope.macro_use.export"><a class="rule-link" href="#r-macro.decl.scope.macro_use.export" title="macro.decl.scope.macro_use.export"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_use<wbr>.export]</span></a>
</div>

<p>Macros to be imported with <code>macro_use</code> must be exported with <a href="macros-by-example.html#r-macro.decl.scope.macro_export"><code>macro_export</code></a>.</p>
<!-- template:attributes -->
<div class="rule" id="r-macro.decl.scope.macro_export"><a class="rule-link" href="#r-macro.decl.scope.macro_export" title="macro.decl.scope.macro_export"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_export]</span></a>
</div>

<h3 id="the-macro_export-attribute"><a class="header" href="#the-macro_export-attribute">The <code>macro_export</code> attribute</a></h3>
<div class="rule" id="r-macro.decl.scope.macro_export.intro"><a class="rule-link" href="#r-macro.decl.scope.macro_export.intro" title="macro.decl.scope.macro_export.intro"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_export<wbr>.intro]</span></a>
</div>

<p>The <em><code>macro_export</code> <a href="attributes.html#r-attributes">attribute</a></em> exports the macro from the crate and makes it available in the root of the crate for path-based resolution.</p>
<div class="alert alert-example">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p>

<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>self::m!();
//  ^^^^ OK: Path-based lookup finds `m` in the current module.
m!(); // As above.

mod inner {
    super::m!();
    crate::m!();
}

mod mac {
    #[macro_export]
    macro_rules! m {
        () =&gt; {};
    }
}
<span class="boring">}</span></code></pre>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.scope.macro_export.syntax"><a class="rule-link" href="#r-macro.decl.scope.macro_export.syntax" title="macro.decl.scope.macro_export.syntax"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_export<wbr>.syntax]</span></a>
</div>

<p>The <code>macro_export</code> attribute uses the <a href="attributes.html#grammar-MetaWord">MetaWord</a> and <a href="attributes.html#grammar-MetaListIdents">MetaListIdents</a> syntaxes. With the <a href="attributes.html#grammar-MetaListIdents">MetaListIdents</a> syntax, it accepts a single <a href="macros-by-example.html#r-macro.decl.scope.macro_export.local_inner_macros"><code>local_inner_macros</code></a> value.</p>
<div class="rule" id="r-macro.decl.scope.macro_export.allowed-positions"><a class="rule-link" href="#r-macro.decl.scope.macro_export.allowed-positions" title="macro.decl.scope.macro_export.allowed-positions"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_export<wbr>.allowed-positions]</span></a>
</div>

<p>The <code>macro_export</code> attribute may be applied to <code>macro_rules</code> definitions.</p>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>

<p><code>rustc</code> ignores use in other positions but lints against it. This may become an error in the future.</p>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.scope.macro_export.duplicates"><a class="rule-link" href="#r-macro.decl.scope.macro_export.duplicates" title="macro.decl.scope.macro_export.duplicates"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_export<wbr>.duplicates]</span></a>
</div>

<p>Only the first use of <code>macro_export</code> on a macro has effect.</p>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>

<p><code>rustc</code> lints against any use following the first.</p>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.scope.macro_export.path-based"><a class="rule-link" href="#r-macro.decl.scope.macro_export.path-based" title="macro.decl.scope.macro_export.path-based"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_export<wbr>.path-based]</span></a>
</div>

<p>By default, macros only have <a href="macros-by-example.html#r-macro.decl.scope.textual">textual scope</a> and cannot be resolved by path. When the <code>macro_export</code> attribute is used, the macro is made available in the crate root and can be referred to by its path.</p>
<div class="alert alert-example">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p>

<p>Without <code>macro_export</code>, macros only have textual scope, so path-based resolution of the macro fails.</p>
<pre class="playground"><code class="language-rust compile_fail E0433 edition2024">macro_rules! m {
    () =&gt; {};
}
self::m!(); // ERROR
crate::m!(); // ERROR
<span class="boring">fn main() {}</span></code></pre>
<p>With <code>macro_export</code>, path-based resolution works.</p>
<pre class="playground"><code class="language-rust edition2024">#[macro_export]
macro_rules! m {
    () =&gt; {};
}
self::m!(); // OK
crate::m!(); // OK
<span class="boring">fn main() {}</span></code></pre>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.scope.macro_export.export"><a class="rule-link" href="#r-macro.decl.scope.macro_export.export" title="macro.decl.scope.macro_export.export"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_export<wbr>.export]</span></a>
</div>

<p>The <code>macro_export</code> attribute causes a macro to be exported from the crate root so that it can be referred to in other crates by path.</p>
<div class="alert alert-example">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p>

<p>Given the following in a <code>log</code> crate:</p>
<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[macro_export]
macro_rules! warn {
    ($message:expr) =&gt; { eprintln!("WARN: {}", $message) };
}
<span class="boring">}</span></code></pre>
<p>From another crate, you can refer to the macro by path:</p>
<!-- ignore: requires external crates -->
<pre><code class="language-rust ignore">fn main() {
    log::warn!("example warning");
}</code></pre>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.scope.macro_export.macro_use"><a class="rule-link" href="#r-macro.decl.scope.macro_export.macro_use" title="macro.decl.scope.macro_export.macro_use"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_export<wbr>.macro_use]</span></a>
</div>

<p><code>macro_export</code> allows the use of <a href="macros-by-example.html#r-macro.decl.scope.macro_use"><code>macro_use</code></a> on an <code>extern crate</code> to import the macro into the <a href="names/preludes.html#macro_use-prelude"><code>macro_use</code> prelude</a>.</p>
<div class="alert alert-example">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p>

<p>Given the following in a <code>log</code> crate:</p>
<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[macro_export]
macro_rules! warn {
    ($message:expr) =&gt; { eprintln!("WARN: {}", $message) };
}
<span class="boring">}</span></code></pre>
<p>Using <code>macro_use</code> in a dependent crate allows you to use the macro from the prelude:</p>
<!-- ignore: requires external crates -->
<pre><code class="language-rust ignore">#[macro_use]
extern crate log;

pub mod util {
    pub fn do_thing() {
        // Resolved via macro prelude.
        warn!("example warning");
    }
}</code></pre>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.scope.macro_export.local_inner_macros"><a class="rule-link" href="#r-macro.decl.scope.macro_export.local_inner_macros" title="macro.decl.scope.macro_export.local_inner_macros"><span>[macro<wbr>.decl<wbr>.scope<wbr>.macro_export<wbr>.local_inner_macros]</span></a>
</div>

<p>Adding <code>local_inner_macros</code> to the <code>macro_export</code> attribute causes all single-segment macro invocations in the macro definition to have an implicit <code>$crate::</code> prefix.</p>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>

<p>This is intended primarily as a tool to migrate code written before <a href="macros-by-example.html#r-macro.decl.hygiene.crate"><code>$crate</code></a> was added to the language to work with Rust 2018’s path-based imports of macros. Its use is discouraged in new code.</p>
</blockquote>
</div>

<div class="alert alert-example">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z"></path></svg>Example</p>

<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[macro_export(local_inner_macros)]
macro_rules! helped {
    () =&gt; { helper!() } // Automatically converted to $crate::helper!().
}

#[macro_export]
macro_rules! helper {
    () =&gt; { () }
}
<span class="boring">}</span></code></pre>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.hygiene"><a class="rule-link" href="#r-macro.decl.hygiene" title="macro.decl.hygiene"><span>[macro<wbr>.decl<wbr>.hygiene]</span></a>
</div>

<h2 id="hygiene"><a class="header" href="#hygiene">Hygiene</a></h2>
<div class="rule" id="r-macro.decl.hygiene.intro"><a class="rule-link" href="#r-macro.decl.hygiene.intro" title="macro.decl.hygiene.intro"><span>[macro<wbr>.decl<wbr>.hygiene<wbr>.intro]</span></a>
</div>

<p>Macros by example have <em>mixed-site hygiene</em>. This means that <a href="expressions/loop-expr.html#loop-labels">loop labels</a>, <a href="expressions/loop-expr.html#r-expr.loop.block-labels">block labels</a>, and local variables are looked up at the macro definition site while other symbols are looked up at the macro invocation site. For example:</p>
<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = 1;
fn func() {
    unreachable!("this is never called")
}

macro_rules! check {
    () =&gt; {
        assert_eq!(x, 1); // Uses `x` from the definition site.
        func();           // Uses `func` from the invocation site.
    };
}

{
    let x = 2;
    fn func() { /* does not panic */ }
    check!();
}
<span class="boring">}</span></code></pre>
<p>Labels and local variables defined in macro expansion are not shared between invocations, so this code doesn’t compile:</p>
<pre class="playground"><code class="language-rust compile_fail E0425 edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>macro_rules! m {
    (define) =&gt; {
        let x = 1;
    };
    (refer) =&gt; {
        dbg!(x);
    };
}

m!(define);
m!(refer);
<span class="boring">}</span></code></pre>
<div class="rule" id="r-macro.decl.hygiene.crate"><a class="rule-link" href="#r-macro.decl.hygiene.crate" title="macro.decl.hygiene.crate"><span>[macro<wbr>.decl<wbr>.hygiene<wbr>.crate]</span></a>
</div>

<p>A special case is the <code>$crate</code> metavariable. It refers to the crate defining the macro, and can be used at the start of the path to look up items or macros which are not in scope at the invocation site.</p>
<!-- ignore: requires external crates -->
<pre><code class="language-rust ignore">//// Definitions in the `helper_macro` crate.
#[macro_export]
macro_rules! helped {
    // () =&gt; { helper!() } // This might lead to an error due to 'helper' not being in scope.
    () =&gt; { $crate::helper!() }
}

#[macro_export]
macro_rules! helper {
    () =&gt; { () }
}

//// Usage in another crate.
// Note that `helper_macro::helper` is not imported!
use helper_macro::helped;

fn unit() {
    helped!();
}</code></pre>
<p>Note that, because <code>$crate</code> refers to the current crate, it must be used with a
fully qualified module path when referring to non-macro items:</p>
<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub mod inner {
    #[macro_export]
    macro_rules! call_foo {
        () =&gt; { $crate::inner::foo() };
    }

    pub fn foo() {}
}
<span class="boring">}</span></code></pre>
<div class="rule" id="r-macro.decl.hygiene.vis"><a class="rule-link" href="#r-macro.decl.hygiene.vis" title="macro.decl.hygiene.vis"><span>[macro<wbr>.decl<wbr>.hygiene<wbr>.vis]</span></a>
</div>

<p>Additionally, even though <code>$crate</code> allows a macro to refer to items within its
own crate when expanding, its use has no effect on visibility. An item or macro
referred to must still be visible from the invocation site. In the following
example, any attempt to invoke <code>call_foo!()</code> from outside its crate will fail
because <code>foo()</code> is not public.</p>
<pre class="playground"><code class="language-rust edition2024"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[macro_export]
macro_rules! call_foo {
    () =&gt; { $crate::foo() };
}

fn foo() {}
<span class="boring">}</span></code></pre>
<div class="alert alert-note">
<blockquote>
<p class="alert-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>

<p>Prior to Rust 1.30, <code>$crate</code> and <a href="macros-by-example.html#r-macro.decl.scope.macro_export.local_inner_macros"><code>local_inner_macros</code></a> were unsupported. They were added alongside <a href="macros-by-example.html#r-macro.decl.scope.macro_export">path-based imports of macros</a>, to ensure that helper macros did not need to be manually imported by users of a macro-exporting crate. Crates written for earlier versions of Rust that use helper macros need to be modified to use <code>$crate</code> or <code>local_inner_macros</code> to work well with path-based imports.</p>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.follow-set"><a class="rule-link" href="#r-macro.decl.follow-set" title="macro.decl.follow-set"><span>[macro<wbr>.decl<wbr>.follow-set]</span></a>
</div>

<h2 id="follow-set-ambiguity-restrictions"><a class="header" href="#follow-set-ambiguity-restrictions">Follow-set ambiguity restrictions</a></h2>
<div class="rule" id="r-macro.decl.follow-set.intro"><a class="rule-link" href="#r-macro.decl.follow-set.intro" title="macro.decl.follow-set.intro"><span>[macro<wbr>.decl<wbr>.follow-set<wbr>.intro]</span></a>
</div>

<p>The parser used by the macro system is reasonably powerful, but it is limited in
order to prevent ambiguity in current or future versions of the language.</p>
<div class="rule" id="r-macro.decl.follow-set.token-restriction"><a class="rule-link" href="#r-macro.decl.follow-set.token-restriction" title="macro.decl.follow-set.token-restriction"><span>[macro<wbr>.decl<wbr>.follow-set<wbr>.token-restriction]</span></a>
</div>

<p>In particular, in addition to the rule about ambiguous expansions, a nonterminal
matched by a metavariable must be followed by a token which has been decided can
be safely used after that kind of match.</p>
<p>As an example, a macro matcher like <code>$i:expr [ , ]</code> could in theory be accepted
in Rust today, since <code>[,]</code> cannot be part of a legal expression and therefore
the parse would always be unambiguous. However, because <code>[</code> can start trailing
expressions, <code>[</code> is not a character which can safely be ruled out as coming
after an expression. If <code>[,]</code> were accepted in a later version of Rust, this
matcher would become ambiguous or would misparse, breaking working code.
Matchers like <code>$i:expr,</code> or <code>$i:expr;</code> would be legal, however, because <code>,</code> and
<code>;</code> are legal expression separators. The specific rules are:</p>
<div class="rule" id="r-macro.decl.follow-set.token-expr-stmt"><a class="rule-link" href="#r-macro.decl.follow-set.token-expr-stmt" title="macro.decl.follow-set.token-expr-stmt"><span>[macro<wbr>.decl<wbr>.follow-set<wbr>.token-expr-stmt]</span></a>
</div>

<ul>
<li><code>expr</code> and <code>stmt</code> may only be followed by one of: <code>=&gt;</code>, <code>,</code>, or <code>;</code>.</li>
</ul>
<div class="rule" id="r-macro.decl.follow-set.token-pat_param"><a class="rule-link" href="#r-macro.decl.follow-set.token-pat_param" title="macro.decl.follow-set.token-pat_param"><span>[macro<wbr>.decl<wbr>.follow-set<wbr>.token-pat_param]</span></a>
</div>

<ul>
<li><code>pat_param</code> may only be followed by one of: <code>=&gt;</code>, <code>,</code>, <code>=</code>, <code>|</code>, <code>if</code>, or <code>in</code>.</li>
</ul>
<div class="rule" id="r-macro.decl.follow-set.token-pat"><a class="rule-link" href="#r-macro.decl.follow-set.token-pat" title="macro.decl.follow-set.token-pat"><span>[macro<wbr>.decl<wbr>.follow-set<wbr>.token-pat]</span></a>
</div>

<ul>
<li><code>pat</code> may only be followed by one of: <code>=&gt;</code>, <code>,</code>, <code>=</code>, <code>if</code>, or <code>in</code>.</li>
</ul>
<div class="rule" id="r-macro.decl.follow-set.token-path-ty"><a class="rule-link" href="#r-macro.decl.follow-set.token-path-ty" title="macro.decl.follow-set.token-path-ty"><span>[macro<wbr>.decl<wbr>.follow-set<wbr>.token-path-ty]</span></a>
</div>

<ul>
<li><code>path</code> and <code>ty</code> may only be followed by one of: <code>=&gt;</code>, <code>,</code>, <code>=</code>, <code>|</code>, <code>;</code>,
<code>:</code>, <code>&gt;</code>, <code>&gt;&gt;</code>, <code>[</code>, <code>{</code>, <code>as</code>, <code>where</code>, or a macro variable of <code>block</code>
fragment specifier.</li>
</ul>
<div class="rule" id="r-macro.decl.follow-set.token-vis"><a class="rule-link" href="#r-macro.decl.follow-set.token-vis" title="macro.decl.follow-set.token-vis"><span>[macro<wbr>.decl<wbr>.follow-set<wbr>.token-vis]</span></a>
</div>

<ul>
<li><code>vis</code> may only be followed by one of: <code>,</code>, an identifier other than a
non-raw <code>priv</code>, any token that can begin a type, or a metavariable with a
<code>ident</code>, <code>ty</code>, or <code>path</code> fragment specifier.</li>
</ul>
<div class="rule" id="r-macro.decl.follow-set.token-other"><a class="rule-link" href="#r-macro.decl.follow-set.token-other" title="macro.decl.follow-set.token-other"><span>[macro<wbr>.decl<wbr>.follow-set<wbr>.token-other]</span></a>
</div>

<ul>
<li>All other fragment specifiers have no restrictions.</li>
</ul>
<div class="rule" id="r-macro.decl.follow-set.edition2021"><a class="rule-link" href="#r-macro.decl.follow-set.edition2021" title="macro.decl.follow-set.edition2021"><span>[macro<wbr>.decl<wbr>.follow-set<wbr>.edition2021]</span></a>
</div>

<div class="alert alert-edition">
<blockquote>
<p class="alert-title"><span class="alert-title-edition">2021</span> Edition differences</p>

<p>Before the 2021 edition, <code>pat</code> may also be followed by <code>|</code>.</p>
</blockquote>
</div>

<div class="rule" id="r-macro.decl.follow-set.repetition"><a class="rule-link" href="#r-macro.decl.follow-set.repetition" title="macro.decl.follow-set.repetition"><span>[macro<wbr>.decl<wbr>.follow-set<wbr>.repetition]</span></a>
</div>

<p>When repetitions are involved, then the rules apply to every possible number of
expansions, taking separators into account. This means:</p>
<ul>
<li>If the repetition includes a separator, that separator must be able to
follow the contents of the repetition.</li>
<li>If the repetition can repeat multiple times (<code>*</code> or <code>+</code>), then the contents
must be able to follow themselves.</li>
<li>The contents of the repetition must be able to follow whatever comes
before, and whatever comes after must be able to follow the contents of the
repetition.</li>
<li>If the repetition can match zero times (<code>*</code> or <code>?</code>), then whatever comes
after must be able to follow whatever comes before.</li>
</ul>
<p>For more detail, see the <a href="macro-ambiguity.html">formal specification</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="macros.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="procedural-macros.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="macros.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="procedural-macros.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/reference-da60281b.js"></script>


        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const fragmentMap =
                    {"#path-based-scope":"macros-by-example.html#the-macro_export-attribute"}
                ;
                const target = fragmentMap[window.location.hash];
                if (target) {
                    let url = new URL(target, window.location.href);
                    window.location.replace(url.href);
                }
            });
        </script>

    </div>
    </body>
</html>
