<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Cargo Targets - The Cargo Book</title>


        <!-- Custom HTML head -->
        <style>
            dd {
                margin-bottom: 1em;
            }
        </style>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="shortcut icon" href="../favicon-ba9a2803.png">
        <link rel="stylesheet" href="../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../css/general-2459343d.css">
        <link rel="stylesheet" href="../css/chrome-ae938929.css">
        <link rel="stylesheet" href="../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/cargo-d13f5220.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex-3b7f08f1.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-965bbb07.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Cargo Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/cargo/tree/master/src/doc/src" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/cargo/edit/master/src/doc/src/reference/cargo-targets.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <span class=fa-svg id="git-edit-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M421.7 220.3l-11.3 11.3-22.6 22.6-205 205c-6.6 6.6-14.8 11.5-23.8 14.1L30.8 511c-8.4 2.5-17.5 .2-23.7-6.1S-1.5 489.7 1 481.2L38.7 353.1c2.6-9 7.5-17.2 14.1-23.8l205-205 22.6-22.6 11.3-11.3 33.9 33.9 62.1 62.1 33.9 33.9zM96 353.9l-9.3 9.3c-.9 .9-1.6 2.1-2 3.4l-25.3 86 86-25.3c1.3-.4 2.5-1.1 3.4-2l9.3-9.3H112c-8.8 0-16-7.2-16-16V353.9zM453.3 19.3l39.4 39.4c25 25 25 65.5 0 90.5l-14.5 14.5-22.6 22.6-11.3 11.3-33.9-33.9-62.1-62.1L314.3 67.7l11.3-11.3 22.6-22.6 14.5-14.5c25-25 65.5-25 90.5 0z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="cargo-targets"><a class="header" href="#cargo-targets">Cargo Targets</a></h1>
<p>Cargo packages consist of <em>targets</em> which correspond to source files which can
be compiled into a crate. Packages can have <a href="#library">library</a>,
<a href="#binaries">binary</a>, <a href="#examples">example</a>, <a href="#tests">test</a>, and
<a href="#benchmarks">benchmark</a> targets. The list of targets can be configured in the
<code>Cargo.toml</code> manifest, often <a href="#target-auto-discovery">inferred automatically</a>
by the <a href="../guide/project-layout.html">directory layout</a> of the source files.</p>
<p>See <a href="#configuring-a-target">Configuring a target</a> below for details on
configuring the settings for a target.</p>
<h2 id="library"><a class="header" href="#library">Library</a></h2>
<p>The library target defines a “library” that can be used and linked by other
libraries and executables. The filename defaults to <code>src/lib.rs</code>, and the name
of the library defaults to the name of the package, with any dashes replaced
with underscores. A package can have only one library. The settings for the
library can be <a href="#configuring-a-target">customized</a> in the <code>[lib]</code> table in <code>Cargo.toml</code>.</p>
<pre><code class="language-toml"># Example of customizing the library in Cargo.toml.
[lib]
crate-type = ["cdylib"]
bench = false
</code></pre>
<h2 id="binaries"><a class="header" href="#binaries">Binaries</a></h2>
<p>Binary targets are executable programs that can be run after being compiled.
A binary’s source can be <code>src/main.rs</code> and/or stored in the <a href="../guide/project-layout.html"><code>src/bin/</code>
directory</a>. For <code>src/main.rs</code>, the default binary name is the
package name. The settings for each binary can be <a href="#configuring-a-target">customized</a> in the<code>[[bin]]</code>
tables in <code>Cargo.toml</code>.</p>
<p>Binaries can use the public API of the package’s library. They are also linked
with the <a href="specifying-dependencies.html"><code>[dependencies]</code></a> defined in <code>Cargo.toml</code>.</p>
<p>You can run individual binaries with the <a href="../commands/cargo-run.html"><code>cargo run</code></a> command with the <code>--bin &lt;bin-name&gt;</code> option. <a href="../commands/cargo-install.html"><code>cargo install</code></a> can be used to copy the executable to a
common location.</p>
<pre><code class="language-toml"># Example of customizing binaries in Cargo.toml.
[[bin]]
name = "cool-tool"
test = false
bench = false

[[bin]]
name = "frobnicator"
required-features = ["frobnicate"]
</code></pre>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p>Files located under the <a href="../guide/project-layout.html"><code>examples</code> directory</a> are example
uses of the functionality provided by the library. When compiled, they are
placed in the <a href="build-cache.html"><code>target/debug/examples</code> directory</a>.</p>
<p>Examples can use the public API of the package’s library. They are also linked
with the <a href="specifying-dependencies.html"><code>[dependencies]</code></a> and
<a href="specifying-dependencies.html#development-dependencies"><code>[dev-dependencies]</code></a> defined in <code>Cargo.toml</code>.</p>
<p>By default, examples are executable binaries (with a <code>main()</code> function). You
can specify the <a href="#the-crate-type-field"><code>crate-type</code> field</a> to make an example
be compiled as a library:</p>
<pre><code class="language-toml">[[example]]
name = "foo"
crate-type = ["staticlib"]
</code></pre>
<p>You can run individual executable examples with the <a href="../commands/cargo-run.html"><code>cargo run</code></a> command with
the <code>--example &lt;example-name&gt;</code> option. Library examples can be built with
<a href="../commands/cargo-build.html"><code>cargo build</code></a> with the <code>--example &lt;example-name&gt;</code> option. <a href="../commands/cargo-install.html"><code>cargo install</code></a>
with the <code>--example &lt;example-name&gt;</code> option can be used to copy executable
binaries to a common location. Examples are compiled by <a href="../commands/cargo-test.html"><code>cargo test</code></a> by
default to protect them from bit-rotting. Set <a href="#the-test-field">the <code>test</code>
field</a> to <code>true</code> if you have <code>#[test]</code> functions in the
example that you want to run with <a href="../commands/cargo-test.html"><code>cargo test</code></a>.</p>
<h2 id="tests"><a class="header" href="#tests">Tests</a></h2>
<p>There are two styles of tests within a Cargo project:</p>
<ul>
<li><em>Unit tests</em> which are functions marked with the <a href="../../reference/attributes/testing.html#the-test-attribute"><code>#[test]</code>
attribute</a> located within your library or binaries (or any
target enabled with <a href="#the-test-field">the <code>test</code> field</a>). These tests have
access to private APIs located within the target they are defined in.</li>
<li><em>Integration tests</em> which is a separate executable binary, also containing
<code>#[test]</code> functions, which is linked with the project’s library and has
access to its <em>public</em> API.</li>
</ul>
<p>Tests are run with the <a href="../commands/cargo-test.html"><code>cargo test</code></a> command. By default, Cargo and <code>rustc</code>
use the <a href="../../rustc/tests/index.html">libtest harness</a> which is responsible for collecting functions
annotated with the <a href="../../reference/attributes/testing.html#the-test-attribute"><code>#[test]</code> attribute</a> and executing them in
parallel, reporting the success and failure of each test. See <a href="#the-harness-field">the <code>harness</code>
field</a> if you want to use a different harness or test
strategy.</p>
<blockquote>
<p><strong>Note</strong>: There is another special style of test in Cargo:
<a href="../../rustdoc/documentation-tests.html">documentation tests</a>.
They are handled by <code>rustdoc</code> and have a slightly different execution model.
For more information, please see <a href="../commands/cargo-test.html#documentation-tests"><code>cargo test</code></a>.</p>
</blockquote>
<h3 id="integration-tests"><a class="header" href="#integration-tests">Integration tests</a></h3>
<p>Files located under the <a href="../guide/project-layout.html"><code>tests</code> directory</a> are integration
tests. When you run <a href="../commands/cargo-test.html"><code>cargo test</code></a>, Cargo will compile each of these files as
a separate crate, and execute them.</p>
<p>Integration tests can use the public API of the package’s library. They are
also linked with the <a href="specifying-dependencies.html"><code>[dependencies]</code></a> and
<a href="specifying-dependencies.html#development-dependencies"><code>[dev-dependencies]</code></a> defined in <code>Cargo.toml</code>.</p>
<p>If you want to share code among multiple integration tests, you can place it
in a separate module such as <code>tests/common/mod.rs</code> and then put <code>mod common;</code>
in each test to import it.</p>
<p>Each integration test results in a separate executable binary, and <a href="../commands/cargo-test.html"><code>cargo test</code></a> will run them serially. In some cases this can be inefficient, as it
can take longer to compile, and may not make full use of multiple CPUs when
running the tests. If you have a lot of integration tests, you may want to
consider creating a single integration test, and split the tests into multiple
modules. The libtest harness will automatically find all of the <code>#[test]</code>
annotated functions and run them in parallel. You can pass module names to
<a href="../commands/cargo-test.html"><code>cargo test</code></a> to only run the tests within that module.</p>
<p>Binary targets are automatically built if there is an integration test. This
allows an integration test to execute the binary to exercise and test its
behavior. The <code>CARGO_BIN_EXE_&lt;name&gt;</code> <a href="environment-variables.html#environment-variables-cargo-sets-for-crates">environment variable</a> is set when the
integration test is built and run so that it can use the <a href="../../std/macro.env.html"><code>env</code> macro</a> or <a href="../../std/env/fn.var.html"><code>var</code> function</a>
to locate the executable.</p>
<h2 id="benchmarks"><a class="header" href="#benchmarks">Benchmarks</a></h2>
<p>Benchmarks provide a way to test the performance of your code using the
<a href="../commands/cargo-bench.html"><code>cargo bench</code></a> command. They follow the same structure as <a href="#tests">tests</a>,
with each benchmark function annotated with the <code>#[bench]</code> attribute.
Similarly to tests:</p>
<ul>
<li>Benchmarks are placed in the <a href="../guide/project-layout.html"><code>benches</code> directory</a>.</li>
<li>Benchmark functions defined in libraries and binaries have access to the
<em>private</em> API within the target they are defined in. Benchmarks in the
<code>benches</code> directory may use the <em>public</em> API.</li>
<li><a href="#the-bench-field">The <code>bench</code> field</a> can be used to define which targets
are benchmarked by default.</li>
<li><a href="#the-harness-field">The <code>harness</code> field</a> can be used to disable the
built-in harness.</li>
</ul>
<blockquote>
<p><strong>Note</strong>: The <a href="../../unstable-book/library-features/test.html"><code>#[bench]</code>
attribute</a> is currently
unstable and only available on the <a href="../../book/appendix-07-nightly-rust.html">nightly channel</a>. There are some
packages available on <a href="https://crates.io/keywords/benchmark">crates.io</a> that
may help with running benchmarks on the stable channel, such as
<a href="https://crates.io/crates/criterion">Criterion</a>.</p>
</blockquote>
<h2 id="configuring-a-target"><a class="header" href="#configuring-a-target">Configuring a target</a></h2>
<p>All of the  <code>[lib]</code>, <code>[[bin]]</code>, <code>[[example]]</code>, <code>[[test]]</code>, and <code>[[bench]]</code>
sections in <code>Cargo.toml</code> support similar configuration for specifying how a
target should be built. The double-bracket sections like <code>[[bin]]</code> are
<a href="https://toml.io/en/v1.0.0-rc.3#array-of-tables">array-of-table of TOML</a>,
which means you can write more than one <code>[[bin]]</code> section to make several
executables in your crate. You can only specify one library, so <code>[lib]</code> is a
normal TOML table.</p>
<p>The following is an overview of the TOML settings for each target, with each
field described in detail below.</p>
<pre><code class="language-toml">[lib]
name = "foo"           # The name of the target.
path = "src/lib.rs"    # The source file of the target.
test = true            # Is tested by default.
doctest = true         # Documentation examples are tested by default.
bench = true           # Is benchmarked by default.
doc = true             # Is documented by default.
proc-macro = false     # Set to `true` for a proc-macro library.
harness = true         # Use libtest harness.
crate-type = ["lib"]   # The crate types to generate.
required-features = [] # Features required to build this target (N/A for lib).
</code></pre>
<h3 id="the-name-field"><a class="header" href="#the-name-field">The <code>name</code> field</a></h3>
<p>The <code>name</code> field specifies the name of the target, which corresponds to the
filename of the artifact that will be generated. For a library, this is the
crate name that dependencies will use to reference it.</p>
<p>For the library target, this defaults to the name of the package , with any
dashes replaced with underscores. For the default binary (<code>src/main.rs</code>),
it also defaults to the name of the package, with no replacement for dashes.
For <a href="#target-auto-discovery">auto discovered</a> targets, it defaults to the
directory or file name.</p>
<p>This is required for all targets except <code>[lib]</code>.</p>
<h3 id="the-path-field"><a class="header" href="#the-path-field">The <code>path</code> field</a></h3>
<p>The <code>path</code> field specifies where the source for the crate is located, relative
to the <code>Cargo.toml</code> file.</p>
<p>If not specified, the <a href="#target-auto-discovery">inferred path</a> is used based on
the target name.</p>
<h3 id="the-test-field"><a class="header" href="#the-test-field">The <code>test</code> field</a></h3>
<p>The <code>test</code> field indicates whether or not the target is tested by default by
<a href="../commands/cargo-test.html"><code>cargo test</code></a>. The default is <code>true</code> for lib, bins, and tests.</p>
<blockquote>
<p><strong>Note</strong>: Examples are built by <a href="../commands/cargo-test.html"><code>cargo test</code></a> by default to ensure they
continue to compile, but they are not <em>tested</em> by default. Setting <code>test = true</code> for an example will also build it as a test and run any
<a href="../../reference/attributes/testing.html#the-test-attribute"><code>#[test]</code></a> functions defined in the example.</p>
</blockquote>
<h3 id="the-doctest-field"><a class="header" href="#the-doctest-field">The <code>doctest</code> field</a></h3>
<p>The <code>doctest</code> field indicates whether or not <a href="../../rustdoc/documentation-tests.html">documentation examples</a> are
tested by default by <a href="../commands/cargo-test.html"><code>cargo test</code></a>. This is only relevant for libraries, it
has no effect on other sections. The default is <code>true</code> for the library.</p>
<h3 id="the-bench-field"><a class="header" href="#the-bench-field">The <code>bench</code> field</a></h3>
<p>The <code>bench</code> field indicates whether or not the target is benchmarked by
default by <a href="../commands/cargo-bench.html"><code>cargo bench</code></a>. The default is <code>true</code> for lib, bins, and
benchmarks.</p>
<h3 id="the-doc-field"><a class="header" href="#the-doc-field">The <code>doc</code> field</a></h3>
<p>The <code>doc</code> field indicates whether or not the target is included in the
documentation generated by <a href="../commands/cargo-doc.html"><code>cargo doc</code></a> by default. The default is <code>true</code> for
libraries and binaries.</p>
<blockquote>
<p><strong>Note</strong>: The binary will be skipped if its name is the same as the lib
target.</p>
</blockquote>
<h3 id="the-plugin-field"><a class="header" href="#the-plugin-field">The <code>plugin</code> field</a></h3>
<p>This option is deprecated and unused.</p>
<h3 id="the-proc-macro-field"><a class="header" href="#the-proc-macro-field">The <code>proc-macro</code> field</a></h3>
<p>The <code>proc-macro</code> field indicates that the library is a <a href="../../book/ch19-06-macros.html">procedural macro</a>
(<a href="../../reference/procedural-macros.html">reference</a>). This is only valid for the <code>[lib]</code>
target.</p>
<h3 id="the-harness-field"><a class="header" href="#the-harness-field">The <code>harness</code> field</a></h3>
<p>The <code>harness</code> field indicates that the <a href="../../rustc/command-line-arguments.html#option-test"><code>--test</code> flag</a> will be passed to
<code>rustc</code> which will automatically include the libtest library which is the
driver for collecting and running tests marked with the <a href="../../reference/attributes/testing.html#the-test-attribute"><code>#[test]</code>
attribute</a> or benchmarks with the <code>#[bench]</code> attribute. The
default is <code>true</code> for all targets.</p>
<p>If set to <code>false</code>, then you are responsible for defining a <code>main()</code> function
to run tests and benchmarks.</p>
<p>Tests have the <a href="../../reference/conditional-compilation.html#test"><code>cfg(test)</code> conditional expression</a> enabled whether
or not the harness is enabled.</p>
<h3 id="the-crate-type-field"><a class="header" href="#the-crate-type-field">The <code>crate-type</code> field</a></h3>
<p>The <code>crate-type</code> field defines the <a href="../../reference/linkage.html">crate types</a> that will be generated by the
target. It is an array of strings, allowing you to specify multiple crate
types for a single target. This can only be specified for libraries and
examples. Binaries, tests, and benchmarks are always the “bin” crate type. The
defaults are:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Target</th><th>Crate Type</th></tr>
</thead>
<tbody>
<tr><td>Normal library</td><td><code>"lib"</code></td></tr>
<tr><td>Proc-macro library</td><td><code>"proc-macro"</code></td></tr>
<tr><td>Example</td><td><code>"bin"</code></td></tr>
</tbody>
</table>
</div>
<p>The available options are <code>bin</code>, <code>lib</code>, <code>rlib</code>, <code>dylib</code>, <code>cdylib</code>,
<code>staticlib</code>, and <code>proc-macro</code>. You can read more about the different crate
types in the <a href="../../reference/linkage.html">Rust Reference Manual</a>.</p>
<h3 id="the-required-features-field"><a class="header" href="#the-required-features-field">The <code>required-features</code> field</a></h3>
<p>The <code>required-features</code> field specifies which <a href="features.html">features</a> the target needs in
order to be built. If any of the required features are not enabled, the
target will be skipped. This is only relevant for the <code>[[bin]]</code>, <code>[[bench]]</code>,
<code>[[test]]</code>, and <code>[[example]]</code> sections, it has no effect on <code>[lib]</code>.</p>
<pre><code class="language-toml">[features]
# ...
postgres = []
sqlite = []
tools = []

[[bin]]
name = "my-pg-tool"
required-features = ["postgres", "tools"]
</code></pre>
<h3 id="the-edition-field"><a class="header" href="#the-edition-field">The <code>edition</code> field</a></h3>
<p>The <code>edition</code> field defines the <a href="../../edition-guide/index.html">Rust edition</a> the target will use. If not
specified, it defaults to the <a href="manifest.html#the-edition-field"><code>edition</code> field</a> for the
<code>[package]</code>.</p>
<blockquote>
<p><strong>Note:</strong> This field is deprecated and will be removed in a future Edition</p>
</blockquote>
<h2 id="target-auto-discovery"><a class="header" href="#target-auto-discovery">Target auto-discovery</a></h2>
<p>By default, Cargo automatically determines the targets to build based on the
<a href="../guide/project-layout.html">layout of the files</a> on the filesystem. The target
configuration tables, such as <code>[lib]</code>, <code>[[bin]]</code>, <code>[[test]]</code>, <code>[[bench]]</code>, or
<code>[[example]]</code>, can be used to add additional targets that don’t follow the
standard directory layout.</p>
<p>The automatic target discovery can be disabled so that only manually
configured targets will be built. Setting the keys <code>autolib</code>, <code>autobins</code>, <code>autoexamples</code>,
<code>autotests</code>, or <code>autobenches</code> to <code>false</code> in the <code>[package]</code> section will
disable auto-discovery of the corresponding target type.</p>
<pre><code class="language-toml">[package]
# ...
autolib = false
autobins = false
autoexamples = false
autotests = false
autobenches = false
</code></pre>
<p>Disabling automatic discovery should only be needed for specialized
situations. For example, if you have a library where you want a <em>module</em> named
<code>bin</code>, this would present a problem because Cargo would usually attempt to
compile anything in the <code>bin</code> directory as an executable. Here is a sample
layout of this scenario:</p>
<pre><code class="language-text">├── Cargo.toml
└── src
    ├── lib.rs
    └── bin
        └── mod.rs
</code></pre>
<p>To prevent Cargo from inferring <code>src/bin/mod.rs</code> as an executable, set
<code>autobins = false</code> in <code>Cargo.toml</code> to disable auto-discovery:</p>
<pre><code class="language-toml">[package]
# …
autobins = false
</code></pre>
<blockquote>
<p><strong>Note</strong>: For packages with the 2015 edition, the default for auto-discovery
is <code>false</code> if at least one target is manually defined in <code>Cargo.toml</code>.
Beginning with the 2018 edition, the default is always <code>true</code>.</p>
</blockquote>
<blockquote>
<p><strong>MSRV:</strong> Respected as of 1.27 for <code>autobins</code>, <code>autoexamples</code>, <code>autotests</code>, and <code>autobenches</code></p>
</blockquote>
<blockquote>
<p><strong>MSRV:</strong> Respected as of 1.83 for <code>autolib</code></p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../reference/manifest.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../reference/rust-version.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../reference/manifest.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../reference/rust-version.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../mark-09e88c2c.min.js"></script>
        <script src="../searcher-c2a407aa.js"></script>

        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
