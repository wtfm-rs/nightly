<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Unstable Features - The Cargo Book</title>


        <!-- Custom HTML head -->
        <style>
            dd {
                margin-bottom: 1em;
            }
        </style>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="shortcut icon" href="../favicon-ba9a2803.png">
        <link rel="stylesheet" href="../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../css/general-2459343d.css">
        <link rel="stylesheet" href="../css/chrome-ae938929.css">
        <link rel="stylesheet" href="../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/cargo-d13f5220.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex-5326ac6c.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-965bbb07.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Cargo Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/cargo/tree/master/src/doc/src" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>
                        <a href="https://github.com/rust-lang/cargo/edit/master/src/doc/src/reference/unstable.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <span class=fa-svg id="git-edit-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M421.7 220.3l-11.3 11.3-22.6 22.6-205 205c-6.6 6.6-14.8 11.5-23.8 14.1L30.8 511c-8.4 2.5-17.5 .2-23.7-6.1S-1.5 489.7 1 481.2L38.7 353.1c2.6-9 7.5-17.2 14.1-23.8l205-205 22.6-22.6 11.3-11.3 33.9 33.9 62.1 62.1 33.9 33.9zM96 353.9l-9.3 9.3c-.9 .9-1.6 2.1-2 3.4l-25.3 86 86-25.3c1.3-.4 2.5-1.1 3.4-2l9.3-9.3H112c-8.8 0-16-7.2-16-16V353.9zM453.3 19.3l39.4 39.4c25 25 25 65.5 0 90.5l-14.5 14.5-22.6 22.6-11.3 11.3-33.9-33.9-62.1-62.1L314.3 67.7l11.3-11.3 22.6-22.6 14.5-14.5c25-25 65.5-25 90.5 0z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="unstable-features"><a class="header" href="#unstable-features">Unstable Features</a></h1>
<p>Experimental Cargo features are only available on the <a href="../../book/appendix-07-nightly-rust.html">nightly channel</a>. You
are encouraged to experiment with these features to see if they meet your
needs, and if there are any issues or problems. Check the linked tracking
issues listed below for more information on the feature, and click the GitHub
subscribe button if you want future updates.</p>
<p>After some period of time, if the feature does not have any major concerns, it
can be <a href="https://doc.crates.io/contrib/process/unstable.html#stabilization">stabilized</a>, which will make it available on stable once the current
nightly release reaches the stable channel (anywhere from 6 to 12 weeks).</p>
<p>There are three different ways that unstable features can be enabled based on
how the feature works:</p>
<ul>
<li>
<p>New syntax in <code>Cargo.toml</code> requires a <code>cargo-features</code> key at the top of
<code>Cargo.toml</code>, before any tables. For example:</p>
<pre><code class="language-toml"># This specifies which new Cargo.toml features are enabled.
cargo-features = ["test-dummy-unstable"]

[package]
name = "my-package"
version = "0.1.0"
im-a-teapot = true  # This is a new option enabled by test-dummy-unstable.
</code></pre>
</li>
<li>
<p>New command-line flags, options, and subcommands require the <code>-Z unstable-options</code> CLI option to also be included. For example, the new
<code>--artifact-dir</code> option is only available on nightly:</p>
<p><code>cargo +nightly build --artifact-dir=out -Z unstable-options</code></p>
</li>
<li>
<p><code>-Z</code> command-line flags are used to enable new functionality that may not
have an interface, or the interface has not yet been designed, or for more
complex features that affect multiple parts of Cargo. For example, the
<a href="#mtime-on-use">mtime-on-use</a> feature can be enabled with:</p>
<p><code>cargo +nightly build -Z mtime-on-use</code></p>
<p>Run <code>cargo -Z help</code> to see a list of flags available.</p>
<p>Anything which can be configured with a <code>-Z</code> flag can also be set in the
cargo <a href="config.html">config file</a> (<code>.cargo/config.toml</code>) in the <code>unstable</code> table. For
example:</p>
<pre><code class="language-toml">[unstable]
mtime-on-use = true
build-std = ["core", "alloc"]
</code></pre>
</li>
</ul>
<p>Each new feature described below should explain how to use it.</p>
<p><em>For the latest nightly, see the <a href="https://doc.rust-lang.org/nightly/cargo/reference/unstable.html">nightly version</a> of this page.</em></p>
<h2 id="list-of-unstable-features"><a class="header" href="#list-of-unstable-features">List of unstable features</a></h2>
<ul>
<li>Unstable-specific features
<ul>
<li><a href="#allow-features">-Z allow-features</a> — Provides a way to restrict which unstable features are used.</li>
</ul>
</li>
<li>Build scripts and linking
<ul>
<li><a href="#metabuild">Metabuild</a> — Provides declarative build scripts.</li>
<li><a href="#multiple-build-scripts">Multiple Build Scripts</a> — Allows use of multiple build scripts.</li>
<li><a href="#any-build-script-metadata">Any Build Script Metadata</a> — Allow any build script to specify env vars via <code>cargo::metadata=key=value</code></li>
</ul>
</li>
<li>Resolver and features
<ul>
<li><a href="#no-index-update">no-index-update</a> — Prevents cargo from updating the index cache.</li>
<li><a href="#avoid-dev-deps">avoid-dev-deps</a> — Prevents the resolver from including dev-dependencies during resolution.</li>
<li><a href="#minimal-versions">minimal-versions</a> — Forces the resolver to use the lowest compatible version instead of the highest.</li>
<li><a href="#direct-minimal-versions">direct-minimal-versions</a> — Forces the resolver to use the lowest compatible version instead of the highest.</li>
<li><a href="#public-dependency">public-dependency</a> — Allows dependencies to be classified as either public or private.</li>
<li><a href="#msrv-policy">msrv-policy</a> — MSRV-aware resolver and version selection</li>
<li><a href="#precise-pre-release">precise-pre-release</a> — Allows pre-release versions to be selected with <code>update --precise</code></li>
<li><a href="#sbom">sbom</a> — Generates SBOM pre-cursor files for compiled artifacts</li>
<li><a href="#update-breaking">update-breaking</a> — Allows upgrading to breaking versions with <code>update --breaking</code></li>
<li><a href="#feature-unification">feature-unification</a> — Enable new feature unification modes in workspaces</li>
<li>[lockfile-publish-time] — Limit resolver to packages older than the specified time</li>
</ul>
</li>
<li>Output behavior
<ul>
<li><a href="#artifact-dir">artifact-dir</a> — Adds a directory where artifacts are copied to.</li>
<li><a href="#build-dir-new-layout">build-dir-new-layout</a> — Enables the new build-dir filesystem layout</li>
<li><a href="#different-binary-name">Different binary name</a> — Assign a name to the built binary that is separate from the crate name.</li>
<li><a href="#root-dir">root-dir</a> — Controls the root directory relative to which paths are printed</li>
</ul>
</li>
<li>Compile behavior
<ul>
<li><a href="#mtime-on-use">mtime-on-use</a> — Updates the last-modified timestamp on every dependency every time it is used, to provide a mechanism to delete unused artifacts.</li>
<li><a href="#build-std">build-std</a> — Builds the standard library instead of using pre-built binaries.</li>
<li><a href="#build-std-features">build-std-features</a> — Sets features to use with the standard library.</li>
<li><a href="#binary-dep-depinfo">binary-dep-depinfo</a> — Causes the dep-info file to track binary dependencies.</li>
<li><a href="#checksum-freshness">checksum-freshness</a> — When passed, the decision as to whether a crate needs to be rebuilt is made using file checksums instead of the file mtime.</li>
<li><a href="#panic-abort-tests">panic-abort-tests</a> — Allows running tests with the “abort” panic strategy.</li>
<li><a href="#host-config">host-config</a> — Allows setting <code>[target]</code>-like configuration settings for host build targets.</li>
<li><a href="#no-embed-metadata">no-embed-metadata</a> — Passes <code>-Zembed-metadata=no</code> to the compiler, which avoid embedding metadata into rlib and dylib artifacts, to save disk space.</li>
<li><a href="#target-applies-to-host">target-applies-to-host</a> — Alters whether certain flags will be passed to host build targets.</li>
<li><a href="#gc">gc</a> — Global cache garbage collection.</li>
<li><a href="#open-namespaces">open-namespaces</a> — Allow multiple packages to participate in the same API namespace</li>
<li><a href="#panic-immediate-abort">panic-immediate-abort</a> — Passes <code>-Cpanic=immediate-abort</code> to the compiler.</li>
<li><a href="#compile-time-deps">compile-time-deps</a> — Perma-unstable feature for rust-analyzer</li>
<li><a href="#fine-grain-locking">fine-grain-locking</a> — Use fine grain locking instead of locking the entire build cache</li>
</ul>
</li>
<li>rustdoc
<ul>
<li><a href="#rustdoc-map">rustdoc-map</a> — Provides mappings for documentation to link to external sites like <a href="https://docs.rs/">docs.rs</a>.</li>
<li><a href="#scrape-examples">scrape-examples</a> — Shows examples within documentation.</li>
<li><a href="#output-format-for-rustdoc">output-format</a> — Allows documentation to also be emitted in the experimental <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustdoc_json_types/">JSON format</a>.</li>
<li><a href="#rustdoc-depinfo">rustdoc-depinfo</a> — Use dep-info files in rustdoc rebuild detection.</li>
<li><a href="#rustdoc-mergeable-info">rustdoc-mergeable-info</a> — Use rustdoc mergeable cross-crate-info files.</li>
</ul>
</li>
<li><code>Cargo.toml</code> extensions
<ul>
<li><a href="#profile-rustflags-option">Profile <code>rustflags</code> option</a> — Passed directly to rustc.</li>
<li><a href="#profile-hint-mostly-unused-option">Profile <code>hint-mostly-unused</code> option</a> — Hint that a dependency is mostly unused, to optimize compilation time.</li>
<li><a href="#codegen-backend">codegen-backend</a> — Select the codegen backend used by rustc.</li>
<li><a href="#per-package-target">per-package-target</a> — Sets the <code>--target</code> to use for each individual package.</li>
<li><a href="#artifact-dependencies">artifact dependencies</a> — Allow build artifacts to be included into other build artifacts and build them for different targets.</li>
<li><a href="#profile-trim-paths-option">Profile <code>trim-paths</code> option</a> — Control the sanitization of file paths in build outputs.</li>
<li><a href="#lintscargo"><code>[lints.cargo]</code></a> — Allows configuring lints for Cargo.</li>
<li><a href="#path-bases">path bases</a> — Named base directories for path dependencies.</li>
<li><a href="#unstable-editions"><code>unstable-editions</code></a> — Allows use of editions that are not yet stable.</li>
</ul>
</li>
<li>Information and metadata
<ul>
<li><a href="#unit-graph">unit-graph</a> — Emits JSON for Cargo’s internal graph structure.</li>
<li><a href="#rustc---print"><code>cargo rustc --print</code></a> — Calls rustc with <code>--print</code> to display information from rustc.</li>
<li><a href="#build-analysis">Build analysis</a> — Record and persist detailed build metrics across runs, with new commands to query past builds.</li>
<li><a href="#rustc-unicode"><code>rustc-unicode</code></a> — Enables <code>rustc</code>’s unicode error format in Cargo’s error messages</li>
</ul>
</li>
<li>Configuration
<ul>
<li><a href="#cargo-config"><code>cargo config</code></a> — Adds a new subcommand for viewing config files.</li>
</ul>
</li>
<li>Registries
<ul>
<li><a href="#publish-timeout">publish-timeout</a> — Controls the timeout between uploading the crate and being available in the index</li>
<li><a href="#asymmetric-token">asymmetric-token</a> — Adds support for authentication tokens using asymmetric cryptography (<code>cargo:paseto</code> provider).</li>
</ul>
</li>
<li>Other
<ul>
<li><a href="#gitoxide">gitoxide</a> — Use <code>gitoxide</code> instead of <code>git2</code> for a set of operations.</li>
<li><a href="#script">script</a> — Enable support for single-file <code>.rs</code> packages.</li>
<li><a href="#lockfile-path">lockfile-path</a> — Allows to specify a path to lockfile other than the default path <code>&lt;workspace_root&gt;/Cargo.lock</code>.</li>
<li><a href="#native-completions">native-completions</a> — Move cargo shell completions to native completions.</li>
<li><a href="#warnings">warnings</a> — controls warning behavior; options for allowing or denying warnings.</li>
<li><a href="#package-message-format">Package message format</a> — Message format for <code>cargo package</code>.</li>
<li><a href="#fix-edition"><code>fix-edition</code></a> — A permanently unstable edition migration helper.</li>
<li><a href="https://github.com/crate-ci/cargo-plumbing">Plumbing subcommands</a> — Low, level commands that act as APIs for Cargo, like <code>cargo metadata</code></li>
</ul>
</li>
</ul>
<h2 id="allow-features"><a class="header" href="#allow-features">allow-features</a></h2>
<p>This permanently-unstable flag makes it so that only a listed set of
unstable features can be used. Specifically, if you pass
<code>-Zallow-features=foo,bar</code>, you’ll continue to be able to pass <code>-Zfoo</code>
and <code>-Zbar</code> to <code>cargo</code>, but you will be unable to pass <code>-Zbaz</code>. You can
pass an empty string (<code>-Zallow-features=</code>) to disallow all unstable
features.</p>
<p><code>-Zallow-features</code> also restricts which unstable features can be passed
to the <code>cargo-features</code> entry in <code>Cargo.toml</code>. If, for example, you want
to allow</p>
<pre><code class="language-toml">cargo-features = ["test-dummy-unstable"]
</code></pre>
<p>where <code>test-dummy-unstable</code> is unstable, that features would also be
disallowed by <code>-Zallow-features=</code>, and allowed with
<code>-Zallow-features=test-dummy-unstable</code>.</p>
<p>The list of features passed to cargo’s <code>-Zallow-features</code> is also passed
to any Rust tools that cargo ends up calling (like <code>rustc</code> or
<code>rustdoc</code>). Thus, if you run <code>cargo -Zallow-features=</code>, no unstable
Cargo <em>or</em> Rust features can be used.</p>
<h2 id="no-index-update"><a class="header" href="#no-index-update">no-index-update</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/3479">#3479</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/7404">#7404</a></li>
</ul>
<p>The <code>-Z no-index-update</code> flag ensures that Cargo does not attempt to update
the registry index. This is intended for tools such as Crater that issue many
Cargo commands, and you want to avoid the network latency for updating the
index each time.</p>
<h2 id="mtime-on-use"><a class="header" href="#mtime-on-use">mtime-on-use</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/pull/6477">#6477</a></li>
<li>Cache usage meta tracking issue: <a href="https://github.com/rust-lang/cargo/issues/7150">#7150</a></li>
</ul>
<p>The <code>-Z mtime-on-use</code> flag is an experiment to have Cargo update the mtime of
used files to make it easier for tools like cargo-sweep to detect which files
are stale. For many workflows this needs to be set on <em>all</em> invocations of cargo.
To make this more practical setting the <code>unstable.mtime_on_use</code> flag in <code>.cargo/config.toml</code>
or the corresponding ENV variable will apply the <code>-Z mtime-on-use</code> to all
invocations of nightly cargo. (the config flag is ignored by stable)</p>
<h2 id="avoid-dev-deps"><a class="header" href="#avoid-dev-deps">avoid-dev-deps</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/4988">#4988</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/5133">#5133</a></li>
</ul>
<p>When running commands such as <code>cargo install</code> or <code>cargo build</code>, Cargo
currently requires dev-dependencies to be downloaded, even if they are not
used. The <code>-Z avoid-dev-deps</code> flag allows Cargo to avoid downloading
dev-dependencies if they are not needed. The <code>Cargo.lock</code> file will not be
generated if dev-dependencies are skipped.</p>
<h2 id="minimal-versions"><a class="header" href="#minimal-versions">minimal-versions</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/4100">#4100</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/5657">#5657</a></li>
</ul>
<blockquote>
<p>Note: It is not recommended to use this feature. Because it enforces minimal
versions for all transitive dependencies, its usefulness is limited since
not all external dependencies declare proper lower version bounds. It is
intended that it will be changed in the future to only enforce minimal
versions for direct dependencies.</p>
</blockquote>
<p>When a <code>Cargo.lock</code> file is generated, the <code>-Z minimal-versions</code> flag will
resolve the dependencies to the minimum SemVer version that will satisfy the
requirements (instead of the greatest version).</p>
<p>The intended use-case of this flag is to check, during continuous integration,
that the versions specified in Cargo.toml are a correct reflection of the
minimum versions that you are actually using. That is, if Cargo.toml says
<code>foo = "1.0.0"</code> that you don’t accidentally depend on features added only in
<code>foo 1.5.0</code>.</p>
<h2 id="direct-minimal-versions"><a class="header" href="#direct-minimal-versions">direct-minimal-versions</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/4100">#4100</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/5657">#5657</a></li>
</ul>
<p>When a <code>Cargo.lock</code> file is generated, the <code>-Z direct-minimal-versions</code> flag will
resolve the dependencies to the minimum SemVer version that will satisfy the
requirements (instead of the greatest version) for direct dependencies only.</p>
<p>The intended use-case of this flag is to check, during continuous integration,
that the versions specified in Cargo.toml are a correct reflection of the
minimum versions that you are actually using. That is, if Cargo.toml says
<code>foo = "1.0.0"</code> that you don’t accidentally depend on features added only in
<code>foo 1.5.0</code>.</p>
<p>Indirect dependencies are resolved as normal so as not to be blocked on their
minimal version validation.</p>
<h2 id="artifact-dir"><a class="header" href="#artifact-dir">artifact-dir</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/4875">#4875</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/6790">#6790</a></li>
</ul>
<p>This feature allows you to specify the directory where artifacts will be copied
to after they are built. Typically artifacts are only written to the
<code>target/release</code> or <code>target/debug</code> directories. However, determining the exact
filename can be tricky since you need to parse JSON output. The <code>--artifact-dir</code>
flag makes it easier to predictably access the artifacts. Note that the
artifacts are copied, so the originals are still in the <code>target</code> directory.
Example:</p>
<pre><code class="language-sh">cargo +nightly build --artifact-dir=out -Z unstable-options
</code></pre>
<p>This can also be specified in <code>.cargo/config.toml</code> files.</p>
<pre><code class="language-toml">[build]
artifact-dir = "out"
</code></pre>
<h2 id="root-dir"><a class="header" href="#root-dir">root-dir</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/9887">#9887</a></li>
<li>Tracking Issue: None (not currently slated for stabilization)</li>
</ul>
<p>The <code>-Zroot-dir</code> flag sets the root directory relative to which paths are printed.
This affects both diagnostics and paths emitted by the <code>file!()</code> macro.</p>
<h2 id="metabuild"><a class="header" href="#metabuild">Metabuild</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/rust/issues/49803">rust-lang/rust#49803</a></li>
<li>RFC: <a href="https://github.com/rust-lang/rfcs/blob/master/text/2196-metabuild.md">#2196</a></li>
</ul>
<p>Metabuild is a feature to have declarative build scripts. Instead of writing
a <code>build.rs</code> script, you specify a list of build dependencies in the
<code>metabuild</code> key in <code>Cargo.toml</code>. A build script is automatically generated
that runs each build dependency in order. Metabuild packages can then read
metadata from <code>Cargo.toml</code> to specify their behavior.</p>
<p>Include <code>cargo-features</code> at the top of <code>Cargo.toml</code>, a <code>metabuild</code> key in the
<code>package</code>, list the dependencies in <code>build-dependencies</code>, and add any metadata
that the metabuild packages require under <code>package.metadata</code>. Example:</p>
<pre><code class="language-toml">cargo-features = ["metabuild"]

[package]
name = "mypackage"
version = "0.0.1"
metabuild = ["foo", "bar"]

[build-dependencies]
foo = "1.0"
bar = "1.0"

[package.metadata.foo]
extra-info = "qwerty"
</code></pre>
<p>Metabuild packages should have a public function called <code>metabuild</code> that
performs the same actions as a regular <code>build.rs</code> script would perform.</p>
<h2 id="multiple-build-scripts"><a class="header" href="#multiple-build-scripts">Multiple Build Scripts</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/14903">#14903</a></li>
<li>Original Pull Request: <a href="https://github.com/rust-lang/cargo/pull/15630">#15630</a></li>
</ul>
<p>Multiple Build Scripts feature allows you to have multiple build scripts in your package.</p>
<p>Include <code>cargo-features</code> at the top of <code>Cargo.toml</code> and add <code>multiple-build-scripts</code> to enable feature.
Add the paths of the build scripts as an array in <code>package.build</code>. For example:</p>
<pre><code class="language-toml">cargo-features = ["multiple-build-scripts"]

[package]
name = "mypackage"
version = "0.0.1"
build = ["foo.rs", "bar.rs"]
</code></pre>
<p><strong>Accessing Output Directories</strong>:  Output directory of each build script can be accessed by using <code>&lt;script-name&gt;_OUT_DIR</code>
where the <code>&lt;script-name&gt;</code> is the file-stem of the build script, exactly as-is.
For example, <code>bar_OUT_DIR</code> for script at <code>foo/bar.rs</code>. (Only set during compilation, can be accessed via <code>env!</code> macro)</p>
<h2 id="any-build-script-metadata"><a class="header" href="#any-build-script-metadata">Any Build Script Metadata</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/3544">#14903</a></li>
</ul>
<p>Allow any build script to specify env vars via <code>cargo::metadata=key=value</code></p>
<p>Depedant build scripts can access these key/value pair by reading the <code>CARGO_DEP_&lt;dep&gt;_&lt;key&gt;</code> env variable at runtime.
For build scripts of crates with a <code>links</code>, both <code>DEP_&lt;links&gt;_&lt;key&gt;</code> and <code>CARGO_DEP_&lt;dep&gt;_&lt;key&gt;</code> will be set.</p>
<p>Note that <code>dep</code> and <code>key</code> in <code>CARGO_DEP_&lt;dep&gt;_&lt;key&gt;</code> are uppercased and hyphens (<code>-</code>) replaced with underscores (<code>_</code>).</p>
<h2 id="public-dependency"><a class="header" href="#public-dependency">public-dependency</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/rust/issues/44663">#44663</a></li>
</ul>
<p>The ‘public-dependency’ feature allows marking dependencies as ‘public’
or ‘private’. When this feature is enabled, additional information is passed to rustc to allow
the <a href="../../rustc/lints/listing/warn-by-default.html#exported-private-dependencies">exported_private_dependencies</a> lint to function properly.</p>
<p>To enable this feature, you can either use <code>-Zpublic-dependency</code></p>
<pre><code class="language-sh">cargo +nightly run -Zpublic-dependency
</code></pre>
<p>or <code>[unstable]</code> table, for example,</p>
<pre><code class="language-toml"># .cargo/config.toml
[unstable]
public-dependency = true
</code></pre>
<p><code>public-dependency</code> could also be enabled in <code>cargo-features</code>, <strong>though this is deprecated and will be removed soon</strong>.</p>
<pre><code class="language-toml">cargo-features = ["public-dependency"]

[dependencies]
my_dep = { version = "1.2.3", public = true }
private_dep = "2.0.0" # Will be 'private' by default
</code></pre>
<p>Documentation updates:</p>
<ul>
<li>For workspace’s “The <code>dependencies</code> table” section, include <code>public</code> as an unsupported field for <code>workspace.dependencies</code></li>
</ul>
<h2 id="msrv-policy"><a class="header" href="#msrv-policy">msrv-policy</a></h2>
<ul>
<li><a href="https://rust-lang.github.io/rfcs/3537-msrv-resolver.html">RFC: MSRV-aware Resolver</a></li>
<li><a href="https://github.com/rust-lang/cargo/issues/9930">#9930</a> (MSRV-aware resolver)</li>
</ul>
<p>Catch-all unstable feature for MSRV-aware cargo features under
<a href="https://github.com/rust-lang/rfcs/pull/2495">RFC 2495</a>.</p>
<h3 id="msrv-aware-cargo-add"><a class="header" href="#msrv-aware-cargo-add">MSRV-aware cargo add</a></h3>
<p>This was stabilized in 1.79 in <a href="https://github.com/rust-lang/cargo/pull/13608">#13608</a>.</p>
<h3 id="msrv-aware-resolver"><a class="header" href="#msrv-aware-resolver">MSRV-aware resolver</a></h3>
<p>This was stabilized in 1.84 in <a href="https://github.com/rust-lang/cargo/pull/14639">#14639</a>.</p>
<h3 id="convert-incompatible_toolchain-error-into-a-lint"><a class="header" href="#convert-incompatible_toolchain-error-into-a-lint">Convert <code>incompatible_toolchain</code> error into a lint</a></h3>
<p>Unimplemented</p>
<h3 id="--update-rust-version-flag-for-cargo-add-cargo-update"><a class="header" href="#--update-rust-version-flag-for-cargo-add-cargo-update"><code>--update-rust-version</code> flag for <code>cargo add</code>, <code>cargo update</code></a></h3>
<p>Unimplemented</p>
<h3 id="packagerust-version--toolchain"><a class="header" href="#packagerust-version--toolchain"><code>package.rust-version = "toolchain"</code></a></h3>
<p>Unimplemented</p>
<h3 id="update-cargo-new-template-to-set-packagerust-version--toolchain"><a class="header" href="#update-cargo-new-template-to-set-packagerust-version--toolchain">Update <code>cargo new</code> template to set <code>package.rust-version = "toolchain"</code></a></h3>
<p>Unimplemented</p>
<h2 id="precise-pre-release"><a class="header" href="#precise-pre-release">precise-pre-release</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/13290">#13290</a></li>
<li>RFC: <a href="https://github.com/rust-lang/rfcs/pull/3493">#3493</a></li>
</ul>
<p>The <code>precise-pre-release</code> feature allows pre-release versions to be selected with <code>update --precise</code>
even when a pre-release is not specified by a projects <code>Cargo.toml</code>.</p>
<p>Take for example this <code>Cargo.toml</code>.</p>
<pre><code class="language-toml">[dependencies]
my-dependency = "0.1.1"
</code></pre>
<p>It’s possible to update <code>my-dependency</code> to a pre-release with <code>update -Zunstable-options my-dependency --precise 0.1.2-pre.0</code>.
This is because <code>0.1.2-pre.0</code> is considered compatible with <code>0.1.1</code>.
It would not be possible to upgrade to <code>0.2.0-pre.0</code> from <code>0.1.1</code> in the same way.</p>
<h2 id="sbom"><a class="header" href="#sbom">sbom</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/pull/13709">#13709</a></li>
<li>RFC: <a href="https://github.com/rust-lang/rfcs/pull/3553">#3553</a></li>
</ul>
<p>The <code>sbom</code> build config allows to generate so-called SBOM pre-cursor files
alongside each compiled artifact. A Software Bill Of Material (SBOM) tool can
incorporate these generated files to collect important information from the cargo
build process that are difficult or impossible to obtain in another way.</p>
<p>To enable this feature either set the <code>sbom</code> field in the <code>.cargo/config.toml</code></p>
<pre><code class="language-toml">[unstable]
sbom = true

[build]
sbom = true
</code></pre>
<p>or set the <code>CARGO_BUILD_SBOM</code> environment variable to <code>true</code>. The functionality
is available behind the flag <code>-Z sbom</code>.</p>
<p>The generated output files are in JSON format and follow the naming scheme
<code>&lt;artifact&gt;.cargo-sbom.json</code>. The JSON file contains information about dependencies,
target, features and the used <code>rustc</code> compiler.</p>
<p>SBOM pre-cursor files are generated for all executable and linkable outputs
that are uplifted into the target or artifact directories.</p>
<h3 id="environment-variables-cargo-sets-for-crates"><a class="header" href="#environment-variables-cargo-sets-for-crates">Environment variables Cargo sets for crates</a></h3>
<ul>
<li><code>CARGO_SBOM_PATH</code> – a list of generated SBOM precursor files, separated by the platform PATH separator. The list can be split with <code>std::env::split_paths</code>.</li>
</ul>
<h3 id="sbom-pre-cursor-schema"><a class="header" href="#sbom-pre-cursor-schema">SBOM pre-cursor schema</a></h3>
<pre><code class="language-json5">{
  // Schema version.
  "version": 1,
  // Index into the crates array for the root crate.
  "root": 0,
  // Array of all crates. There may be duplicates of the same crate if that
  // crate is compiled differently (different opt-level, features, etc).
  "crates": [
    {
      // Fully qualified package ID specification
      "id": "path+file:///sample-package#0.1.0",
      // List of target kinds: bin, lib, rlib, dylib, cdylib, staticlib, proc-macro, example, test, bench, custom-build
      "kind": ["bin"],
      // Enabled feature flags.
      "features": [],
      // Dependencies for this crate.
      "dependencies": [
        {
          // Index in to the crates array.
          "index": 1,
          // Dependency kind: 
          // Normal: A dependency linked to the artifact produced by this crate.
          // Build: A compile-time dependency used to build this crate (build-script or proc-macro).
          "kind": "normal"
        },
        {
          // A crate can depend on another crate with both normal and build edges.
          "index": 1,
          "kind": "build"
        }
      ]
    },
    {
      "id": "registry+https://github.com/rust-lang/crates.io-index#zerocopy@0.8.16",
      "kind": ["bin"],
      "features": [],
      "dependencies": []
    }
  ],
  // Information about rustc used to perform the compilation.
  "rustc": {
    // Compiler version
    "version": "1.86.0-nightly",
    // Compiler wrapper
    "wrapper": null,
    // Compiler workspace wrapper
    "workspace_wrapper": null,
    // Commit hash for rustc
    "commit_hash": "bef3c3b01f690de16738b1c9f36470fbfc6ac623",
    // Host target triple
    "host": "x86_64-pc-windows-msvc",
    // Verbose version string: `rustc -vV`
    "verbose_version": "rustc 1.86.0-nightly (bef3c3b01 2025-02-04)\nbinary: rustc\ncommit-hash: bef3c3b01f690de16738b1c9f36470fbfc6ac623\ncommit-date: 2025-02-04\nhost: x86_64-pc-windows-msvc\nrelease: 1.86.0-nightly\nLLVM version: 19.1.7\n"
  }
}
</code></pre>
<h2 id="update-breaking"><a class="header" href="#update-breaking">update-breaking</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/12425">#12425</a></li>
</ul>
<p>Allow upgrading dependencies version requirements in <code>Cargo.toml</code> across SemVer
incompatible versions using with the <code>--breaking</code> flag.</p>
<p>This only applies to dependencies when</p>
<ul>
<li>The package is a dependency of a workspace member</li>
<li>The dependency is not renamed</li>
<li>A SemVer-incompatible version is available</li>
<li>The “SemVer operator” is used (<code>^</code> which is the default)</li>
</ul>
<p>Users may further restrict which packages get upgraded by specifying them on
the command line.</p>
<p>Example:</p>
<pre><code class="language-console">$ cargo +nightly -Zunstable-options update --breaking
$ cargo +nightly -Zunstable-options update --breaking clap
</code></pre>
<p><em>This is meant to fill a similar role as <a href="https://github.com/killercup/cargo-edit/">cargo-upgrade</a></em></p>
<h2 id="build-std"><a class="header" href="#build-std">build-std</a></h2>
<ul>
<li>Tracking Repository: <a href="https://github.com/rust-lang/wg-cargo-std-aware">https://github.com/rust-lang/wg-cargo-std-aware</a></li>
</ul>
<p>The <code>build-std</code> feature enables Cargo to compile the standard library itself as
part of a crate graph compilation. This feature has also historically been known
as “std-aware Cargo”. This feature is still in very early stages of development,
and is also a possible massive feature addition to Cargo. This is a very large
feature to document, even in the minimal form that it exists in today, so if
you’re curious to stay up to date you’ll want to follow the <a href="https://github.com/rust-lang/wg-cargo-std-aware">tracking
repository</a> and its set of
issues.</p>
<p>The functionality implemented today is behind a flag called <code>-Z build-std</code>. This
flag indicates that Cargo should compile the standard library from source code
using the same profile as the main build itself. Note that for this to work you
need to have the source code for the standard library available, and at this
time the only supported method of doing so is to add the <code>rust-src</code> rust rustup
component:</p>
<pre><code class="language-console">$ rustup component add rust-src --toolchain nightly
</code></pre>
<p>Usage looks like:</p>
<pre><code class="language-console">$ cargo new foo
$ cd foo
$ cargo +nightly run -Z build-std --target x86_64-unknown-linux-gnu
   Compiling core v0.0.0 (...)
   ...
   Compiling foo v0.1.0 (...)
    Finished dev [unoptimized + debuginfo] target(s) in 21.00s
     Running `target/x86_64-unknown-linux-gnu/debug/foo`
Hello, world!
</code></pre>
<p>Here we recompiled the standard library in debug mode with debug assertions
(like <code>src/main.rs</code> is compiled) and everything was linked together at the end.</p>
<p>Using <code>-Z build-std</code> will implicitly compile the stable crates <code>core</code>, <code>std</code>,
<code>alloc</code>, and <code>proc_macro</code>. If you’re using <code>cargo test</code> it will also compile the
<code>test</code> crate. If you’re working with an environment which does not support some
of these crates, then you can pass an argument to <code>-Zbuild-std</code> as well:</p>
<pre><code class="language-console">$ cargo +nightly build -Z build-std=core,alloc
</code></pre>
<p>The value here is a comma-separated list of standard library crates to build.</p>
<h3 id="requirements"><a class="header" href="#requirements">Requirements</a></h3>
<p>As a summary, a list of requirements today to use <code>-Z build-std</code> are:</p>
<ul>
<li>You must install libstd’s source code through <code>rustup component add rust-src</code></li>
<li>You must use both a nightly Cargo and a nightly rustc</li>
<li>The <code>-Z build-std</code> flag must be passed to all <code>cargo</code> invocations.</li>
</ul>
<h3 id="reporting-bugs-and-helping-out"><a class="header" href="#reporting-bugs-and-helping-out">Reporting bugs and helping out</a></h3>
<p>The <code>-Z build-std</code> feature is in the very early stages of development! This
feature for Cargo has an extremely long history and is very large in scope, and
this is just the beginning. If you’d like to report bugs please either report
them to:</p>
<ul>
<li>Cargo — <a href="https://github.com/rust-lang/cargo/issues/new">https://github.com/rust-lang/cargo/issues/new</a> — for implementation bugs</li>
<li>The tracking repository —
<a href="https://github.com/rust-lang/wg-cargo-std-aware/issues/new">https://github.com/rust-lang/wg-cargo-std-aware/issues/new</a> — for larger design
questions.</li>
</ul>
<p>Also if you’d like to see a feature that’s not yet implemented and/or if
something doesn’t quite work the way you’d like it to, feel free to check out
the <a href="https://github.com/rust-lang/wg-cargo-std-aware/issues">issue tracker</a> of
the tracking repository, and if it’s not there please file a new issue!</p>
<h2 id="build-std-features"><a class="header" href="#build-std-features">build-std-features</a></h2>
<ul>
<li>Tracking Repository: <a href="https://github.com/rust-lang/wg-cargo-std-aware">https://github.com/rust-lang/wg-cargo-std-aware</a></li>
</ul>
<p>This flag is a sibling to the <code>-Zbuild-std</code> feature flag. This will configure
the features enabled for the standard library itself when building the standard
library. The default enabled features, at this time, are <code>backtrace</code> and
<code>panic-unwind</code>. This flag expects a comma-separated list and, if provided, will
override the default list of features enabled.</p>
<h2 id="binary-dep-depinfo"><a class="header" href="#binary-dep-depinfo">binary-dep-depinfo</a></h2>
<ul>
<li>Tracking rustc issue: <a href="https://github.com/rust-lang/rust/issues/63012">#63012</a></li>
</ul>
<p>The <code>-Z binary-dep-depinfo</code> flag causes Cargo to forward the same flag to
<code>rustc</code> which will then cause <code>rustc</code> to include the paths of all binary
dependencies in the “dep info” file (with the <code>.d</code> extension). Cargo then uses
that information for change-detection (if any binary dependency changes, then
the crate will be rebuilt). The primary use case is for building the compiler
itself, which has implicit dependencies on the standard library that would
otherwise be untracked for change-detection.</p>
<h2 id="checksum-freshness"><a class="header" href="#checksum-freshness">checksum-freshness</a></h2>
<ul>
<li>Tracking issue: <a href="https://github.com/rust-lang/cargo/issues/14136">#14136</a></li>
</ul>
<p>The <code>-Z checksum-freshness</code> flag will replace the use of file mtimes in cargo’s
fingerprints with a file checksum value. This is most useful on systems with a poor
mtime implementation, or in CI/CD. The checksum algorithm can change without notice
between cargo versions. Fingerprints are used by cargo to determine when a crate needs to be rebuilt.</p>
<p>For the time being files ingested by build script will continue to use mtimes, even when <code>checksum-freshness</code>
is enabled. This is not intended as a long term solution.</p>
<h2 id="panic-abort-tests"><a class="header" href="#panic-abort-tests">panic-abort-tests</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/rust/issues/67650">#67650</a></li>
<li>Original Pull Request: <a href="https://github.com/rust-lang/cargo/pull/7460">#7460</a></li>
</ul>
<p>The <code>-Z panic-abort-tests</code> flag will enable nightly support to compile test
harness crates with <code>-Cpanic=abort</code>. Without this flag Cargo will compile tests,
and everything they depend on, with <code>-Cpanic=unwind</code> because it’s the only way
<code>test</code>-the-crate knows how to operate. As of <a href="https://github.com/rust-lang/rust/pull/64158">rust-lang/rust#64158</a>, however,
the <code>test</code> crate supports <code>-C panic=abort</code> with a test-per-process, and can help
avoid compiling crate graphs multiple times.</p>
<p>It’s currently unclear how this feature will be stabilized in Cargo, but we’d
like to stabilize it somehow!</p>
<h2 id="target-applies-to-host"><a class="header" href="#target-applies-to-host">target-applies-to-host</a></h2>
<ul>
<li>Original Pull Request: <a href="https://github.com/rust-lang/cargo/pull/9322">#9322</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/9453">#9453</a></li>
</ul>
<p>Historically, Cargo’s behavior for whether the <code>linker</code> and <code>rustflags</code>
configuration options from environment variables and
<a href="config.html#target"><code>[target]</code></a> are respected for build scripts, plugins,
and other artifacts that are <em>always</em> built for the host platform has
been somewhat inconsistent.
When <code>--target</code> is <em>not</em> passed, Cargo respects the same <code>linker</code> and
<code>rustflags</code> for build scripts as for all other compile artifacts. When
<code>--target</code> <em>is</em> passed, however, Cargo respects <code>linker</code> from
<a href="config.html#targettriplelinker"><code>[target.&lt;host triple&gt;]</code></a>, and does not
pick up any <code>rustflags</code> configuration.
This dual behavior is confusing, but also makes it difficult to correctly
configure builds where the host triple and the <a href="../appendix/glossary.html#target" title="&quot;target&quot; (glossary)">target triple</a> happen to
be the same, but artifacts intended to run on the build host should still
be configured differently.</p>
<p><code>-Ztarget-applies-to-host</code> enables the top-level
<code>target-applies-to-host</code> setting in Cargo configuration files which
allows users to opt into different (and more consistent) behavior for
these properties. When <code>target-applies-to-host</code> is unset, or set to
<code>true</code>, in the configuration file, the existing Cargo behavior is
preserved (though see <code>-Zhost-config</code>, which changes that default). When
it is set to <code>false</code>, no options from <code>[target.&lt;host triple&gt;]</code>,
<code>RUSTFLAGS</code>, or <code>[build]</code> are respected for host artifacts regardless of
whether <code>--target</code> is passed to Cargo. To customize artifacts intended
to be run on the host, use <code>[host]</code> (<a href="#host-config"><code>host-config</code></a>).</p>
<p>In the future, <code>target-applies-to-host</code> may end up defaulting to <code>false</code>
to provide more sane and consistent default behavior.</p>
<pre><code class="language-toml"># config.toml
target-applies-to-host = false
</code></pre>
<pre><code class="language-console">cargo +nightly -Ztarget-applies-to-host build --target x86_64-unknown-linux-gnu
</code></pre>
<h2 id="host-config"><a class="header" href="#host-config">host-config</a></h2>
<ul>
<li>Original Pull Request: <a href="https://github.com/rust-lang/cargo/pull/9322">#9322</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/9452">#9452</a></li>
</ul>
<p>The <code>host</code> key in a config file can be used to pass flags to host build targets
such as build scripts that must run on the host system instead of the target
system when cross compiling. It supports both generic and host arch specific
tables. Matching host arch tables take precedence over generic host tables.</p>
<p>It requires the <code>-Zhost-config</code> and <code>-Ztarget-applies-to-host</code>
command-line options to be set, and that <code>target-applies-to-host = false</code> is set in the Cargo configuration file.</p>
<pre><code class="language-toml"># config.toml
[host]
linker = "/path/to/host/linker"
[host.x86_64-unknown-linux-gnu]
linker = "/path/to/host/arch/linker"
rustflags = ["-Clink-arg=--verbose"]
[target.x86_64-unknown-linux-gnu]
linker = "/path/to/target/linker"
</code></pre>
<p>The generic <code>host</code> table above will be entirely ignored when building on an
<code>x86_64-unknown-linux-gnu</code> host as the <code>host.x86_64-unknown-linux-gnu</code> table
takes precedence.</p>
<p>Setting <code>-Zhost-config</code> changes the default for <code>target-applies-to-host</code> to
<code>false</code> from <code>true</code>.</p>
<pre><code class="language-console">cargo +nightly -Ztarget-applies-to-host -Zhost-config build --target x86_64-unknown-linux-gnu
</code></pre>
<h2 id="unit-graph"><a class="header" href="#unit-graph">unit-graph</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/8002">#8002</a></li>
</ul>
<p>The <code>--unit-graph</code> flag can be passed to any build command (<code>build</code>, <code>check</code>,
<code>run</code>, <code>test</code>, <code>bench</code>, <code>doc</code>, etc.) to emit a JSON object to stdout which
represents Cargo’s internal unit graph. Nothing is actually built, and the
command returns immediately after printing. Each “unit” corresponds to an
execution of the compiler. These objects also include which unit each unit
depends on.</p>
<pre><code>cargo +nightly build --unit-graph -Z unstable-options
</code></pre>
<p>This structure provides a more complete view of the dependency relationship as
Cargo sees it. In particular, the “features” field supports the new feature
resolver where a dependency can be built multiple times with different
features. <code>cargo metadata</code> fundamentally cannot represent the relationship of
features between different dependency kinds, and features now depend on which
command is run and which packages and targets are selected. Additionally it
can provide details about intra-package dependencies like build scripts or
tests.</p>
<p>The following is a description of the JSON structure:</p>
<pre><code class="language-javascript">{
  /* Version of the JSON output structure. If any backwards incompatible
     changes are made, this value will be increased.
  */
  "version": 1,
  /* Array of all build units. */
  "units": [
    {
      /* An opaque string which indicates the package.
         Information about the package can be obtained from `cargo metadata`.
      */
      "pkg_id": "my-package 0.1.0 (path+file:///path/to/my-package)",
      /* The Cargo target. See the `cargo metadata` documentation for more
         information about these fields.
         https://doc.rust-lang.org/cargo/commands/cargo-metadata.html
      */
      "target": {
        "kind": ["lib"],
        "crate_types": ["lib"],
        "name": "my_package",
        "src_path": "/path/to/my-package/src/lib.rs",
        "edition": "2018",
        "test": true,
        "doctest": true
      },
      /* The profile settings for this unit.
         These values may not match the profile defined in the manifest.
         Units can use modified profile settings. For example, the "panic"
         setting can be overridden for tests to force it to "unwind".
      */
      "profile": {
        /* The profile name these settings are derived from. */
        "name": "dev",
        /* The optimization level as a string. */
        "opt_level": "0",
        /* The LTO setting as a string. */
        "lto": "false",
        /* The codegen units as an integer.
           `null` if it should use the compiler's default.
        */
        "codegen_units": null,
        /* The debug information level as an integer.
           `null` if it should use the compiler's default (0).
        */
        "debuginfo": 2,
        /* Whether or not debug-assertions are enabled. */
        "debug_assertions": true,
        /* Whether or not overflow-checks are enabled. */
        "overflow_checks": true,
        /* Whether or not rpath is enabled. */
        "rpath": false,
        /* Whether or not incremental is enabled. */
        "incremental": true,
        /* The panic strategy, "unwind" or "abort". */
        "panic": "unwind"
      },
      /* Which platform this target is being built for.
         A value of `null` indicates it is for the host.
         Otherwise it is a string of the target triple (such as
         "x86_64-unknown-linux-gnu").
      */
      "platform": null,
      /* The "mode" for this unit. Valid values:

         * "test" --- Build using `rustc` as a test.
         * "build" --- Build using `rustc`.
         * "check" --- Build using `rustc` in "check" mode.
         * "doc" --- Build using `rustdoc`.
         * "doctest" --- Test using `rustdoc`.
         * "run-custom-build" --- Represents the execution of a build script.
      */
      "mode": "build",
      /* Array of features enabled on this unit as strings. */
      "features": ["somefeat"],
      /* Whether or not this is a standard-library unit,
         part of the unstable build-std feature.
         If not set, treat as `false`.
      */
      "is_std": false,
      /* Array of dependencies of this unit. */
      "dependencies": [
        {
          /* Index in the "units" array for the dependency. */
          "index": 1,
          /* The name that this dependency will be referred as. */
          "extern_crate_name": "unicode_xid",
          /* Whether or not this dependency is "public",
             part of the unstable public-dependency feature.
             If not set, the public-dependency feature is not enabled.
          */
          "public": false,
          /* Whether or not this dependency is injected into the prelude,
             currently used by the build-std feature.
             If not set, treat as `false`.
          */
          "noprelude": false
        }
      ]
    },
    // ...
  ],
  /* Array of indices in the "units" array that are the "roots" of the
     dependency graph.
  */
  "roots": [0],
}
</code></pre>
<h2 id="profile-rustflags-option"><a class="header" href="#profile-rustflags-option">Profile <code>rustflags</code> option</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/7878">rust-lang/cargo#7878</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/10271">rust-lang/cargo#10271</a></li>
</ul>
<p>This feature provides a new option in the <code>[profile]</code> section to specify flags
that are passed directly to rustc.
This can be enabled like so:</p>
<pre><code class="language-toml">cargo-features = ["profile-rustflags"]

[package]
# ...

[profile.release]
rustflags = [ "-C", "..." ]
</code></pre>
<p>To set this in a profile in Cargo configuration, you need to use either
<code>-Z profile-rustflags</code> or <code>[unstable]</code> table to enable it. For example,</p>
<pre><code class="language-toml"># .cargo/config.toml
[unstable]
profile-rustflags = true

[profile.release]
rustflags = [ "-C", "..." ]
</code></pre>
<h2 id="profile-hint-mostly-unused-option"><a class="header" href="#profile-hint-mostly-unused-option">Profile <code>hint-mostly-unused</code> option</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/15644">#15644</a></li>
</ul>
<p>This feature provides a new option in the <code>[profile]</code> section to enable the
rustc <code>hint-mostly-unused</code> option. This is primarily useful to enable for
specific dependencies:</p>
<pre><code class="language-toml">[profile.dev.package.huge-mostly-unused-dependency]
hint-mostly-unused = true
</code></pre>
<p>To enable this feature, pass <code>-Zprofile-hint-mostly-unused</code>. However, since
this option is a hint, using it without passing <code>-Zprofile-hint-mostly-unused</code>
will only warn and ignore the profile option. Versions of Cargo prior to the
introduction of this feature will give an “unused manifest key” warning, but
will otherwise function without erroring. This allows using the hint in a
crate’s <code>Cargo.toml</code> without mandating the use of a newer Cargo to build it.</p>
<p>A crate can also provide this hint automatically for crates that depend on it,
using the <code>[hints]</code> table (which will likewise be ignored by older Cargo):</p>
<pre><code class="language-toml">[hints]
mostly-unused = true
</code></pre>
<p>This will cause the crate to default to hint-mostly-unused, unless overridden
via <code>profile</code>, which takes precedence, and which can only be specified in the
top-level crate being built.</p>
<h2 id="rustdoc-map"><a class="header" href="#rustdoc-map">rustdoc-map</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/8296">#8296</a></li>
</ul>
<p>This feature adds configuration settings that are passed to <code>rustdoc</code> so that
it can generate links to dependencies whose documentation is hosted elsewhere
when the dependency is not documented. First, add this to <code>.cargo/config</code>:</p>
<pre><code class="language-toml">[doc.extern-map.registries]
crates-io = "https://docs.rs/"
</code></pre>
<p>Then, when building documentation, use the following flags to cause links
to dependencies to link to <a href="https://docs.rs/">docs.rs</a>:</p>
<pre><code>cargo +nightly doc --no-deps -Zrustdoc-map
</code></pre>
<p>The <code>registries</code> table contains a mapping of registry name to the URL to link
to. The URL may have the markers <code>{pkg_name}</code> and <code>{version}</code> which will get
replaced with the corresponding values. If neither are specified, then Cargo
defaults to appending <code>{pkg_name}/{version}/</code> to the end of the URL.</p>
<p>Another config setting is available to redirect standard library links. By
default, rustdoc creates links to <a href="https://doc.rust-lang.org/nightly/">https://doc.rust-lang.org/nightly/</a>. To
change this behavior, use the <code>doc.extern-map.std</code> setting:</p>
<pre><code class="language-toml">[doc.extern-map]
std = "local"
</code></pre>
<p>A value of <code>"local"</code> means to link to the documentation found in the <code>rustc</code>
sysroot. If you are using rustup, this documentation can be installed with
<code>rustup component add rust-docs</code>.</p>
<p>The default value is <code>"remote"</code>.</p>
<p>The value may also take a URL for a custom location.</p>
<h2 id="per-package-target"><a class="header" href="#per-package-target">per-package-target</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/pull/9406">#9406</a></li>
<li>Original Pull Request: <a href="https://github.com/rust-lang/cargo/pull/9030">#9030</a></li>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/pull/7004">#7004</a></li>
</ul>
<p>The <code>per-package-target</code> feature adds two keys to the manifest:
<code>package.default-target</code> and <code>package.forced-target</code>. The first makes
the package be compiled by default (ie. when no <code>--target</code> argument is
passed) for some target. The second one makes the package always be
compiled for the target.</p>
<p>Example:</p>
<pre><code class="language-toml">[package]
forced-target = "wasm32-unknown-unknown"
</code></pre>
<p>In this example, the crate is always built for
<code>wasm32-unknown-unknown</code>, for instance because it is going to be used
as a plugin for a main program that runs on the host (or provided on
the command line) target.</p>
<h2 id="artifact-dependencies"><a class="header" href="#artifact-dependencies">artifact-dependencies</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/pull/9096">#9096</a></li>
<li>Original Pull Request: <a href="https://github.com/rust-lang/cargo/pull/9992">#9992</a></li>
</ul>
<p>Artifact dependencies allow Cargo packages to depend on <code>bin</code>, <code>cdylib</code>, and <code>staticlib</code> crates,
and use the artifacts built by those crates at compile time.</p>
<p>Run <code>cargo</code> with <code>-Z bindeps</code> to enable this functionality.</p>
<h3 id="artifact-dependencies-dependency-declarations"><a class="header" href="#artifact-dependencies-dependency-declarations">artifact-dependencies: Dependency declarations</a></h3>
<p>Artifact-dependencies adds the following keys to a dependency declaration in <code>Cargo.toml</code>:</p>
<ul>
<li>
<p><code>artifact</code> — This specifies the <a href="cargo-targets.html">Cargo Target</a> to build.
Normally without this field, Cargo will only build the <code>[lib]</code> target from a dependency.
This field allows specifying which target will be built, and made available as a binary at build time:</p>
<ul>
<li><code>"bin"</code> — Compiled executable binaries, corresponding to all of the <code>[[bin]]</code> sections in the dependency’s manifest.</li>
<li><code>"bin:&lt;bin-name&gt;"</code> — Compiled executable binary, corresponding to a specific binary target specified by the given <code>&lt;bin-name&gt;</code>.</li>
<li><code>"cdylib"</code> — A C-compatible dynamic library, corresponding to a <code>[lib]</code> section with <code>crate-type = ["cdylib"]</code> in the dependency’s manifest.</li>
<li><code>"staticlib"</code> — A C-compatible static library, corresponding to a <code>[lib]</code> section with <code>crate-type = ["staticlib"]</code> in the dependency’s manifest.</li>
</ul>
<p>The <code>artifact</code> value can be a string, or it can be an array of strings to specify multiple targets.</p>
<p>Example:</p>
<pre><code class="language-toml">[dependencies]
bar = { version = "1.0", artifact = "staticlib" }
zoo = { version = "1.0", artifact = ["bin:cat", "bin:dog"]}
</code></pre>
</li>
<li>
<p><code>lib</code> — This is a Boolean value which indicates whether or not to also build the dependency’s library as a normal Rust <code>lib</code> dependency.
This field can only be specified when <code>artifact</code> is specified.</p>
<p>The default for this field is <code>false</code> when <code>artifact</code> is specified.
If this is set to <code>true</code>, then the dependency’s <code>[lib]</code> target will also be built for the platform target the declaring package is being built for.
This allows the package to use the dependency from Rust code like a normal dependency in addition to an artifact dependency.</p>
<p>Example:</p>
<pre><code class="language-toml">[dependencies]
bar = { version = "1.0", artifact = "bin", lib = true }
</code></pre>
</li>
<li>
<p><code>target</code> — The platform target to build the dependency for.
This field can only be specified when <code>artifact</code> is specified.</p>
<p>The default if this is not specified depends on the dependency kind.
For build dependencies, it will be built for the host target.
For all other dependencies, it will be built for the same targets the declaring package is built for.</p>
<p>For a build dependency, this can also take the special value of <code>"target"</code> which means to build the dependency for the same targets that the package is being built for.</p>
<pre><code class="language-toml">[build-dependencies]
bar = { version = "1.0", artifact = "cdylib", target = "wasm32-unknown-unknown"}
same-target = { version = "1.0", artifact = "bin", target = "target" }
</code></pre>
</li>
</ul>
<h3 id="artifact-dependencies-environment-variables"><a class="header" href="#artifact-dependencies-environment-variables">artifact-dependencies: Environment variables</a></h3>
<p>After building an artifact dependency, Cargo provides the following environment variables that you can use to access the artifact:</p>
<ul>
<li>
<p><code>CARGO_&lt;ARTIFACT-TYPE&gt;_DIR_&lt;DEP&gt;</code> — This is the directory containing all the artifacts from the dependency.</p>
<p><code>&lt;ARTIFACT-TYPE&gt;</code> is the <code>artifact</code> specified for the dependency (uppercased as in <code>CDYLIB</code>, <code>STATICLIB</code>, or <code>BIN</code>) and <code>&lt;DEP&gt;</code> is the name of the dependency.
As with other Cargo environment variables, dependency names are converted to uppercase, with dashes replaced by underscores.</p>
<p>If your manifest renames the dependency, <code>&lt;DEP&gt;</code> corresponds to the name you specify, not the original package name.</p>
</li>
<li>
<p><code>CARGO_&lt;ARTIFACT-TYPE&gt;_FILE_&lt;DEP&gt;_&lt;NAME&gt;</code> — This is the full path to the artifact.</p>
<p><code>&lt;ARTIFACT-TYPE&gt;</code> is the <code>artifact</code> specified for the dependency (uppercased as above), <code>&lt;DEP&gt;</code> is the name of the dependency (transformed as above), and <code>&lt;NAME&gt;</code> is the name of the artifact from the dependency.</p>
<p>Note that <code>&lt;NAME&gt;</code> is not modified in any way from the <code>name</code> specified in the crate supplying the artifact, or the crate name if not specified; for instance, it may be in lowercase, or contain dashes.</p>
<p>For convenience, if the artifact name matches the original package name, cargo additionally supplies a copy of this variable with the <code>_&lt;NAME&gt;</code> suffix omitted.
For instance, if the <code>cmake</code> crate supplies a binary named <code>cmake</code>, Cargo supplies both <code>CARGO_BIN_FILE_CMAKE</code> and <code>CARGO_BIN_FILE_CMAKE_cmake</code>.</p>
</li>
</ul>
<p>For each kind of dependency, these variables are supplied to the same part of the build process that has access to that kind of dependency:</p>
<ul>
<li>For build-dependencies, these variables are supplied to the <code>build.rs</code> script, and can be accessed using <a href="https://doc.rust-lang.org/std/env/fn.var_os.html"><code>std::env::var_os</code></a>.
(As with any OS file path, these may or may not be valid UTF-8.)</li>
<li>For normal dependencies, these variables are supplied during the compilation of the crate, and can be accessed using the <a href="https://doc.rust-lang.org/std/macro.env.html"><code>env!</code></a> macro.</li>
<li>For dev-dependencies, these variables are supplied during the compilation of examples, tests, and benchmarks, and can be accessed using the <a href="https://doc.rust-lang.org/std/macro.env.html"><code>env!</code></a> macro.</li>
</ul>
<h3 id="artifact-dependencies-examples"><a class="header" href="#artifact-dependencies-examples">artifact-dependencies: Examples</a></h3>
<h4 id="example-use-a-binary-executable-from-a-build-script"><a class="header" href="#example-use-a-binary-executable-from-a-build-script">Example: use a binary executable from a build script</a></h4>
<p>In the <code>Cargo.toml</code> file, you can specify a dependency on a binary to make available for a build script:</p>
<pre><code class="language-toml">[build-dependencies]
some-build-tool = { version = "1.0", artifact = "bin" }
</code></pre>
<p>Then inside the build script, the binary can be executed at build time:</p>
<pre class="playground"><code class="language-rust">fn main() {
    let build_tool = std::env::var_os("CARGO_BIN_FILE_SOME_BUILD_TOOL").unwrap();
    let status = std::process::Command::new(build_tool)
        .arg("do-stuff")
        .status()
        .unwrap();
    if !status.success() {
        eprintln!("failed!");
        std::process::exit(1);
    }
}</code></pre>
<h4 id="example-use-cdylib-artifact-in-build-script"><a class="header" href="#example-use-cdylib-artifact-in-build-script">Example: use <em>cdylib</em> artifact in build script</a></h4>
<p>The <code>Cargo.toml</code> in the consuming package, building the <code>bar</code> library as <code>cdylib</code>
for a specific build target…</p>
<pre><code class="language-toml">[build-dependencies]
bar = { artifact = "cdylib", version = "1.0", target = "wasm32-unknown-unknown" }
</code></pre>
<p>…along with the build script in <code>build.rs</code>.</p>
<pre class="playground"><code class="language-rust">fn main() {
    wasm::run_file(std::env::var("CARGO_CDYLIB_FILE_BAR").unwrap());
}</code></pre>
<h4 id="example-use-binary-artifact-and-its-library-in-a-binary"><a class="header" href="#example-use-binary-artifact-and-its-library-in-a-binary">Example: use <em>binary</em> artifact and its library in a binary</a></h4>
<p>The <code>Cargo.toml</code> in the consuming package, building the <code>bar</code> binary for inclusion
as artifact while making it available as library as well…</p>
<pre><code class="language-toml">[dependencies]
bar = { artifact = "bin", version = "1.0", lib = true }
</code></pre>
<p>…along with the executable using <code>main.rs</code>.</p>
<pre class="playground"><code class="language-rust">fn main() {
    bar::init();
    command::run(env!("CARGO_BIN_FILE_BAR"));
}</code></pre>
<h2 id="publish-timeout"><a class="header" href="#publish-timeout">publish-timeout</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/11222">11222</a></li>
</ul>
<p>The <code>publish.timeout</code> key in a config file can be used to control how long
<code>cargo publish</code> waits between posting a package to the registry and it being
available in the local index.</p>
<p>A timeout of <code>0</code> prevents any checks from occurring. The current default is
<code>60</code> seconds.</p>
<p>It requires the <code>-Zpublish-timeout</code> command-line options to be set.</p>
<pre><code class="language-toml"># config.toml
[publish]
timeout = 300  # in seconds
</code></pre>
<h2 id="asymmetric-token"><a class="header" href="#asymmetric-token">asymmetric-token</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/10519">10519</a></li>
<li>RFC: <a href="https://github.com/rust-lang/rfcs/pull/3231">#3231</a></li>
</ul>
<p>The <code>-Z asymmetric-token</code> flag enables the <code>cargo:paseto</code> credential provider which allows Cargo to authenticate to registries without sending secrets over the network.</p>
<p>In <a href="config.html"><code>config.toml</code></a> and <code>credentials.toml</code> files there is a field called <code>private-key</code>, which is a private key formatted in the secret <a href="https://github.com/paseto-standard/paserk/blob/master/types/secret.md">subset of <code>PASERK</code></a> and is used to sign asymmetric tokens</p>
<p>A keypair can be generated with <code>cargo login --generate-keypair</code> which will:</p>
<ul>
<li>generate a public/private keypair in the currently recommended fashion.</li>
<li>save the private key in <code>credentials.toml</code>.</li>
<li>print the public key in <a href="https://github.com/paseto-standard/paserk/blob/master/types/public.md">PASERK public</a> format.</li>
</ul>
<p>It is recommended that the <code>private-key</code> be saved in <code>credentials.toml</code>. It is also supported in <code>config.toml</code>, primarily so that it can be set using the associated environment variable, which is the recommended way to provide it in CI contexts. This setup is what we have for the <code>token</code> field for setting a secret token.</p>
<p>There is also an optional field called <code>private-key-subject</code> which is a string chosen by the registry.
This string will be included as part of an asymmetric token and should not be secret.
It is intended for the rare use cases like “cryptographic proof that the central CA server authorized this action”. Cargo requires it to be non-whitespace printable ASCII. Registries that need non-ASCII data should base64 encode it.</p>
<p>Both fields can be set with <code>cargo login --registry=name --private-key --private-key-subject="subject"</code> which will prompt you to put in the key value.</p>
<p>A registry can have at most one of <code>private-key</code> or <code>token</code> set.</p>
<p>All PASETOs will include <code>iat</code>, the current time in ISO 8601 format. Cargo will include the following where appropriate:</p>
<ul>
<li><code>sub</code> an optional, non-secret string chosen by the registry that is expected to be claimed with every request. The value will be the <code>private-key-subject</code> from the <code>config.toml</code> file.</li>
<li><code>mutation</code> if present, indicates that this request is a mutating operation (or a read-only operation if not present), must be one of the strings <code>publish</code>, <code>yank</code>, or <code>unyank</code>.
<ul>
<li><code>name</code> name of the crate related to this request.</li>
<li><code>vers</code> version string of the crate related to this request.</li>
<li><code>cksum</code> the SHA256 hash of the crate contents, as a string of 64 lowercase hexadecimal digits, must be present only when <code>mutation</code> is equal to <code>publish</code></li>
</ul>
</li>
<li><code>challenge</code> the challenge string received from a 401/403 from this server this session. Registries that issue challenges must track which challenges have been issued/used and never accept a given challenge more than once within the same validity period (avoiding the need to track every challenge ever issued).</li>
</ul>
<p>The “footer” (which is part of the signature) will be a JSON string in UTF-8 and include:</p>
<ul>
<li><code>url</code> the RFC 3986 compliant URL where cargo got the config.json file,
<ul>
<li>If this is a registry with an HTTP index, then this is the base URL that all index queries are relative to.</li>
<li>If this is a registry with a GIT index, it is the URL Cargo used to clone the index.</li>
</ul>
</li>
<li><code>kid</code> the identifier of the private key used to sign the request, using the <a href="https://github.com/paseto-standard/paserk/blob/master/operations/ID.md">PASERK IDs</a> standard.</li>
</ul>
<p>PASETO includes the message that was signed, so the server does not have to reconstruct the exact string from the request in order to check the signature. The server does need to check that the signature is valid for the string in the PASETO and that the contents of that string matches the request.
If a claim should be expected for the request but is missing in the PASETO then the request must be rejected.</p>
<h2 id="cargo-config"><a class="header" href="#cargo-config"><code>cargo config</code></a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/2362">#2362</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/9301">#9301</a></li>
</ul>
<p>The <code>cargo config</code> subcommand provides a way to display the configuration
files that cargo loads. It currently includes the <code>get</code> subcommand which
can take an optional config value to display.</p>
<pre><code class="language-console">cargo +nightly -Zunstable-options config get build.rustflags
</code></pre>
<p>If no config value is included, it will display all config values. See the
<code>--help</code> output for more options available.</p>
<h2 id="rustc---print"><a class="header" href="#rustc---print">rustc <code>--print</code></a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/9357">#9357</a></li>
</ul>
<p><code>cargo rustc --print=VAL</code> forwards the <code>--print</code> flag to <code>rustc</code> in order to
extract information from <code>rustc</code>. This runs <code>rustc</code> with the corresponding
<a href="https://doc.rust-lang.org/rustc/command-line-arguments.html#--print-print-compiler-information"><code>--print</code></a>
flag, and then immediately exits without compiling. Exposing this as a cargo
flag allows cargo to inject the correct target and RUSTFLAGS based on the
current configuration.</p>
<p>The primary use case is to run <code>cargo rustc --print=cfg</code> to get config values
for the appropriate target and influenced by any other RUSTFLAGS.</p>
<h2 id="different-binary-name"><a class="header" href="#different-binary-name">Different binary name</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/9778">#9778</a></li>
<li>PR: <a href="https://github.com/rust-lang/cargo/pull/9627">#9627</a></li>
</ul>
<p>The <code>different-binary-name</code> feature allows setting the filename of the binary without having to obey the
restrictions placed on crate names. For example, the crate name must use only <code>alphanumeric</code> characters
or <code>-</code> or <code>_</code>, and cannot be empty.</p>
<p>The <code>filename</code> parameter should <strong>not</strong> include the binary extension, <code>cargo</code> will figure out the appropriate
extension and use that for the binary on its own.</p>
<p>The <code>filename</code> parameter is only available in the <code>[[bin]]</code> section of the manifest.</p>
<pre><code class="language-toml">cargo-features = ["different-binary-name"]

[package]
name =  "foo"
version = "0.0.1"

[[bin]]
name = "foo"
filename = "007bar"
path = "src/main.rs"
</code></pre>
<h2 id="scrape-examples"><a class="header" href="#scrape-examples">scrape-examples</a></h2>
<ul>
<li>RFC: <a href="https://github.com/rust-lang/rfcs/pull/3123">#3123</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/9910">#9910</a></li>
</ul>
<p>The <code>-Z rustdoc-scrape-examples</code> flag tells Rustdoc to search crates in the current workspace
for calls to functions. Those call-sites are then included as documentation. You can use the flag
like this:</p>
<pre><code>cargo doc -Z unstable-options -Z rustdoc-scrape-examples
</code></pre>
<p>By default, Cargo will scrape examples from the example targets of packages being documented.
You can individually enable or disable targets from being scraped with the <code>doc-scrape-examples</code> flag, such as:</p>
<pre><code class="language-toml"># Enable scraping examples from a library
[lib]
doc-scrape-examples = true

# Disable scraping examples from an example target
[[example]]
name = "my-example"
doc-scrape-examples = false
</code></pre>
<p><strong>Note on tests:</strong> enabling <code>doc-scrape-examples</code> on test targets will not currently have any effect. Scraping
examples from tests is a work-in-progress.</p>
<p><strong>Note on dev-dependencies:</strong> documenting a library does not normally require the crate’s dev-dependencies. However,
example targets require dev-deps. For backwards compatibility, <code>-Z rustdoc-scrape-examples</code> will <em>not</em> introduce a
dev-deps requirement for <code>cargo doc</code>. Therefore examples will <em>not</em> be scraped from example targets under the
following conditions:</p>
<ol>
<li>No target being documented requires dev-deps, AND</li>
<li>At least one crate with targets being documented has dev-deps, AND</li>
<li>The <code>doc-scrape-examples</code> parameter is unset or false for all <code>[[example]]</code> targets.</li>
</ol>
<p>If you want examples to be scraped from example targets, then you must not satisfy one of the above conditions.
For example, you can set <code>doc-scrape-examples</code> to true for one example target, and that signals to Cargo that
you are ok with dev-deps being build for <code>cargo doc</code>.</p>
<h2 id="output-format-for-rustdoc"><a class="header" href="#output-format-for-rustdoc">output-format for rustdoc</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/13283">#13283</a></li>
</ul>
<p>This flag determines the output format of <code>cargo rustdoc</code>, accepting <code>html</code> or <code>json</code>, providing tools with a way to lean on <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustdoc_json_types/">rustdoc’s experimental JSON format</a>.</p>
<p>You can use the flag like this:</p>
<pre><code>cargo rustdoc -Z unstable-options --output-format json
</code></pre>
<h2 id="codegen-backend"><a class="header" href="#codegen-backend">codegen-backend</a></h2>
<p>The <code>codegen-backend</code> feature makes it possible to select the codegen backend used by rustc using a profile.</p>
<p>Example:</p>
<pre><code class="language-toml">[package]
name = "foo"

[dependencies]
serde = "1.0.117"

[profile.dev.package.foo]
codegen-backend = "cranelift"
</code></pre>
<p>To set this in a profile in Cargo configuration, you need to use either
<code>-Z codegen-backend</code> or <code>[unstable]</code> table to enable it. For example,</p>
<pre><code class="language-toml"># .cargo/config.toml
[unstable]
codegen-backend = true

[profile.dev.package.foo]
codegen-backend = "cranelift"
</code></pre>
<h2 id="gitoxide"><a class="header" href="#gitoxide">gitoxide</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/11813">#11813</a></li>
</ul>
<p>With the ‘gitoxide’ unstable feature, all or the specified git operations will be performed by
the <code>gitoxide</code> crate instead of <code>git2</code>.</p>
<p>While <code>-Zgitoxide</code> enables all currently implemented features, one can individually select git operations
to run with <code>gitoxide</code> with the <code>-Zgitoxide=operation[,operationN]</code> syntax.</p>
<p>Valid operations are the following:</p>
<ul>
<li><code>fetch</code> - All fetches are done with <code>gitoxide</code>, which includes git dependencies as well as the crates index.</li>
<li><code>checkout</code> <em>(planned)</em> - checkout the worktree, with support for filters and submodules.</li>
</ul>
<h2 id="git"><a class="header" href="#git">git</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/13285">#13285</a></li>
</ul>
<p>With the ‘git’ unstable feature, both <code>gitoxide</code> and <code>git2</code> will perform shallow fetches of the crate
index and git dependencies.</p>
<p>While <code>-Zgit</code> enables all currently implemented features, one can individually select when to perform
shallow fetches with the <code>-Zgit=operation[,operationN]</code> syntax.</p>
<p>Valid operations are the following:</p>
<ul>
<li><code>shallow-index</code> - perform a shallow clone of the index.</li>
<li><code>shallow-deps</code> - perform a shallow clone of git dependencies.</li>
</ul>
<p><strong>Details on shallow clones</strong></p>
<ul>
<li>To enable shallow clones, add <code>-Zgit=shallow-deps</code> for fetching git dependencies or <code>-Zgit=shallow-index</code> for fetching registry index.</li>
<li>Shallow-cloned and shallow-checked-out git repositories reside at their own <code>-shallow</code> suffixed directories, i.e,
<ul>
<li><code>~/.cargo/registry/index/*-shallow</code></li>
<li><code>~/.cargo/git/db/*-shallow</code></li>
<li><code>~/.cargo/git/checkouts/*-shallow</code></li>
</ul>
</li>
<li>When the unstable feature is on, fetching/cloning a git repository is always a shallow fetch. This roughly equals to <code>git fetch --depth 1</code> everywhere.</li>
<li>Even with the presence of <code>Cargo.lock</code> or specifying a commit <code>{ rev = "…" }</code>, gitoxide and libgit2 are still smart enough to shallow fetch without unshallowing the existing repository.</li>
</ul>
<h2 id="script"><a class="header" href="#script">script</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/12207">#12207</a></li>
</ul>
<p>Cargo can directly run <code>.rs</code> files as:</p>
<pre><code class="language-console">$ cargo +nightly -Zscript file.rs
</code></pre>
<p>where <code>file.rs</code> can be as simple as:</p>
<pre class="playground"><code class="language-rust">fn main() {}</code></pre>
<p>A user may optionally specify a manifest in a <code>cargo</code> code fence in a module-level comment, like:</p>
<pre class="playground"><code class="language-rust">#!/usr/bin/env -S cargo +nightly -Zscript
---cargo
[dependencies]
clap = { version = "4.2", features = ["derive"] }
---

use clap::Parser;

#[derive(Parser, Debug)]
#[clap(version)]
struct Args {
    #[clap(short, long, help = "Path to config")]
    config: Option&lt;std::path::PathBuf&gt;,
}

fn main() {
    let args = Args::parse();
    println!("{:?}", args);
}</code></pre>
<h3 id="single-file-packages"><a class="header" href="#single-file-packages">Single-file packages</a></h3>
<p>In addition to today’s multi-file packages (<code>Cargo.toml</code> file with other <code>.rs</code>
files), we are adding the concept of single-file packages which may contain an
embedded manifest.  There is no required distinguishment for a single-file
<code>.rs</code> package from any other <code>.rs</code> file.</p>
<p>Single-file packages may be selected via <code>--manifest-path</code>, like
<code>cargo test --manifest-path foo.rs</code>. Unlike <code>Cargo.toml</code>, these files cannot be auto-discovered.</p>
<p>A single-file package may contain an embedded manifest.  An embedded manifest
is stored using <code>TOML</code> in rust “frontmatter”, a markdown code-fence with <code>cargo</code>
at the start of the infostring at the top of the file.</p>
<p>Inferred / defaulted manifest fields:</p>
<ul>
<li><code>package.name = &lt;slugified file stem&gt;</code></li>
<li><code>package.edition = &lt;current&gt;</code> to avoid always having to add an embedded
manifest at the cost of potentially breaking scripts on rust upgrades
<ul>
<li>Warn when <code>edition</code> is unspecified to raise awareness of this</li>
</ul>
</li>
</ul>
<p>Disallowed manifest fields:</p>
<ul>
<li><code>[workspace]</code>, <code>[lib]</code>, <code>[[bin]]</code>, <code>[[example]]</code>, <code>[[test]]</code>, <code>[[bench]]</code></li>
<li><code>package.workspace</code>, <code>package.build</code>, <code>package.links</code>, <code>package.autolib</code>, <code>package.autobins</code>, <code>package.autoexamples</code>, <code>package.autotests</code>, <code>package.autobenches</code></li>
</ul>
<p>The default <code>CARGO_TARGET_DIR</code> for single-file packages is at <code>$CARGO_HOME/target/&lt;hash&gt;</code>:</p>
<ul>
<li>Avoid conflicts from multiple single-file packages being in the same directory</li>
<li>Avoid problems with the single-file package’s parent directory being read-only</li>
<li>Avoid cluttering the user’s directory</li>
</ul>
<p>The lockfile for single-file packages will be placed in <code>CARGO_TARGET_DIR</code>.  In
the future, when workspaces are supported, that will allow a user to have a
persistent lockfile.</p>
<h3 id="manifest-commands"><a class="header" href="#manifest-commands">Manifest-commands</a></h3>
<p>You may pass a manifest directly to the <code>cargo</code> command, without a subcommand,
like <code>foo/Cargo.toml</code> or a single-file package like <code>foo.rs</code>.  This is mostly
intended for being put in <code>#!</code> lines.</p>
<p>The precedence for how to interpret <code>cargo &lt;subcommand&gt;</code> is</p>
<ol>
<li>Built-in xor single-file packages</li>
<li>Aliases</li>
<li>External subcommands</li>
</ol>
<p>A parameter is identified as a manifest-command if it has one of:</p>
<ul>
<li>Path separators</li>
<li>A <code>.rs</code> extension</li>
<li>The file name is <code>Cargo.toml</code></li>
</ul>
<p>Differences between <code>cargo run --manifest-path &lt;path&gt;</code> and <code>cargo &lt;path&gt;</code></p>
<ul>
<li><code>cargo &lt;path&gt;</code> runs with the config for <code>&lt;path&gt;</code> and not the current dir, more like <code>cargo install --path &lt;path&gt;</code></li>
<li><code>cargo &lt;path&gt;</code> is at a verbosity level below the normal default.  Pass <code>-v</code> to get normal output.</li>
</ul>
<p>When running a package with an embedded manifest,
<a href="https://doc.rust-lang.org/std/os/unix/process/trait.CommandExt.html#tymethod.arg0"><code>arg0</code></a> will be the scripts path.
To get the executable’s path, see <a href="https://doc.rust-lang.org/std/env/fn.current_exe.html"><code>current_exe</code></a>.</p>
<h3 id="documentation-updates"><a class="header" href="#documentation-updates">Documentation Updates</a></h3>
<h2 id="profile-trim-paths-option"><a class="header" href="#profile-trim-paths-option">Profile <code>trim-paths</code> option</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/12137">rust-lang/cargo#12137</a></li>
<li>Tracking Rustc Issue: <a href="https://github.com/rust-lang/rust/issues/111540">rust-lang/rust#111540</a></li>
</ul>
<p>This adds a new profile setting to control how paths are sanitized in the resulting binary.
This can be enabled like so:</p>
<pre><code class="language-toml">cargo-features = ["trim-paths"]

[package]
# ...

[profile.release]
trim-paths = ["diagnostics", "object"]
</code></pre>
<p>To set this in a profile in Cargo configuration,
you need to use either <code>-Z trim-paths</code> or <code>[unstable]</code> table to enable it.
For example,</p>
<pre><code class="language-toml"># .cargo/config.toml
[unstable]
trim-paths = true

[profile.release]
trim-paths = ["diagnostics", "object"]
</code></pre>
<h3 id="documentation-updates-1"><a class="header" href="#documentation-updates-1">Documentation updates</a></h3>
<h4 id="trim-paths"><a class="header" href="#trim-paths">trim-paths</a></h4>
<p><em>as a new <a href="./profiles.html#profile-settings">“Profiles settings” entry</a></em></p>
<p><code>trim-paths</code> is a profile setting which enables and controls the sanitization of file paths in build outputs.
It takes the following values:</p>
<ul>
<li><code>"none"</code> and <code>false</code> — disable path sanitization</li>
<li><code>"macro"</code> — sanitize paths in the expansion of <code>std::file!()</code> macro.
This is where paths in embedded panic messages come from</li>
<li><code>"diagnostics"</code> — sanitize paths in printed compiler diagnostics</li>
<li><code>"object"</code> — sanitize paths in compiled executables or libraries</li>
<li><code>"all"</code> and <code>true</code> — sanitize paths in all possible locations</li>
</ul>
<p>It also takes an array with the combinations of <code>"macro"</code>, <code>"diagnostics"</code>, and <code>"object"</code>.</p>
<p>It is defaulted to <code>none</code> for the <code>dev</code> profile, and <code>object</code> for the <code>release</code> profile.
You can manually override it by specifying this option in <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[profile.dev]
trim-paths = "all"

[profile.release]
trim-paths = ["object", "diagnostics"]
</code></pre>
<p>The default <code>release</code> profile setting (<code>object</code>) sanitizes only the paths in emitted executable or library files.
It always affects paths from macros such as panic messages, and in debug information only if they will be embedded together with the binary
(the default on platforms with ELF binaries, such as Linux and windows-gnu),
but will not touch them if they are in separate files (the default on Windows MSVC and macOS).
But the paths to these separate files are sanitized.</p>
<p>If <code>trim-paths</code> is not <code>none</code> or <code>false</code>, then the following paths are sanitized if they appear in a selected scope:</p>
<ol>
<li>Path to the source files of the standard and core library (sysroot) will begin with <code>/rustc/[rustc commit hash]</code>,
e.g. <code>/home/username/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/result.rs</code> -&gt;
<code>/rustc/fe72845f7bb6a77b9e671e6a4f32fe714962cec4/library/core/src/result.rs</code></li>
<li>Path to the current package will be stripped, relatively to the current workspace root, e.g. <code>/home/username/crate/src/lib.rs</code> -&gt; <code>src/lib.rs</code>.</li>
<li>Path to dependency packages will be replaced with <code>[package name]-[version]</code>. E.g. <code>/home/username/deps/foo/src/lib.rs</code> -&gt; <code>foo-0.1.0/src/lib.rs</code></li>
</ol>
<p>When a path to the source files of the standard and core library is <em>not</em> in scope for sanitization,
the emitted path will depend on if <code>rust-src</code> component is present.
If it is, then some paths will point to the copy of the source files on your file system;
if it isn’t, then they will show up as <code>/rustc/[rustc commit hash]/library/...</code>
(just like when it is selected for sanitization).
Paths to all other source files will not be affected.</p>
<p>This will not affect any hard-coded paths in the source code, such as in strings.</p>
<h4 id="environment-variable"><a class="header" href="#environment-variable">Environment variable</a></h4>
<p><em>as a new entry of <a href="./environment-variables.html#environment-variables-cargo-sets-for-crates">“Environment variables Cargo sets for build scripts”</a></em></p>
<ul>
<li><code>CARGO_TRIM_PATHS</code> — The value of <code>trim-paths</code> profile option.
<code>false</code>, <code>"none"</code>, and empty arrays would be converted to <code>none</code>.
<code>true</code> and <code>"all"</code> become <code>all</code>.
Values in a non-empty array would be joined into a comma-separated list.
If the build script introduces absolute paths to built artifacts (such as by invoking a compiler),
the user may request them to be sanitized in different types of artifacts.
Common paths requiring sanitization include <code>OUT_DIR</code>, <code>CARGO_MANIFEST_DIR</code> and <code>CARGO_MANIFEST_PATH</code>,
plus any other introduced by the build script, such as include directories.</li>
</ul>
<h2 id="gc"><a class="header" href="#gc">gc</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/12633">#12633</a></li>
</ul>
<p>The <code>-Zgc</code> flag is used to enable certain features related to garbage-collection of cargo’s global cache within the cargo home directory.</p>
<h4 id="automatic-gc-configuration"><a class="header" href="#automatic-gc-configuration">Automatic gc configuration</a></h4>
<p>The <code>-Zgc</code> flag will enable Cargo to read extra configuration options related to garbage collection.
The settings available are:</p>
<pre><code class="language-toml"># Example config.toml file.

# Sub-table for defining specific settings for cleaning the global cache.
[cache.global-clean]
# Anything older than this duration will be deleted in the source cache.
max-src-age = "1 month"
# Anything older than this duration will be deleted in the compressed crate cache.
max-crate-age = "3 months"
# Any index older than this duration will be deleted from the index cache.
max-index-age = "3 months"
# Any git checkout older than this duration will be deleted from the checkout cache.
max-git-co-age = "1 month"
# Any git clone older than this duration will be deleted from the git cache.
max-git-db-age = "3 months"
</code></pre>
<p>Note that the <a href="config.html#cacheauto-clean-frequency"><code>cache.auto-clean-frequency</code></a> option was stabilized in Rust 1.88.</p>
<h3 id="manual-garbage-collection-with-cargo-clean"><a class="header" href="#manual-garbage-collection-with-cargo-clean">Manual garbage collection with <code>cargo clean</code></a></h3>
<p>Manual deletion can be done with the <code>cargo clean gc -Zgc</code> command.
Deletion of cache contents can be performed by passing one of the cache options:</p>
<ul>
<li><code>--max-src-age=DURATION</code> — Deletes source cache files that have not been used since the given age.</li>
<li><code>--max-crate-age=DURATION</code> — Deletes crate cache files that have not been used since the given age.</li>
<li><code>--max-index-age=DURATION</code> — Deletes registry indexes that have not been used since then given age (including their <code>.crate</code> and <code>src</code> files).</li>
<li><code>--max-git-co-age=DURATION</code> — Deletes git dependency checkouts that have not been used since then given age.</li>
<li><code>--max-git-db-age=DURATION</code> — Deletes git dependency clones that have not been used since then given age.</li>
<li><code>--max-download-age=DURATION</code> — Deletes any downloaded cache data that has not been used since then given age.</li>
<li><code>--max-src-size=SIZE</code> — Deletes the oldest source cache files until the cache is under the given size.</li>
<li><code>--max-crate-size=SIZE</code> — Deletes the oldest crate cache files until the cache is under the given size.</li>
<li><code>--max-git-size=SIZE</code> — Deletes the oldest git dependency caches until the cache is under the given size.</li>
<li><code>--max-download-size=SIZE</code> — Deletes the oldest downloaded cache data until the cache is under the given size.</li>
</ul>
<p>A DURATION is specified in the form “N seconds/minutes/days/weeks/months” where N is an integer.</p>
<p>A SIZE is specified in the form “N <em>suffix</em>” where <em>suffix</em> is B, kB, MB, GB, kiB, MiB, or GiB, and N is an integer or floating point number. If no suffix is specified, the number is the number of bytes.</p>
<pre><code class="language-sh">cargo clean gc -Zgc
cargo clean gc -Zgc --max-download-age=1week
cargo clean gc -Zgc --max-git-size=0 --max-download-size=100MB
</code></pre>
<h2 id="open-namespaces"><a class="header" href="#open-namespaces">open-namespaces</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/13576">#13576</a></li>
</ul>
<p>Allow multiple packages to participate in the same API namespace</p>
<p>This can be enabled like so:</p>
<pre><code class="language-toml">cargo-features = ["open-namespaces"]

[package]
# ...
</code></pre>
<h2 id="panic-immediate-abort"><a class="header" href="#panic-immediate-abort">panic-immediate-abort</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/16042">#16042</a></li>
<li>Upstream Tracking Issue: <a href="https://github.com/rust-lang/rust/issues/147286">rust-lang/rust#147286</a></li>
</ul>
<p>Extends the <code>panic</code> profile setting to support the
<a href="../../rustc/codegen-options/index.html#panic"><code>immediate-abort</code></a> panic strategy.
This can be enabled like so:</p>
<pre><code class="language-toml"># Cargo.toml
cargo-features = ["panic-immediate-abort"]

[package]
# ...

[profile.release]
panic = "immediate-abort"
</code></pre>
<p>To set this in a profile in Cargo configuration,
you need to use either <code>-Z panic-immediate-abort</code> CLI flag
or the <code>[unstable]</code> table to enable it.
For example,</p>
<pre><code class="language-toml"># .cargo/config.toml
[unstable]
panic-immediate-abort = true

[profile.release]
panic = "immediate-abort"
</code></pre>
<h2 id="fine-grain-locking"><a class="header" href="#fine-grain-locking">fine-grain-locking</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/4282">#4282</a></li>
</ul>
<p>Use fine grain locking instead of locking the entire build cache.</p>
<p>Note: Fine grain locking implicitly enables <a href="#build-dir-new-layout">build-dir-new-layout</a> as fine grain locking builds on that directory reoganization.</p>
<h2 id="lintscargo"><a class="header" href="#lintscargo"><code>[lints.cargo]</code></a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/12235">#12235</a></li>
</ul>
<p>A new <code>lints</code> tool table for <code>cargo</code> that can be used to configure lints emitted
by <code>cargo</code> itself when <code>-Zcargo-lints</code> is used</p>
<pre><code class="language-toml">[lints.cargo]
implicit-features = "warn"
</code></pre>
<p>This will work with
<a href="https://rust-lang.github.io/rfcs/2906-cargo-workspace-deduplicate.html">RFC 2906 <code>workspace-deduplicate</code></a>:</p>
<pre><code class="language-toml">[workspace.lints.cargo]
implicit-features = "warn"

[lints]
workspace = true
</code></pre>
<h2 id="path-bases"><a class="header" href="#path-bases">Path Bases</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/14355">#14355</a></li>
</ul>
<p>A <code>path</code> dependency may optionally specify a base by setting the <code>base</code> key to
the name of a path base from the <code>[path-bases]</code> table in either the
<a href="config.html">configuration</a> or one of the <a href="#built-in-path-bases">built-in path bases</a>.
The value of that path base is prepended to the <code>path</code> value (along with a path
separator if necessary) to produce the actual location where Cargo will look for
the dependency.</p>
<p>For example, if the <code>Cargo.toml</code> contains:</p>
<pre><code class="language-toml">cargo-features = ["path-bases"]

[dependencies]
foo = { base = "dev", path = "foo" }
</code></pre>
<p>Given a <code>[path-bases]</code> table in the configuration that contains:</p>
<pre><code class="language-toml">[path-bases]
dev = "/home/user/dev/rust/libraries/"
</code></pre>
<p>This will produce a <code>path</code> dependency <code>foo</code> located at
<code>/home/user/dev/rust/libraries/foo</code>.</p>
<p>Path bases can be either absolute or relative. Relative path bases are relative
to the parent directory of the configuration file that declared that path base.</p>
<p>The name of a path base must use only <a href="https://doc.rust-lang.org/std/primitive.char.html#method.is_alphanumeric">alphanumeric</a>
characters or <code>-</code> or <code>_</code>, must start with an <a href="https://doc.rust-lang.org/std/primitive.char.html#method.is_alphabetic">alphabetic</a>
character, and must not be empty.</p>
<p>If the name of path base used in a dependency is neither in the configuration
nor one of the built-in path base, then Cargo will raise an error.</p>
<h4 id="built-in-path-bases"><a class="header" href="#built-in-path-bases">Built-in path bases</a></h4>
<p>Cargo provides implicit path bases that can be used without the need to specify
them in a <code>[path-bases]</code> table.</p>
<ul>
<li><code>workspace</code> - If a project is <a href="workspaces.html">a workspace or workspace member</a>
then this path base is defined as the parent directory of the root <code>Cargo.toml</code>
of the workspace.</li>
</ul>
<p>If a built-in path base name is also declared in the configuration, then Cargo
will prefer the value in the configuration. The allows Cargo to add new built-in
path bases without compatibility issues (as existing uses will shadow the
built-in name).</p>
<h2 id="lockfile-path"><a class="header" href="#lockfile-path">lockfile-path</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/5707">#5707</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/14421">#14421</a></li>
</ul>
<p>The <code>-Zlockfile-path</code> flag enables the <code>resolver.lockfile-path</code> configuration option,
which allows you to specify the path of the lockfile <code>Cargo.lock</code>.</p>
<p>By default, lockfile is written into <code>&lt;workspace_root&gt;/Cargo.lock</code>.
However, when sources are stored in read-only directory,
most of the cargo commands would fail when trying to write a lockfile.
This configuration makes it easier to work with readonly sources.</p>
<p>Note, that currently path must end with <code>Cargo.lock</code>.
If you want to use this feature in multiple projects,
lockfiles should be stored in different directories.</p>
<h3 id="documentation-updates-2"><a class="header" href="#documentation-updates-2">Documentation updates</a></h3>
<p><em>as a new <code>resolver.lockfile-path</code> entry in config.md</em></p>
<h4 id="resolverlockfile-path"><a class="header" href="#resolverlockfile-path"><code>resolver.lockfile-path</code></a></h4>
<ul>
<li>Type: string (path)</li>
<li>Default: <code>&lt;workspace_root&gt;/Cargo.lock</code></li>
<li>Environment: <code>CARGO_RESOLVER_LOCKFILE_PATH</code></li>
</ul>
<p>Specifies the path to the lockfile.
By default, the lockfile is written to <code>&lt;workspace_root&gt;/Cargo.lock</code>.
This option is useful when working with read-only source directories.</p>
<p>The path must end with <code>Cargo.lock</code>.</p>
<h2 id="native-completions"><a class="header" href="#native-completions">native-completions</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/6645">#6645</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/14520">#14520</a></li>
</ul>
<p>This feature moves the handwritten completion scripts to Rust native, making it
easier for us to add, extend and test new completions. This feature is enabled with the
nightly channel, without requiring additional <code>-Z</code> options.</p>
<p>Areas of particular interest for feedback</p>
<ul>
<li>Arguments that need escaping or quoting that aren’t handled correctly</li>
<li>Inaccuracies in the information</li>
<li>Bugs in parsing of the command-line</li>
<li>Arguments that don’t report their completions</li>
<li>If a known issue is being problematic</li>
</ul>
<p>Feedback can be broken down into</p>
<ul>
<li>What completion candidates are reported
<ul>
<li>Known issues: <a href="https://github.com/rust-lang/cargo/issues/14520">#14520</a>, <a href="https://github.com/rust-lang/cargo/labels/A-completions"><code>A-completions</code></a></li>
<li><a href="https://github.com/rust-lang/cargo/issues/new">Report an issue</a> or <a href="https://github.com/rust-lang/cargo/issues/14520">discuss the behavior</a></li>
</ul>
</li>
<li>Shell integration, command-line parsing, and completion filtering
<ul>
<li>Known issues: <a href="https://github.com/clap-rs/clap/issues/3166">clap#3166</a>, <a href="https://github.com/clap-rs/clap/labels/A-completion">clap’s <code>A-completions</code></a></li>
<li><a href="https://github.com/clap-rs/clap/issues/new/choose">Report an issue</a> or <a href="https://github.com/clap-rs/clap/discussions/new/choose">discuss the behavior</a></li>
</ul>
</li>
</ul>
<p>When in doubt, you can discuss this in <a href="https://github.com/rust-lang/cargo/issues/14520">#14520</a> or on <a href="https://rust-lang.zulipchat.com/#narrow/stream/246057-t-cargo">zulip</a></p>
<h3 id="how-to-use-native-completions-feature"><a class="header" href="#how-to-use-native-completions-feature">How to use native-completions feature:</a></h3>
<ul>
<li>
<p>bash:
Add <code>source &lt;(CARGO_COMPLETE=bash cargo +nightly)</code> to <code>~/.local/share/bash-completion/completions/cargo</code>.</p>
</li>
<li>
<p>zsh:
Add <code>source &lt;(CARGO_COMPLETE=zsh cargo +nightly)</code> to your <code>.zshrc</code>.</p>
</li>
<li>
<p>fish:
Add <code>source (CARGO_COMPLETE=fish cargo +nightly | psub)</code> to <code>$XDG_CONFIG_HOME/fish/completions/cargo.fish</code></p>
</li>
<li>
<p>elvish:
Add <code>eval (E:CARGO_COMPLETE=elvish cargo +nightly | slurp)</code> to <code>$XDG_CONFIG_HOME/elvish/rc.elv</code></p>
</li>
<li>
<p>powershell:
Add <code>CARGO_COMPLETE=powershell cargo +nightly | Invoke-Expression</code> to <code>$PROFILE</code>.</p>
</li>
</ul>
<h2 id="warnings"><a class="header" href="#warnings">warnings</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/8424">#8424</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/14802">#14802</a></li>
</ul>
<p>The <code>-Z warnings</code> feature enables the <code>build.warnings</code> configuration option to control how
Cargo handles warnings. If the <code>-Z warnings</code> unstable flag is not enabled, then
the <code>build.warnings</code> config will be ignored.</p>
<p>This setting currently only applies to rustc warnings. It may apply to additional warnings (such as Cargo lints or Cargo warnings)
in the future.</p>
<h3 id="buildwarnings"><a class="header" href="#buildwarnings"><code>build.warnings</code></a></h3>
<ul>
<li>Type: string</li>
<li>Default: <code>warn</code></li>
<li>Environment: <code>CARGO_BUILD_WARNINGS</code></li>
</ul>
<p>Controls how Cargo handles warnings. Allowed values are:</p>
<ul>
<li><code>warn</code>: warnings are emitted as warnings (default).</li>
<li><code>allow</code>: warnings are hidden.</li>
<li><code>deny</code>: if warnings are emitted, an error will be raised at the end of the operation and the process will exit with a failure exit code.</li>
</ul>
<h2 id="feature-unification"><a class="header" href="#feature-unification">feature unification</a></h2>
<ul>
<li>RFC: <a href="https://github.com/rust-lang/rfcs/blob/master/text/3692-feature-unification.md">#3692</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/14774">#14774</a></li>
</ul>
<p>The <code>-Z feature-unification</code> enables the <code>resolver.feature-unification</code>
configuration option to control how features are unified across a workspace.
If the <code>-Z feature-unification</code> unstable flag is not enabled,
then the <code>resolver.feature-unification</code> configuration will be ignored.</p>
<h3 id="resolverfeature-unification"><a class="header" href="#resolverfeature-unification"><code>resolver.feature-unification</code></a></h3>
<ul>
<li>Type: string</li>
<li>Default: <code>"selected"</code></li>
<li>Environment: <code>CARGO_RESOLVER_FEATURE_UNIFICATION</code></li>
</ul>
<p>Specify which packages participate in <a href="../reference/features.html#feature-unification">feature unification</a>.</p>
<ul>
<li><code>selected</code>: Merge dependency features from all packages specified for the current build.</li>
<li><code>workspace</code>: Merge dependency features across all workspace members,
regardless of which packages are specified for the current build.</li>
<li><code>package</code>: Dependency features are considered on a package-by-package basis,
preferring duplicate builds of dependencies when different sets of features are activated by the packages.</li>
</ul>
<h2 id="lockfile-publish-time"><a class="header" href="#lockfile-publish-time">lockfile-publish-time</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/5221">#5221</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/16271">#16271</a></li>
</ul>
<p>With <code>cargo generate-lockfile -Zunstable-options --publish-time &lt;time&gt;</code>,
package resolution will not consider any package newer than the specified time.</p>
<h2 id="package-message-format"><a class="header" href="#package-message-format">Package message format</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/11666">#11666</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/15353">#15353</a></li>
</ul>
<p>The <code>--message-format</code> flag in <code>cargo package</code> controls the output message format.
Currently, it only works with the <code>--list</code> flag and affects the file listing format,
Requires <code>-Zunstable-options</code>.
See <a href="../commands/cargo-package.html#option-cargo-package---message-format"><code>cargo package --message-format</code></a>
for more information.</p>
<h2 id="rustdoc-depinfo"><a class="header" href="#rustdoc-depinfo">rustdoc depinfo</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/12266">#12266</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/15370">#15370</a></li>
</ul>
<p>The <code>-Z rustdoc-depinfo</code> flag leverages rustdoc’s dep-info files to determine
whether documentations are required to re-generate. This can be combined with
<code>-Z checksum-freshness</code> to detect checksum changes rather than file mtime.</p>
<h2 id="no-embed-metadata"><a class="header" href="#no-embed-metadata">no-embed-metadata</a></h2>
<ul>
<li>Original Pull Request: <a href="https://github.com/rust-lang/cargo/pull/15378">#15378</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/15495">#15495</a></li>
</ul>
<p>The default behavior of Rust is to embed crate metadata into <code>rlib</code> and <code>dylib</code> artifacts.
Since Cargo also passes <code>--emit=metadata</code> to these intermediate artifacts to enable pipelined
compilation, this means that a lot of metadata ends up being duplicated on disk, which wastes
disk space in the target directory.</p>
<p>This feature tells Cargo to pass the <code>-Zembed-metadata=no</code> flag to the compiler, which instructs
it not to embed metadata within rlib and dylib artifacts. In this case, the metadata will only
be stored in <code>.rmeta</code> files.</p>
<pre><code class="language-console">cargo +nightly -Zno-embed-metadata build
</code></pre>
<h2 id="unstable-editions"><a class="header" href="#unstable-editions"><code>unstable-editions</code></a></h2>
<p>The <code>unstable-editions</code> value in the <code>cargo-features</code> list allows a <code>Cargo.toml</code> manifest to specify an edition that is not yet stable.</p>
<pre><code class="language-toml">cargo-features = ["unstable-editions"]

[package]
name = "my-package"
edition = "future"
</code></pre>
<p>When new editions are introduced, the <code>unstable-editions</code> feature is required until the edition is stabilized.</p>
<p>The special “future” edition is a home for new features that are under development, and is permanently unstable. The “future” edition also has no new behavior by itself. Each change in the future edition requires an opt-in such as a <code>#![feature(...)]</code> attribute.</p>
<h2 id="fix-edition"><a class="header" href="#fix-edition"><code>fix-edition</code></a></h2>
<p><code>-Zfix-edition</code> is a permanently unstable flag to assist with testing edition migrations, particularly with the use of crater. It only works with the <code>cargo fix</code> subcommand. It takes two different forms:</p>
<ul>
<li><code>-Zfix-edition=start=$INITIAL</code> — This form checks if the current edition is equal to the given number. If not, it exits with success (because we want to ignore older editions). If it is, then it runs the equivalent of <code>cargo check</code>. This is intended to be used with crater’s “start” toolchain to set a baseline for the “before” toolchain.</li>
<li><code>-Zfix-edition=end=$INITIAL,$NEXT</code> — This form checks if the current edition is equal to the given <code>$INITIAL</code> value. If not, it exits with success. If it is, then it performs an edition migration to the edition specified in <code>$NEXT</code>. Afterwards, it will modify <code>Cargo.toml</code> to add the appropriate <code>cargo-features = ["unstable-edition"]</code>, update the <code>edition</code> field, and run the equivalent of <code>cargo check</code> to verify that the migration works on the new edition.</li>
</ul>
<p>For example:</p>
<pre><code class="language-console">cargo +nightly fix -Zfix-edition=end=2024,future
</code></pre>
<h2 id="section-timings"><a class="header" href="#section-timings">section-timings</a></h2>
<ul>
<li>Original Pull Request: <a href="https://github.com/rust-lang/cargo/pull/15780">#15780</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/15817">#15817</a></li>
</ul>
<p>This feature can be used to extend the output of <code>cargo build --timings</code>. It will tell rustc
to produce timings of individual compilation sections, which will be then displayed in the timings
HTML/JSON output.</p>
<pre><code class="language-console">cargo +nightly -Zsection-timings build --timings
</code></pre>
<h2 id="build-analysis"><a class="header" href="#build-analysis">Build analysis</a></h2>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/rust-project-goals/pull/332">rust-lang/rust-project-goals#332</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/15844">#15844</a></li>
</ul>
<p>The <code>-Zbuild-analysis</code> feature records and persists detailed build metrics on disk,
with new commands to query past builds.</p>
<p>When enabled,
Cargo writes build logs in JSONL format to the <code>$CARGO_HOME/log/</code> directory
Each cargo invocation produces a log file named with a unique session ID.
These logs contain timing information, rebuild reasons, and other build metadata
that can be analyzed with the <code>cargo report</code> subcommands.</p>
<p>To enable build analysis, add the following <a href="config.html">Cargo configuration</a>:</p>
<pre><code class="language-toml"># Example config.toml file.

[unstable]
build-analysis = true

# Enable the build metric collection
[build.analysis]
enabled = true
</code></pre>
<p>Setting it on a stable toolchain only emits an unknown config warning,
so it’s safe to keep enabled in your Cargo configuration.</p>
<h3 id="cargo-report-commands"><a class="header" href="#cargo-report-commands"><code>cargo report</code> commands</a></h3>
<p>The following commands are available under <code>-Zbuild-analysis</code>:</p>
<ul>
<li><code>cargo report sessions</code> — Lists previous build sessions.
Use this to find session IDs for other report commands.</li>
<li><code>cargo report timings</code> — Generates an HTML timing report from a previous session,
similar to <code>cargo build --timings</code> but without rebuilding.</li>
<li><code>cargo report rebuilds</code> — Reports why crates were rebuilt,
helping diagnose unexpected recompilations.</li>
</ul>
<h2 id="build-dir-new-layout"><a class="header" href="#build-dir-new-layout">build-dir-new-layout</a></h2>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/15010">#15010</a></li>
</ul>
<p>Enables the new build-dir filesystem layout.
This layout change unblocks work towards caching and locking improvements.</p>
<h2 id="compile-time-deps"><a class="header" href="#compile-time-deps">compile-time-deps</a></h2>
<p>This permanently-unstable flag to only build proc-macros and build scripts (and their required dependencies),
as well as run the build scripts.</p>
<p>It is intended for use by tools like rust-analyzer and will never be stabilized.</p>
<p>Example:</p>
<pre><code class="language-console">cargo +nightly build --compile-time-deps -Z unstable-options
cargo +nightly check --compile-time-deps --all-targets -Z unstable-options
</code></pre>
<h1 id="rustc-unicode"><a class="header" href="#rustc-unicode"><code>rustc-unicode</code></a></h1>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/rust/issues/148607">rust#148607</a></li>
</ul>
<p>Enable <code>rustc</code>’s unicode error format in Cargo’s error messages</p>
<h2 id="rustdoc-mergeable-info"><a class="header" href="#rustdoc-mergeable-info">rustdoc mergeable info</a></h2>
<ul>
<li>Original Pull Request: <a href="https://github.com/rust-lang/cargo/pull/16309">#16309</a></li>
<li>Tracking issue: <a href="https://github.com/rust-lang/cargo/issues/16306">#16306</a></li>
<li>Tracking rustc issue: <a href="https://github.com/rust-lang/rust/issues/130676">rust-lang/rust#130676</a></li>
</ul>
<p>The <code>-Z rustdoc-mergeable-info</code> leverage rustdoc’s mergeable crate info,
so that <code>cargo doc</code> can merge cross-crate information
(like the search index, source files index, etc.)
from separate output directories,
and run <code>rustdoc</code> in parallel.</p>
<h1 id="stabilized-and-removed-features"><a class="header" href="#stabilized-and-removed-features">Stabilized and removed features</a></h1>
<h2 id="compile-progress"><a class="header" href="#compile-progress">Compile progress</a></h2>
<p>The compile-progress feature has been stabilized in the 1.30 release.
Progress bars are now enabled by default.
See <a href="config.html#termprogresswhen"><code>term.progress</code></a> for more information about
controlling this feature.</p>
<h2 id="edition"><a class="header" href="#edition">Edition</a></h2>
<p>Specifying the <code>edition</code> in <code>Cargo.toml</code> has been stabilized in the 1.31 release.
See <a href="manifest.html#the-edition-field">the edition field</a> for more information
about specifying this field.</p>
<h2 id="rename-dependency"><a class="header" href="#rename-dependency">rename-dependency</a></h2>
<p>Specifying renamed dependencies in <code>Cargo.toml</code> has been stabilized in the 1.31 release.
See <a href="specifying-dependencies.html#renaming-dependencies-in-cargotoml">renaming dependencies</a>
for more information about renaming dependencies.</p>
<h2 id="alternate-registries"><a class="header" href="#alternate-registries">Alternate Registries</a></h2>
<p>Support for alternate registries has been stabilized in the 1.34 release.
See the <a href="registries.html">Registries chapter</a> for more information about alternate registries.</p>
<h2 id="offline-mode"><a class="header" href="#offline-mode">Offline Mode</a></h2>
<p>The offline feature has been stabilized in the 1.36 release.
See the <a href="../commands/cargo.html#option-cargo---offline"><code>--offline</code> flag</a> for
more information on using the offline mode.</p>
<h2 id="publish-lockfile"><a class="header" href="#publish-lockfile">publish-lockfile</a></h2>
<p>The <code>publish-lockfile</code> feature has been removed in the 1.37 release.
The <code>Cargo.lock</code> file is always included when a package is published if the
package contains a binary target. <code>cargo install</code> requires the <code>--locked</code> flag
to use the <code>Cargo.lock</code> file.
See <a href="../commands/cargo-package.html"><code>cargo package</code></a> and
<a href="../commands/cargo-install.html"><code>cargo install</code></a> for more information.</p>
<h2 id="default-run"><a class="header" href="#default-run">default-run</a></h2>
<p>The <code>default-run</code> feature has been stabilized in the 1.37 release.
See <a href="manifest.html#the-default-run-field">the <code>default-run</code> field</a> for more
information about specifying the default target to run.</p>
<h2 id="cache-messages"><a class="header" href="#cache-messages">cache-messages</a></h2>
<p>Compiler message caching has been stabilized in the 1.40 release.
Compiler warnings are now cached by default and will be replayed automatically
when re-running Cargo.</p>
<h2 id="install-upgrade"><a class="header" href="#install-upgrade">install-upgrade</a></h2>
<p>The <code>install-upgrade</code> feature has been stabilized in the 1.41 release.
<a href="../commands/cargo-install.html"><code>cargo install</code></a> will now automatically upgrade packages if they appear to be
out-of-date. See the <a href="../commands/cargo-install.html"><code>cargo install</code></a> documentation for more information.</p>
<h2 id="profile-overrides"><a class="header" href="#profile-overrides">Profile Overrides</a></h2>
<p>Profile overrides have been stabilized in the 1.41 release.
See <a href="profiles.html#overrides">Profile Overrides</a> for more information on using
overrides.</p>
<h2 id="config-profiles"><a class="header" href="#config-profiles">Config Profiles</a></h2>
<p>Specifying profiles in Cargo config files and environment variables has been
stabilized in the 1.43 release.
See the <a href="config.html#profile">config <code>[profile]</code> table</a> for more information
about specifying <a href="profiles.html">profiles</a> in config files.</p>
<h2 id="crate-versions"><a class="header" href="#crate-versions">crate-versions</a></h2>
<p>The <code>-Z crate-versions</code> flag has been stabilized in the 1.47 release.
The crate version is now automatically included in the
<a href="../commands/cargo-doc.html"><code>cargo doc</code></a> documentation sidebar.</p>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<p>The <code>-Z features</code> flag has been stabilized in the 1.51 release.
See <a href="features.html#feature-resolver-version-2">feature resolver version 2</a>
for more information on using the new feature resolver.</p>
<h2 id="package-features"><a class="header" href="#package-features">package-features</a></h2>
<p>The <code>-Z package-features</code> flag has been stabilized in the 1.51 release.
See the <a href="features.html#resolver-version-2-command-line-flags">resolver version 2 command-line flags</a>
for more information on using the features CLI options.</p>
<h2 id="resolver"><a class="header" href="#resolver">Resolver</a></h2>
<p>The <code>resolver</code> feature in <code>Cargo.toml</code> has been stabilized in the 1.51 release.
See the <a href="resolver.html#resolver-versions">resolver versions</a> for more
information about specifying resolvers.</p>
<h2 id="extra-link-arg"><a class="header" href="#extra-link-arg">extra-link-arg</a></h2>
<p>The <code>extra-link-arg</code> feature to specify additional linker arguments in build
scripts has been stabilized in the 1.56 release. See the <a href="build-scripts.html#outputs-of-the-build-script">build script
documentation</a> for more
information on specifying extra linker arguments.</p>
<h2 id="configurable-env"><a class="header" href="#configurable-env">configurable-env</a></h2>
<p>The <code>configurable-env</code> feature to specify environment variables in Cargo
configuration has been stabilized in the 1.56 release. See the <a href="config.html#env">config
documentation</a> for more information about configuring
environment variables.</p>
<h2 id="rust-version"><a class="header" href="#rust-version">rust-version</a></h2>
<p>The <code>rust-version</code> field in <code>Cargo.toml</code> has been stabilized in the 1.56 release.
See the <a href="manifest.html#the-rust-version-field">rust-version field</a> for more
information on using the <code>rust-version</code> field and the <code>--ignore-rust-version</code> option.</p>
<h2 id="patch-in-config"><a class="header" href="#patch-in-config">patch-in-config</a></h2>
<p>The <code>-Z patch-in-config</code> flag, and the corresponding support for
<code>[patch]</code> section in Cargo configuration files has been stabilized in
the 1.56 release. See the <a href="config.html#patch">patch field</a> for more
information.</p>
<h2 id="edition-2021"><a class="header" href="#edition-2021">edition 2021</a></h2>
<p>The 2021 edition has been stabilized in the 1.56 release.
See the <a href="manifest.html#the-edition-field"><code>edition</code> field</a> for more information on setting the edition.
See <a href="../commands/cargo-fix.html"><code>cargo fix --edition</code></a> and <a href="../../edition-guide/index.html">The Edition Guide</a> for more information on migrating existing projects.</p>
<h2 id="custom-named-profiles"><a class="header" href="#custom-named-profiles">Custom named profiles</a></h2>
<p>Custom named profiles have been stabilized in the 1.57 release. See the
<a href="profiles.html#custom-profiles">profiles chapter</a> for more information.</p>
<h2 id="profile-strip-option"><a class="header" href="#profile-strip-option">Profile <code>strip</code> option</a></h2>
<p>The profile <code>strip</code> option has been stabilized in the 1.59 release. See the
<a href="profiles.html#strip">profiles chapter</a> for more information.</p>
<h2 id="future-incompat-report"><a class="header" href="#future-incompat-report">Future incompat report</a></h2>
<p>Support for generating a future-incompat report has been stabilized
in the 1.59 release. See the <a href="future-incompat-report.html">future incompat report chapter</a>
for more information.</p>
<h2 id="namespaced-features"><a class="header" href="#namespaced-features">Namespaced features</a></h2>
<p>Namespaced features has been stabilized in the 1.60 release.
See the <a href="features.html#optional-dependencies">Features chapter</a> for more information.</p>
<h2 id="weak-dependency-features"><a class="header" href="#weak-dependency-features">Weak dependency features</a></h2>
<p>Weak dependency features has been stabilized in the 1.60 release.
See the <a href="features.html#dependency-features">Features chapter</a> for more information.</p>
<h2 id="timings"><a class="header" href="#timings">timings</a></h2>
<p>The <code>-Ztimings</code> option has been stabilized as <code>--timings</code> in the 1.60 release.
The timings output format option
(e.g., the <code>--timings=html</code> and the machine-readable <code>--timings=json</code> output)
has been removed in 1.94.0-nightly.</p>
<h2 id="config-cli"><a class="header" href="#config-cli">config-cli</a></h2>
<p>The <code>--config</code> CLI option has been stabilized in the 1.63 release. See
the <a href="config.html#command-line-overrides">config documentation</a> for more
information.</p>
<h2 id="multitarget"><a class="header" href="#multitarget">multitarget</a></h2>
<p>The <code>-Z multitarget</code> option has been stabilized in the 1.64 release.
See <a href="config.html#buildtarget"><code>build.target</code></a> for more information about
setting the default <a href="../appendix/glossary.html#target" title="&quot;target&quot; (glossary)">target platform triples</a>.</p>
<h2 id="crate-type"><a class="header" href="#crate-type">crate-type</a></h2>
<p>The <code>--crate-type</code> flag for <code>cargo rustc</code> has been stabilized in the 1.64
release. See the <a href="../commands/cargo-rustc.html"><code>cargo rustc</code> documentation</a>
for more information.</p>
<h2 id="workspace-inheritance"><a class="header" href="#workspace-inheritance">Workspace Inheritance</a></h2>
<p>Workspace Inheritance has been stabilized in the 1.64 release.
See <a href="workspaces.html#the-package-table">workspace.package</a>,
<a href="workspaces.html#the-dependencies-table">workspace.dependencies</a>,
and <a href="specifying-dependencies.html#inheriting-a-dependency-from-a-workspace">inheriting-a-dependency-from-a-workspace</a>
for more information.</p>
<h2 id="terminal-width"><a class="header" href="#terminal-width">terminal-width</a></h2>
<p>The <code>-Z terminal-width</code> option has been stabilized in the 1.68 release.
The terminal width is always passed to the compiler when running from a
terminal where Cargo can automatically detect the width.</p>
<h2 id="sparse-registry"><a class="header" href="#sparse-registry">sparse-registry</a></h2>
<p>Sparse registry support has been stabilized in the 1.68 release.
See <a href="registries.html#registry-protocols">Registry Protocols</a> for more information.</p>
<h3 id="cargo-logout"><a class="header" href="#cargo-logout"><code>cargo logout</code></a></h3>
<p>The <a href="../commands/cargo-logout.html"><code>cargo logout</code></a> command has been stabilized in the 1.70 release.</p>
<h2 id="doctest-in-workspace"><a class="header" href="#doctest-in-workspace"><code>doctest-in-workspace</code></a></h2>
<p>The <code>-Z doctest-in-workspace</code> option for <code>cargo test</code> has been stabilized and
enabled by default in the 1.72 release. See the
<a href="../commands/cargo-test.html#working-directory-of-tests"><code>cargo test</code> documentation</a>
for more information about the working directory for compiling and running tests.</p>
<h2 id="keep-going"><a class="header" href="#keep-going">keep-going</a></h2>
<p>The <code>--keep-going</code> option has been stabilized in the 1.74 release. See the
<a href="../commands/cargo-build.html#option-cargo-build---keep-going"><code>--keep-going</code> flag</a>
in <code>cargo build</code> as an example for more details.</p>
<h2 id="lints"><a class="header" href="#lints"><code>[lints]</code></a></h2>
<p><a href="manifest.html#the-lints-section"><code>[lints]</code></a> (enabled via <code>-Zlints</code>) has been stabilized in the 1.74 release.</p>
<h2 id="credential-process"><a class="header" href="#credential-process">credential-process</a></h2>
<p>The <code>-Z credential-process</code> feature has been stabilized in the 1.74 release.</p>
<p>See <a href="registry-authentication.html">Registry Authentication</a> documentation for details.</p>
<h2 id="registry-auth"><a class="header" href="#registry-auth">registry-auth</a></h2>
<p>The <code>-Z registry-auth</code> feature has been stabilized in the 1.74 release with the additional
requirement that a credential-provider is configured.</p>
<p>See <a href="registry-authentication.html">Registry Authentication</a> documentation for details.</p>
<h2 id="check-cfg"><a class="header" href="#check-cfg">check-cfg</a></h2>
<p>The <code>-Z check-cfg</code> feature has been stabilized in the 1.80 release by making it the
default behavior.</p>
<p>See the <a href="build-scripts.html#rustc-check-cfg">build script documentation</a> for information
about specifying custom cfgs.</p>
<h2 id="edition-2024"><a class="header" href="#edition-2024">Edition 2024</a></h2>
<p>The 2024 edition has been stabilized in the 1.85 release.
See the <a href="manifest.html#the-edition-field"><code>edition</code> field</a> for more information on setting the edition.
See <a href="../commands/cargo-fix.html"><code>cargo fix --edition</code></a> and <a href="../../edition-guide/index.html">The Edition Guide</a> for more information on migrating existing projects.</p>
<h2 id="automatic-garbage-collection"><a class="header" href="#automatic-garbage-collection">Automatic garbage collection</a></h2>
<p>Support for automatically deleting old files was stabilized in Rust 1.88.
More information can be found in the <a href="config.html#cache">config chapter</a>.</p>
<h2 id="doctest-xcompile"><a class="header" href="#doctest-xcompile">doctest-xcompile</a></h2>
<p>Doctest cross-compiling is now unconditionally enabled starting in Rust 1.89. Running doctests with <code>cargo test</code> will now honor the <code>--target</code> flag.</p>
<h2 id="package-workspace"><a class="header" href="#package-workspace">package-workspace</a></h2>
<p>Multi-package publishing has been stabilized in Rust 1.90.0.</p>
<h2 id="build-dir"><a class="header" href="#build-dir">build-dir</a></h2>
<p>Support for <code>build.build-dir</code> was stabilized in the 1.91 release.
See the <a href="config.html#buildbuild-dir">config documentation</a> for information about changing the build-dir</p>
<h2 id="build-plan"><a class="header" href="#build-plan">Build-plan</a></h2>
<p>The <code>--build-plan</code> argument for the <code>build</code> command has been removed in 1.93.0-nightly.
See <a href="https://github.com/rust-lang/cargo/issues/7614">https://github.com/rust-lang/cargo/issues/7614</a> for the reason for its removal.</p>
<h2 id="config-include"><a class="header" href="#config-include">config-include</a></h2>
<p>Support for including extra configuration files via the <code>include</code> config key
has been stabilized in 1.93.0.
See the <a href="config.html#include"><code>include</code> config documentation</a> for more.</p>
<h2 id="pubtime"><a class="header" href="#pubtime">pubtime</a></h2>
<p>The <code>pubtime</code> index field  has been stabilized in Rust 1.94.0.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../reference/lints.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../commands/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../reference/lints.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../commands/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../mark-09e88c2c.min.js"></script>
        <script src="../searcher-c2a407aa.js"></script>

        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
