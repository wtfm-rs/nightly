<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This crate has no code, only rustdoc. RTFM"><title>rustup - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-b10cf797.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="rustup" data-themes="" data-resource-suffix="" data-rustdoc-version="1.95.0-nightly (5c49c4f7c 2026-01-20)" data-channel="nightly" data-search-js="search-86d08462.js" data-stringdex-js="stringdex-b897f86f.js" data-settings-js="settings-170eb4bf.js" ><script src="../static.files/storage-f9617a14.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-7bab91a1.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-ffcac47a.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Crate rustup</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../rustup/index.html">rustup</a></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#rustup-run" title="rustup run">rustup run</a></li><li><a href="#makefile-macros" title="Makefile macros">Makefile macros</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>rustup</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/rustup/rustup.rs.html#1-103">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This crate has no code, only <a href="https://doc.rust-lang.org/stable/rustdoc/">rustdoc</a>.
<a href="https://rust-lang.github.io/rustup/index.html">RTFM</a></p>
<h2 id="rustup-run"><a class="doc-anchor" href="#rustup-run">ยง</a>rustup run</h2><div class="example-wrap"><pre class="language-sh"><code>rustup run --help 
Run a command with an environment configured for a given toolchain

Usage: rustup[EXE] run [OPTIONS] &lt;TOOLCHAIN&gt; &lt;COMMAND&gt;...

Arguments:
 &lt;TOOLCHAIN&gt;   Toolchain name, such as &#39;stable&#39;, &#39;nightly&#39;, &#39;1.8.0&#39;, or a custom toolchain name, or an
               absolute path. For more information see `rustup help toolchain`
 &lt;COMMAND&gt;...  

Options:
     --install  Install the requested toolchain if needed
 -h, --help     Print help

Discussion:
   Configures an environment to use the given toolchain and then runs
   the specified program. The command may be any program, not just
   rustc or cargo. This can be used for testing arbitrary toolchains
   without setting an override.

   Commands explicitly proxied by `rustup` (such as `rustc` and
   `cargo`) also have a shorthand for this available. The toolchain
   can be set by using `+toolchain` as the first argument. These are
   equivalent:

       $ cargo +nightly build

       $ rustup run nightly cargo build</code></pre></div>
<p>It seems the online help above was out-dated.</p>
<div class="example-wrap"><pre class="language-sh"><code>% cargo --version
cargo 1.92.0 (Homebrew)
% cargo +nightly build
error: no such command: `+nightly`

help: invoke `cargo` through `rustup` to handle `+toolchain` directives</code></pre></div>
<p>So we will use <code>rustuprun nightly ...</code> version. It might be a good idea
to wrap them with Makefile macros.</p>
<h2 id="makefile-macros"><a class="doc-anchor" href="#makefile-macros">ยง</a>Makefile macros</h2>
<p>Since we use make as the top level CLI/CI, it would be convenient to
wrap Rust nigthly toolchain commands with
<a href="https://www.gnu.org/software/make/manual/html_node/Using-Variables.html">Makefile macros</a>.</p>
<div class="example-wrap"><pre class="language-make"><code>RUSTC = rustup run nightly rustc
RUSTDOC = rustup run nightly rustdoc
CARGO = rustup run nightly cargo</code></pre></div>
<p>Here is how to use it.</p>
<p><code>make versions</code></p>
<div class="example-wrap"><pre class="language-make"><code>$(RUSTC) --version
$(RUSTDOC) --version
$(CARGO) --version</code></pre></div><div class="example-wrap"><pre class="language-sh"><code>rustup run nightly rustc --version
rustc 1.95.0-nightly (5c49c4f7c 2026-01-20)
rustup run nightly rustdoc --version
rustdoc 1.95.0-nightly (5c49c4f7c 2026-01-20)
rustup run nightly cargo --version
cargo 1.95.0-nightly (85eff7c80 2026-01-15)</code></pre></div>
<p><code>make build</code></p>
<div class="example-wrap"><pre class="language-make"><code>rm -rf doc
$(RUSTDOC) introduction/src/lib.rs
$(RUSTDOC) introduction/src/rustup.rs
cp -r doc docs
rm -rf doc</code></pre></div>
<p><code>make test</code></p>
<div class="example-wrap"><pre class="language-make"><code>$(CARGO) fmt
$(CARGO) test</code></pre></div>
<p><code>make versions</code></p>
<div class="example-wrap"><pre class="language-make"><code>$(RUSTC) --version
$(RUSTDOC) --version
$(CARGO) --version</code></pre></div>
<p><code>make clean</code></p>
<div class="example-wrap"><pre class="language-make"><code>$(CARGO) clean </code></pre></div></div></details></section></div></main></body></html>